/*!
 * iScroll Lite base on iScroll v4.1.6 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(){var t=Math,e=function(m){return m>>0},x=(/webkit/i).test(navigator.appVersion)?"webkit":(/firefox/i).test(navigator.userAgent)?"Moz":"opera" in window?"O":"",y=(/android/gi).test(navigator.appVersion),j=(/iphone|ipad/gi).test(navigator.appVersion),d=(/playbook/gi).test(navigator.appVersion),o=(/hp-tablet/gi).test(navigator.appVersion),l="WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix(),w="ontouchstart" in window&&!o,g=x+"Transform" in document.documentElement.style,h=j||d,r=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(m){return setTimeout(m,17)}})(),n=(function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout})(),i="onorientationchange" in window?"orientationchange":"resize",c=w?"touchstart":"mousedown",s=w?"touchmove":"mousemove",f=w?"touchend":"mouseup",v=w?"touchcancel":"mouseup",b="translate"+(l?"3d(":"("),k=l?",0)":")",u=function(A,m){var B=this,C=document,z;B.wrapper=typeof A=="object"?A:C.getElementById(A);B.wrapper.style.overflow="hidden";B.scroller=B.wrapper.children[0];B.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,onRefresh:null,onBeforeScrollStart:function(D){D.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(z in m){B.options[z]=m[z]}B.x=B.options.x;B.y=B.options.y;B.options.useTransform=g?B.options.useTransform:false;B.options.hScrollbar=B.options.hScroll&&B.options.hScrollbar;B.options.vScrollbar=B.options.vScroll&&B.options.vScrollbar;B.options.useTransition=h&&B.options.useTransition;B.scroller.style[x+"TransitionProperty"]=B.options.useTransform?"-"+x.toLowerCase()+"-transform":"top left";B.scroller.style[x+"TransitionDuration"]="0";B.scroller.style[x+"TransformOrigin"]="0 0";if(B.options.useTransition){B.scroller.style[x+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"}if(B.options.useTransform){B.scroller.style[x+"Transform"]=b+B.x+"px,"+B.y+"px"+k}else{B.scroller.style.cssText+=";position:absolute;top:"+B.y+"px;left:"+B.x+"px"}B.refresh();B._bind(i,window);B._bind(c);if(!w){B._bind("mouseout",B.wrapper)}};u.prototype={enabled:true,x:0,y:0,steps:[],scale:1,handleEvent:function(z){var m=this;switch(z.type){case c:if(!w&&z.button!==0){return}m._start(z);break;case s:m._move(z);break;case f:case v:m._end(z);break;case i:m._resize();break;case"mouseout":m._mouseout(z);break;case"webkitTransitionEnd":m._transitionEnd(z);break}},_resize:function(){this.refresh()},_pos:function(m,z){m=this.hScroll?m:0;z=this.vScroll?z:0;if(this.options.useTransform){this.scroller.style[x+"Transform"]=b+m+"px,"+z+"px"+k+" scale("+this.scale+")"}else{m=e(m);z=e(z);this.scroller.style.left=m+"px";this.scroller.style.top=z+"px"}this.x=m;this.y=z},_start:function(C){var B=this,z=w?C.touches[0]:C,A,m,D;if(!B.enabled){return}if(B.options.onBeforeScrollStart){B.options.onBeforeScrollStart.call(B,C)}if(B.options.useTransition){B._transitionTime(0)}B.moved=false;B.animating=false;B.zoomed=false;B.distX=0;B.distY=0;B.absDistX=0;B.absDistY=0;B.dirX=0;B.dirY=0;if(B.options.momentum){if(B.options.useTransform){A=getComputedStyle(B.scroller,null)[x+"Transform"].replace(/[^0-9-.,]/g,"").split(",");m=A[4]*1;D=A[5]*1}else{m=getComputedStyle(B.scroller,null).left.replace(/[^0-9-]/g,"")*1;D=getComputedStyle(B.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(m!=B.x||D!=B.y){if(B.options.useTransition){B._unbind("webkitTransitionEnd")}else{n(B.aniTime)}B.steps=[];B._pos(m,D)}}B.startX=B.x;B.startY=B.y;B.pointX=z.pageX;B.pointY=z.pageY;B.startTime=C.timeStamp||Date.now();if(B.options.onScrollStart){B.options.onScrollStart.call(B,C)}B._bind(s);B._bind(f);B._bind(v)},_move:function(E){var B=this,z=w?E.touches[0]:E,A=z.pageX-B.pointX,m=z.pageY-B.pointY,F=B.x+A,D=B.y+m,C=E.timeStamp||Date.now();if(B.options.onBeforeScrollMove){B.options.onBeforeScrollMove.call(B,E)}B.pointX=z.pageX;B.pointY=z.pageY;if(F>0||F<B.maxScrollX){F=B.options.bounce?B.x+(A/2):F>=0||B.maxScrollX>=0?0:B.maxScrollX}if(D>0||D<B.maxScrollY){D=B.options.bounce?B.y+(m/2):D>=0||B.maxScrollY>=0?0:B.maxScrollY}B.distX+=A;B.distY+=m;B.absDistX=t.abs(B.distX);B.absDistY=t.abs(B.distY);if(B.absDistX<6&&B.absDistY<6){return}if(B.options.lockDirection){if(B.absDistX>B.absDistY+5){D=B.y;m=0}else{if(B.absDistY>B.absDistX+5){F=B.x;A=0}}}B.moved=true;B._pos(F,D);B.dirX=A>0?-1:A<0?1:0;B.dirY=m>0?-1:m<0?1:0;if(C-B.startTime>300){B.startTime=C;B.startX=B.x;B.startY=B.y}if(B.options.onScrollMove){B.options.onScrollMove.call(B,E)}},_end:function(E){if(w&&E.touches.length!=0){return}var C=this,I=w?E.changedTouches[0]:E,F,H,A={dist:0,time:0},m={dist:0,time:0},B=(E.timeStamp||Date.now())-C.startTime,G=C.x,D=C.y,z;C._unbind(s);C._unbind(f);C._unbind(v);if(C.options.onBeforeScrollEnd){C.options.onBeforeScrollEnd.call(C,E)}if(!C.moved){if(w){F=I.target;while(F.nodeType!=1){F=F.parentNode}if(F.tagName!="SELECT"&&F.tagName!="INPUT"&&F.tagName!="TEXTAREA"){H=document.createEvent("MouseEvents");H.initMouseEvent("click",true,true,E.view,1,I.screenX,I.screenY,I.clientX,I.clientY,E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,0,null);H._fake=true;F.dispatchEvent(H)}}C._resetPos(200);if(C.options.onTouchEnd){C.options.onTouchEnd.call(C,E)}return}if(B<300&&C.options.momentum){A=G?C._momentum(G-C.startX,B,-C.x,C.scrollerW-C.wrapperW+C.x,C.options.bounce?C.wrapperW:0):A;m=D?C._momentum(D-C.startY,B,-C.y,(C.maxScrollY<0?C.scrollerH-C.wrapperH+C.y:0),C.options.bounce?C.wrapperH:0):m;G=C.x+A.dist;D=C.y+m.dist;if((C.x>0&&G>0)||(C.x<C.maxScrollX&&G<C.maxScrollX)){A={dist:0,time:0}}if((C.y>0&&D>0)||(C.y<C.maxScrollY&&D<C.maxScrollY)){m={dist:0,time:0}}}if(A.dist||m.dist){z=t.max(t.max(A.time,m.time),10);C.scrollTo(e(G),e(D),z);if(C.options.onTouchEnd){C.options.onTouchEnd.call(C,E)}return}C._resetPos(200);if(C.options.onTouchEnd){C.options.onTouchEnd.call(C,E)}},_resetPos:function(A){var m=this,B=m.x>=0?0:m.x<m.maxScrollX?m.maxScrollX:m.x,z=m.y>=0||m.maxScrollY>0?0:m.y<m.maxScrollY?m.maxScrollY:m.y;if(B==m.x&&z==m.y){if(m.moved){if(m.options.onScrollEnd){m.options.onScrollEnd.call(m)}m.moved=false}return}m.scrollTo(B,z,A||0)},_mouseout:function(z){var m=z.relatedTarget;if(!m){this._end(z);return}while(m=m.parentNode){if(m==this.wrapper){return}}this._end(z)},_transitionEnd:function(z){var m=this;if(z.target!=m.scroller){return}m._unbind("webkitTransitionEnd");m._startAni()},_startAni:function(){var E=this,z=E.x,m=E.y,C=Date.now(),D,B,A;if(E.animating){return}if(!E.steps.length){E._resetPos(400);return}D=E.steps.shift();if(D.x==z&&D.y==m){D.time=0}E.animating=true;E.moved=true;if(E.options.useTransition){E._transitionTime(D.time);E._pos(D.x,D.y);E.animating=false;if(D.time){E._bind("webkitTransitionEnd")}else{E._resetPos(0)}return}A=function(){var F=Date.now(),H,G;if(F>=C+D.time){E._pos(D.x,D.y);E.animating=false;if(E.options.onAnimationEnd){E.options.onAnimationEnd.call(E)}E._startAni();return}F=(F-C)/D.time-1;B=t.sqrt(1-F*F);H=(D.x-z)*B+z;G=(D.y-m)*B+m;E._pos(H,G);if(E.animating){E.aniTime=r(A)}};A()},_transitionTime:function(m){this.scroller.style[x+"TransitionDuration"]=m+"ms"},_momentum:function(F,z,D,m,H){var E=0.0006,A=t.abs(F)/z,B=(A*A)/(2*E),G=0,C=0;if(F>0&&B>D){C=H/(6/(B/A*E));D=D+C;A=A*D/B;B=D}else{if(F<0&&B>m){C=H/(6/(B/A*E));m=m+C;A=A*m/B;B=m}}B=B*(F<0?-1:1);G=A/E;return{dist:B,time:e(G)}},_offset:function(m){var A=-m.offsetLeft,z=-m.offsetTop;while(m=m.offsetParent){A-=m.offsetLeft;z-=m.offsetTop}return{left:A,top:z}},_bind:function(A,z,m){(z||this.scroller).addEventListener(A,this,!!m)},_unbind:function(A,z,m){(z||this.scroller).removeEventListener(A,this,!!m)},destroy:function(){var m=this;m.scroller.style[x+"Transform"]="";m._unbind(i,window);m._unbind(c);m._unbind(s);m._unbind(f);m._unbind(v);m._unbind("mouseout",m.wrapper);if(m.options.useTransition){m._unbind("webkitTransitionEnd")}if(m.options.onDestroy){m.options.onDestroy.call(m)}},refresh:function(){var m=this,z;m.wrapperW=m.wrapper.clientWidth;m.wrapperH=m.wrapper.clientHeight;m.scrollerW=m.scroller.offsetWidth;m.scrollerH=m.scroller.offsetHeight;m.maxScrollX=m.wrapperW-m.scrollerW;m.maxScrollY=m.wrapperH-m.scrollerH;m.dirX=0;m.dirY=0;m.hScroll=m.options.hScroll&&m.maxScrollX<0;m.vScroll=m.options.vScroll&&(!m.options.bounceLock&&!m.hScroll||m.scrollerH>m.wrapperH);z=m._offset(m.wrapper);m.wrapperOffsetLeft=-z.left;m.wrapperOffsetTop=-z.top;m.scroller.style[x+"TransitionDuration"]="0";m._resetPos(200)},scrollTo:function(m,F,E,D){var C=this,B=m,A,z;C.stop();if(!B.length){B=[{x:m,y:F,time:E,relative:D}]}for(A=0,z=B.length;A<z;A++){if(B[A].relative){B[A].x=C.x-B[A].x;B[A].y=C.y-B[A].y}C.steps.push({x:B[A].x,y:B[A].y,time:B[A].time||0})}C._startAni()},scrollToElement:function(m,A){var z=this,B;m=m.nodeType?m:z.scroller.querySelector(m);if(!m){return}B=z._offset(m);B.left+=z.wrapperOffsetLeft;B.top+=z.wrapperOffsetTop;B.left=B.left>0?0:B.left<z.maxScrollX?z.maxScrollX:B.left;B.top=B.top>0?0:B.top<z.maxScrollY?z.maxScrollY:B.top;A=A===undefined?t.max(t.abs(B.left)*2,t.abs(B.top)*2):A;z.scrollTo(B.left,B.top,A)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(s);this._unbind(f);this._unbind(v)},enable:function(){this.enabled=true},stop:function(){n(this.aniTime);this.steps=[];this.moved=false;this.animating=false}};if(typeof exports!=="undefined"){exports.iScroll=u}else{window.iScroll=u}})();!function(d){var e=function(f){this.value={h:1,s:1,b:1,a:1};this.setColor(f)};e.prototype={constructor:e,setColor:function(g){g=g.toLowerCase();var f=this;d.each(c.stringParsers,function(k,m){var j=m.re.exec(g),h=j&&m.parse(j),l=m.space||"rgba";if(h){if(l==="hsla"){f.value=c.RGBtoHSB.apply(null,c.HSLtoRGB.apply(null,h))}else{f.value=c.RGBtoHSB.apply(null,h)}return false}})},setHue:function(f){this.value.h=1-f},setSaturation:function(f){this.value.s=f},setLightness:function(f){this.value.b=1-f},setAlpha:function(f){this.value.a=parseInt((1-f)*100,10)/100},toRGB:function(k,o,l,m){if(!k){k=this.value.h;o=this.value.s;l=this.value.b}k*=360;var j,n,g,i,f;k=(k%360)/60;f=l*o;i=f*(1-Math.abs(k%2-1));j=n=g=l-f;k=~~k;j+=[f,i,0,0,i,f][k];n+=[i,f,f,i,0,0][k];g+=[0,0,i,f,f,i][k];return{r:Math.round(j*255),g:Math.round(n*255),b:Math.round(g*255),a:m||this.value.a}},toHex:function(k,j,f,g){var i=this.toRGB(k,j,f,g);return"#"+((1<<24)|(parseInt(i.r)<<16)|(parseInt(i.g)<<8)|parseInt(i.b)).toString(16).substr(1)},toHSL:function(m,l,g,i){if(!m){m=this.value.h;l=this.value.s;g=this.value.b}var k=m,f=(2-l)*g,j=l*g;if(f>0&&f<=1){j/=f}else{j/=2-f}f/=2;if(j>1){j=1}return{h:k,s:j,l:f,a:i||this.value.a}}};var b=function(g,f){this.element=d(g);var h=f.format||this.element.data("color-format")||"hex";this.format=c.translateFormats[h];this.isInput=this.element.is("input");this.component=this.element.is(".color")?this.element.find(".add-on"):false;this.picker=d(c.template).appendTo("body").on("mousedown",d.proxy(this.mousedown,this));if(this.isInput){this.element.on({focus:d.proxy(this.show,this),keyup:d.proxy(this.update,this)})}else{if(this.component){this.component.on({click:d.proxy(this.show,this)})}else{this.element.on({click:d.proxy(this.show,this)})}}if(h==="rgba"||h==="hsla"){this.picker.addClass("alpha");this.alpha=this.picker.find(".colorpicker-alpha")[0].style}if(this.component){this.picker.find(".colorpicker-color").hide();this.preview=this.element.find("i")[0].style}else{this.preview=this.picker.find("div:last")[0].style}this.base=this.picker.find("div:first")[0].style;this.update()};b.prototype={constructor:b,show:function(f){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();d(window).on("resize",d.proxy(this.place,this));if(!this.isInput){if(f){f.stopPropagation();f.preventDefault()}}d(document).on({mousedown:d.proxy(this.hide,this)});this.element.trigger({type:"show",color:this.color})},update:function(){this.color=new e(this.isInput?this.element.prop("value"):this.element.data("color"));this.picker.find("i").eq(0).css({left:this.color.value.s*100,top:100-this.color.value.b*100}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a));this.previewColor()},setValue:function(f){this.color=new e(f);this.picker.find("i").eq(0).css({left:this.color.value.s*100,top:100-this.color.value.b*100}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a));this.previewColor();this.element.trigger({type:"changeColor",color:this.color})},hide:function(){this.picker.hide();d(window).off("resize",this.place);if(!this.isInput){d(document).off({mousedown:this.hide});if(this.component){this.element.find("input").prop("value",this.format.call(this))}this.element.data("color",this.format.call(this))}else{this.element.prop("value",this.format.call(this))}this.element.trigger({type:"hide",color:this.color})},place:function(){var f=this.component?this.component.offset():this.element.offset();this.picker.css({top:f.top+this.height,left:f.left})},previewColor:function(){try{this.preview.backgroundColor=this.format.call(this)}catch(f){this.preview.backgroundColor=this.color.toHex()}this.base.backgroundColor=this.color.toHex(this.color.value.h,1,1,1);if(this.alpha){this.alpha.backgroundColor=this.color.toHex()}},pointer:null,slider:null,mousedown:function(h){h.stopPropagation();h.preventDefault();var g=d(h.target);var f=g.closest("div");if(!f.is(".colorpicker")){if(f.is(".colorpicker-saturation")){this.slider=d.extend({},c.sliders.saturation)}else{if(f.is(".colorpicker-hue")){this.slider=d.extend({},c.sliders.hue)}else{if(f.is(".colorpicker-alpha")){this.slider=d.extend({},c.sliders.alpha)}else{return false}}}var i=f.offset();this.slider.knob=f.find("i")[0].style;this.slider.left=h.pageX-i.left;this.slider.top=h.pageY-i.top;this.pointer={left:h.pageX,top:h.pageY};d(document).on({mousemove:d.proxy(this.mousemove,this),mouseup:d.proxy(this.mouseup,this)}).trigger("mousemove")}return false},mousemove:function(h){h.stopPropagation();h.preventDefault();var g=Math.max(0,Math.min(this.slider.maxLeft,this.slider.left+((h.pageX||this.pointer.left)-this.pointer.left)));var f=Math.max(0,Math.min(this.slider.maxTop,this.slider.top+((h.pageY||this.pointer.top)-this.pointer.top)));this.slider.knob.left=g+"px";this.slider.knob.top=f+"px";if(this.slider.callLeft){this.color[this.slider.callLeft].call(this.color,g/100)}if(this.slider.callTop){this.color[this.slider.callTop].call(this.color,f/100)}this.previewColor();this.element.trigger({type:"changeColor",color:this.color});return false},mouseup:function(f){f.stopPropagation();f.preventDefault();d(document).off({mousemove:this.mousemove,mouseup:this.mouseup});return false}};d.fn.colorpicker=function(f,g){return this.each(function(){var j=d(this),i=j.data("colorpicker"),h=typeof f==="object"&&f;if(!i){j.data("colorpicker",(i=new b(this,d.extend({},d.fn.colorpicker.defaults,h))))}if(typeof f==="string"){i[f](g)}})};d.fn.colorpicker.defaults={};d.fn.colorpicker.Constructor=b;var c={translateFormats:{rgb:function(){var f=this.color.toRGB();return"rgb("+f.r+","+f.g+","+f.b+")"},rgba:function(){var f=this.color.toRGB();return"rgba("+f.r+","+f.g+","+f.b+","+f.a+")"},hsl:function(){var f=this.color.toHSL();return"hsl("+Math.round(f.h*360)+","+Math.round(f.s*100)+"%,"+Math.round(f.l*100)+"%)"},hsla:function(){var f=this.color.toHSL();return"hsla("+Math.round(f.h*360)+","+Math.round(f.s*100)+"%,"+Math.round(f.l*100)+"%,"+f.a+")"},hex:function(){return this.color.toHex()}},sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},hue:{maxLeft:0,maxTop:100,callLeft:false,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:false,callTop:"setAlpha"}},RGBtoHSB:function(m,l,f,i){m/=255;l/=255;f/=255;var k,j,h,n;h=Math.max(m,l,f);n=h-Math.min(m,l,f);k=(n===0?null:h==m?(l-f)/n:h==l?(f-m)/n+2:(m-l)/n+4);k=((k+360)%6)*60/360;j=n===0?0:n/h;return{h:k||1,s:j,b:h,a:i||1}},HueToRGB:function(i,g,f){if(f<0){f+=1}else{if(f>1){f-=1}}if((f*6)<1){return i+(g-i)*f*6}else{if((f*2)<1){return g}else{if((f*3)<2){return i+(g-i)*((2/3)-f)*6}else{return i}}}},HSLtoRGB:function(o,x,m,w){if(x<0){x=0}var i;if(m<=0.5){i=m*(1+x)}else{i=m+x-(m*x)}var j=2*m-i;var u=o+(1/3);var k=o;var n=o-(1/3);var f=Math.round(c.HueToRGB(j,i,u)*255);var t=Math.round(c.HueToRGB(j,i,k)*255);var v=Math.round(c.HueToRGB(j,i,n)*255);return[f,t,v,w||1]},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(f){return[f[1],f[2],f[3],f[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(f){return[2.55*f[1],2.55*f[2],2.55*f[3],f[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(f){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(f){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(f){return[f[1]/360,f[2]/100,f[3]/100,f[4]]}}],template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'}}(window.jQuery);!function(d){var b=function(f,e){this.element=d(f);this.format=c.parseFormat(e.format||this.element.data("date-format")||"mm/dd/yyyy");this.picker=d(c.template).appendTo("body").on({click:d.proxy(this.click,this)});this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on"):false;if(this.isInput){this.element.on({focus:d.proxy(this.show,this),keyup:d.proxy(this.update,this)})}else{if(this.component){this.component.on("click",d.proxy(this.show,this))}else{this.element.on("click",d.proxy(this.show,this))}}this.minViewMode=e.minViewMode||this.element.data("date-minviewmode")||0;if(typeof this.minViewMode==="string"){switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0;break}}this.viewMode=e.viewMode||this.element.data("date-viewmode")||0;if(typeof this.viewMode==="string"){switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0;break}}this.startViewMode=this.viewMode;this.weekStart=e.weekStart||this.element.data("date-weekstart")||0;this.weekEnd=this.weekStart===0?6:this.weekStart-1;this.onRender=e.onRender;this.fillDow();this.fillMonths();this.update();this.showMode()};b.prototype={constructor:b,show:function(g){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();d(window).on("resize",d.proxy(this.place,this));if(g){g.stopPropagation();g.preventDefault()}if(!this.isInput){}var f=this;d(document).on("mousedown",function(e){if(d(e.target).closest(".datepicker").length==0){f.hide()}});this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide();d(window).off("resize",this.place);this.viewMode=this.startViewMode;this.showMode();if(!this.isInput){d(document).off("mousedown",this.hide)}this.element.trigger({type:"hide",date:this.date})},set:function(){var e=c.formatDate(this.date,this.format);if(!this.isInput){if(this.component){this.element.find("input").prop("value",e)}this.element.data("date",e)}else{this.element.prop("value",e)}},setValue:function(e){if(typeof e==="string"){this.date=c.parseDate(e,this.format)}else{this.date=new Date(e)}this.set();this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0);this.fill()},place:function(){var e=this.component?this.component.offset():this.element.offset();this.picker.css({top:e.top+this.height,left:e.left})},update:function(e){this.date=c.parseDate(typeof e==="string"?e:(this.isInput?this.element.prop("value"):this.element.data("date")),this.format);this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0);this.fill()},fillDow:function(){var e=this.weekStart;var f="<tr>";while(e<this.weekStart+7){f+='<th class="dow">'+c.dates.daysMin[(e++)%7]+"</th>"}f+="</tr>";this.picker.find(".datepicker-days thead").append(f)},fillMonths:function(){var f="";var e=0;while(e<12){f+='<span class="month">'+c.dates.monthsShort[e++]+"</span>"}this.picker.find(".datepicker-months td").append(f)},fill:function(){var t=new Date(this.viewDate),u=t.getFullYear(),s=t.getMonth(),g=this.date.valueOf();this.picker.find(".datepicker-days th:eq(1)").text(c.dates.months[s]+" "+u);var k=new Date(u,s-1,28,0,0,0,0),v=c.getDaysInMonth(k.getFullYear(),k.getMonth());k.setDate(v);k.setDate(v-(k.getDay()-this.weekStart+7)%7);var n=new Date(k);n.setDate(n.getDate()+42);n=n.valueOf();var m=[];var j,r,e;while(k.valueOf()<n){if(k.getDay()===this.weekStart){m.push("<tr>")}j=this.onRender(k);r=k.getFullYear();e=k.getMonth();if((e<s&&r===u)||r<u){j+=" old"}else{if((e>s&&r===u)||r>u){j+=" new"}}if(k.valueOf()===g){j+=" active"}m.push('<td class="day '+j+'">'+k.getDate()+"</td>");if(k.getDay()===this.weekEnd){m.push("</tr>")}k.setDate(k.getDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(m.join(""));var o=this.date.getFullYear();var f=this.picker.find(".datepicker-months").find("th:eq(1)").text(u).end().find("span").removeClass("active");if(o===u){f.eq(this.date.getMonth()).addClass("active")}m="";u=parseInt(u/10,10)*10;var h=this.picker.find(".datepicker-years").find("th:eq(1)").text(u+"-"+(u+9)).end().find("td");u-=1;for(var l=-1;l<11;l++){m+='<span class="year'+(l===-1||l===10?" old":"")+(o===u?" active":"")+'">'+u+"</span>";u+=1}h.html(m)},click:function(j){j.stopPropagation();j.preventDefault();var i=d(j.target).closest("span, td, th");if(i.length===1){switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.viewDate["set"+c.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+c.modes[this.viewMode].navFnc].call(this.viewDate)+c.modes[this.viewMode].navStep*(i[0].className==="prev"?-1:1));this.fill();this.set();break}break;case"span":if(i.is(".month")){var h=i.parent().find("span").index(i);this.viewDate.setMonth(h)}else{var g=parseInt(i.text(),10)||0;this.viewDate.setFullYear(g)}if(this.viewMode!==0){this.date=new Date(this.viewDate);this.element.trigger({type:"changeDate",date:this.date,viewMode:c.modes[this.viewMode].clsName})}this.showMode(-1);this.fill();this.set();break;case"td":if(i.is(".day")&&!i.is(".disabled")){var f=parseInt(i.text(),10)||1;var h=this.viewDate.getMonth();if(i.is(".old")){h-=1}else{if(i.is(".new")){h+=1}}var g=this.viewDate.getFullYear();this.date=new Date(g,h,f,0,0,0,0);this.viewDate=new Date(g,h,Math.min(28,f),0,0,0,0);this.fill();this.set();this.element.trigger({type:"changeDate",date:this.date,viewMode:c.modes[this.viewMode].clsName})}break}}},mousedown:function(f){f.stopPropagation();f.preventDefault()},showMode:function(e){if(e){this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+e))}this.picker.find(">div").hide().filter(".datepicker-"+c.modes[this.viewMode].clsName).show()}};d.fn.datepicker=function(e,f){return this.each(function(){var i=d(this),h=i.data("datepicker"),g=typeof e==="object"&&e;if(!h){i.data("datepicker",(h=new b(this,d.extend({},d.fn.datepicker.defaults,g))))}if(typeof e==="string"){h[e](f)}})};d.fn.datepicker.defaults={onRender:function(e){return""}};d.fn.datepicker.Constructor=b;var c={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(e){return(((e%4===0)&&(e%100!==0))||(e%400===0))},getDaysInMonth:function(e,f){return[31,(c.isLeapYear(e)?29:28),31,30,31,30,31,31,30,31,30,31][f]},parseFormat:function(g){var f=g.match(/[.\/\-\s].*?/),e=g.split(/\W+/);if(!f||!e||e.length===0){throw new Error("Invalid date format.")}return{separator:f,parts:e}},parseDate:function(g,n){var h=g.split(n.separator),g=new Date(),f;g.setHours(0);g.setMinutes(0);g.setSeconds(0);g.setMilliseconds(0);if(h.length===n.parts.length){var l=g.getFullYear(),m=g.getDate(),k=g.getMonth();for(var j=0,e=n.parts.length;j<e;j++){f=parseInt(h[j],10)||1;switch(n.parts[j]){case"dd":case"d":m=f;g.setDate(f);break;case"mm":case"m":k=f-1;g.setMonth(f-1);break;case"yy":l=2000+f;g.setFullYear(2000+f);break;case"yyyy":l=f;g.setFullYear(f);break}}g=new Date(l,k,m,0,0,0)}return g},formatDate:function(e,h){var j={d:e.getDate(),m:e.getMonth()+1,yy:e.getFullYear().toString().substring(2),yyyy:e.getFullYear()};j.dd=(j.d<10?"0":"")+j.d;j.mm=(j.m<10?"0":"")+j.m;var e=[];for(var g=0,f=h.parts.length;g<f;g++){e.push(j[h.parts[g]])}return e.join(h.separator)},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};c.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+c.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+c.headTemplate+c.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+c.headTemplate+c.contTemplate+"</table></div></div>"}(window.jQuery);
/*!
 * Timepicker Component for Twitter Bootstrap
 *
 * Copyright 2013 Joris de Wit
 *
 * Contributors https://github.com/jdewit/bootstrap-timepicker/graphs/contributors
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */
(function(e,d,b,f){var c=function(h,g){this.widget="";this.$element=e(h);this.defaultTime=g.defaultTime;this.disableFocus=g.disableFocus;this.isOpen=g.isOpen;this.minuteStep=g.minuteStep;this.modalBackdrop=g.modalBackdrop;this.secondStep=g.secondStep;this.showInputs=g.showInputs;this.showMeridian=g.showMeridian;this.showSeconds=g.showSeconds;this.template=g.template;this.appendWidgetTo=g.appendWidgetTo;this._init()};c.prototype={constructor:c,_init:function(){var g=this;if(this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend")){this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":e.proxy(this.showWidget,this)});this.$element.on({"focus.timepicker":e.proxy(this.highlightUnit,this),"click.timepicker":e.proxy(this.highlightUnit,this),"keydown.timepicker":e.proxy(this.elementKeydown,this),"blur.timepicker":e.proxy(this.blurElement,this)})}else{if(this.template){this.$element.on({"focus.timepicker":e.proxy(this.showWidget,this),"click.timepicker":e.proxy(this.showWidget,this),"blur.timepicker":e.proxy(this.blurElement,this)})}else{this.$element.on({"focus.timepicker":e.proxy(this.highlightUnit,this),"click.timepicker":e.proxy(this.highlightUnit,this),"keydown.timepicker":e.proxy(this.elementKeydown,this),"blur.timepicker":e.proxy(this.blurElement,this)})}}if(this.template!==false){this.$widget=e(this.getTemplate()).prependTo(this.$element.parents(this.appendWidgetTo)).on("click",e.proxy(this.widgetClick,this))}else{this.$widget=false}if(this.showInputs&&this.$widget!==false){this.$widget.find("input").each(function(){e(this).on({"click.timepicker":function(){e(this).select()},"keydown.timepicker":e.proxy(g.widgetKeydown,g)})})}this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=f;this.updateFromElementVal()},decrementHour:function(){if(this.showMeridian){if(this.hour===1){this.hour=12}else{if(this.hour===12){this.hour--;return this.toggleMeridian()}else{if(this.hour===0){this.hour=11;return this.toggleMeridian()}else{this.hour--}}}}else{if(this.hour===0){this.hour=23}else{this.hour--}}this.update()},decrementMinute:function(h){var g;if(h){g=this.minute-h}else{g=this.minute-this.minuteStep}if(g<0){this.decrementHour();this.minute=g+60}else{this.minute=g}this.update()},decrementSecond:function(){var g=this.second-this.secondStep;if(g<0){this.decrementMinute(true);this.second=g+60}else{this.second=g}this.update()},elementKeydown:function(g){switch(g.keyCode){case 9:this.updateFromElementVal();switch(this.highlightedUnit){case"hour":g.preventDefault();this.highlightNextUnit();break;case"minute":if(this.showMeridian||this.showSeconds){g.preventDefault();this.highlightNextUnit()}break;case"second":if(this.showMeridian){g.preventDefault();this.highlightNextUnit()}break}break;case 27:this.updateFromElementVal();break;case 37:g.preventDefault();this.highlightPrevUnit();this.updateFromElementVal();break;case 38:g.preventDefault();switch(this.highlightedUnit){case"hour":this.incrementHour();this.highlightHour();break;case"minute":this.incrementMinute();this.highlightMinute();break;case"second":this.incrementSecond();this.highlightSecond();break;case"meridian":this.toggleMeridian();this.highlightMeridian();break}break;case 39:g.preventDefault();this.updateFromElementVal();this.highlightNextUnit();break;case 40:g.preventDefault();switch(this.highlightedUnit){case"hour":this.decrementHour();this.highlightHour();break;case"minute":this.decrementMinute();this.highlightMinute();break;case"second":this.decrementSecond();this.highlightSecond();break;case"meridian":this.toggleMeridian();this.highlightMeridian();break}break}},formatTime:function(g,j,h,i){g=g<10?"0"+g:g;j=j<10?"0"+j:j;h=h<10?"0"+h:h;return g+":"+j+(this.showSeconds?":"+h:"")+(this.showMeridian?" "+i:"")},getCursorPosition:function(){var h=this.$element.get(0);if("selectionStart" in h){return h.selectionStart}else{if(b.selection){h.focus();var i=b.selection.createRange(),g=b.selection.createRange().text.length;i.moveStart("character",-h.value.length);return i.text.length-g}}},getTemplate:function(){var i,k,h,g,j,l;if(this.showInputs){k='<input type="text" name="hour" class="bootstrap-timepicker-hour" maxlength="2"/>';h='<input type="text" name="minute" class="bootstrap-timepicker-minute" maxlength="2"/>';g='<input type="text" name="second" class="bootstrap-timepicker-second" maxlength="2"/>';j='<input type="text" name="meridian" class="bootstrap-timepicker-meridian" maxlength="2"/>'}else{k='<span class="bootstrap-timepicker-hour"></span>';h='<span class="bootstrap-timepicker-minute"></span>';g='<span class="bootstrap-timepicker-second"></span>';j='<span class="bootstrap-timepicker-meridian"></span>'}l='<table><tr><td><a href="#" data-action="incrementHour"><i class="icon-chevron-up"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="icon-chevron-up"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="icon-chevron-up"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="icon-chevron-up"></i></a></td>':"")+"</tr><tr><td>"+k+'</td> <td class="separator">:</td><td>'+h+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+g+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+j+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="icon-chevron-down"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="icon-chevron-down"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="icon-chevron-down"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="icon-chevron-down"></i></a></td>':"")+"</tr></table>";switch(this.template){case"modal":i='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">Ã—</a><h3>Pick a Time</h3></div><div class="modal-content">'+l+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case"dropdown":i='<div class="bootstrap-timepicker-widget dropdown-menu">'+l+"</div>";break}return i},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},hideWidget:function(){if(this.isOpen===false){return}if(this.showInputs){this.updateFromWidgetInputs()}this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}});if(this.template==="modal"&&this.$widget.modal){this.$widget.modal("hide")}else{this.$widget.removeClass("open")}e(b).off("mousedown.timepicker");this.isOpen=false},highlightUnit:function(){this.position=this.getCursorPosition();if(this.position>=0&&this.position<=2){this.highlightHour()}else{if(this.position>=3&&this.position<=5){this.highlightMinute()}else{if(this.position>=6&&this.position<=8){if(this.showSeconds){this.highlightSecond()}else{this.highlightMeridian()}}else{if(this.position>=9&&this.position<=11){this.highlightMeridian()}}}}},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":if(this.showSeconds){this.highlightSecond()}else{if(this.showMeridian){this.highlightMeridian()}else{this.highlightHour()}}break;case"second":if(this.showMeridian){this.highlightMeridian()}else{this.highlightHour()}break;case"meridian":this.highlightHour();break}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":if(this.showSeconds){this.highlightSecond()}else{this.highlightMinute()}break}},highlightHour:function(){var g=this.$element.get(0);this.highlightedUnit="hour";if(g.setSelectionRange){setTimeout(function(){g.setSelectionRange(0,2)},0)}},highlightMinute:function(){var g=this.$element.get(0);this.highlightedUnit="minute";if(g.setSelectionRange){setTimeout(function(){g.setSelectionRange(3,5)},0)}},highlightSecond:function(){var g=this.$element.get(0);this.highlightedUnit="second";if(g.setSelectionRange){setTimeout(function(){g.setSelectionRange(6,8)},0)}},highlightMeridian:function(){var g=this.$element.get(0);this.highlightedUnit="meridian";if(g.setSelectionRange){if(this.showSeconds){setTimeout(function(){g.setSelectionRange(9,11)},0)}else{setTimeout(function(){g.setSelectionRange(6,8)},0)}}},incrementHour:function(){if(this.showMeridian){if(this.hour===11){this.hour++;return this.toggleMeridian()}else{if(this.hour===12){this.hour=0}}}if(this.hour===23){this.hour=0;return}this.hour++;this.update()},incrementMinute:function(h){var g;if(h){g=this.minute+h}else{g=this.minute+this.minuteStep-(this.minute%this.minuteStep)}if(g>59){this.incrementHour();this.minute=g-60}else{this.minute=g}this.update()},incrementSecond:function(){var g=this.second+this.secondStep-(this.second%this.secondStep);if(g>59){this.incrementMinute(true);this.second=g-60}else{this.second=g}this.update()},remove:function(){e("document").off(".timepicker");if(this.$widget){this.$widget.remove()}delete this.$element.data().timepicker},setDefaultTime:function(i){if(!this.$element.val()){if(i==="current"){var g=new Date(),h=g.getHours(),k=Math.floor(g.getMinutes()/this.minuteStep)*this.minuteStep,l=Math.floor(g.getSeconds()/this.secondStep)*this.secondStep,j="AM";if(this.showMeridian){if(h===0){h=12}else{if(h>=12){if(h>12){h=h-12}j="PM"}else{j="AM"}}}this.hour=h;this.minute=k;this.second=l;this.meridian=j;this.update()}else{if(i===false){this.hour=0;this.minute=0;this.second=0;this.meridian="AM"}else{this.setTime(i)}}}else{this.updateFromElementVal()}},setTime:function(i){var g,h;if(this.showMeridian){g=i.split(" ");h=g[0].split(":");this.meridian=g[1]}else{h=i.split(":")}this.hour=parseInt(h[0],10);this.minute=parseInt(h[1],10);this.second=parseInt(h[2],10);if(isNaN(this.hour)){this.hour=0}if(isNaN(this.minute)){this.minute=0}if(this.showMeridian){if(this.hour>12){this.hour=12}else{if(this.hour<1){this.hour=12}}if(this.meridian==="am"||this.meridian==="a"){this.meridian="AM"}else{if(this.meridian==="pm"||this.meridian==="p"){this.meridian="PM"}}if(this.meridian!=="AM"&&this.meridian!=="PM"){this.meridian="AM"}}else{if(this.hour>=24){this.hour=23}else{if(this.hour<0){this.hour=0}}}if(this.minute<0){this.minute=0}else{if(this.minute>=60){this.minute=59}}if(this.showSeconds){if(isNaN(this.second)){this.second=0}else{if(this.second<0){this.second=0}else{if(this.second>=60){this.second=59}}}}this.update()},showWidget:function(){if(this.isOpen){return}if(this.$element.is(":disabled")){return}var g=this;e(b).on("mousedown.timepicker",function(h){if(e(h.target).closest(".bootstrap-timepicker-widget").length===0){g.hideWidget()}});this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}});if(this.disableFocus){this.$element.blur()}this.updateFromElementVal();if(this.template==="modal"&&this.$widget.modal){this.$widget.modal("show").on("hidden",e.proxy(this.hideWidget,this))}else{if(this.isOpen===false){this.$widget.addClass("open")}}this.isOpen=true},toggleMeridian:function(){this.meridian=this.meridian==="AM"?"PM":"AM";this.update()},update:function(){this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}});this.updateElement();this.updateWidget()},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){var g=this.$element.val();if(g){this.setTime(g)}},updateWidget:function(){if(this.$widget===false){return}var g=this.hour<10?"0"+this.hour:this.hour,i=this.minute<10?"0"+this.minute:this.minute,h=this.second<10?"0"+this.second:this.second;if(this.showInputs){this.$widget.find("input.bootstrap-timepicker-hour").val(g);this.$widget.find("input.bootstrap-timepicker-minute").val(i);if(this.showSeconds){this.$widget.find("input.bootstrap-timepicker-second").val(h)}if(this.showMeridian){this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)}}else{this.$widget.find("span.bootstrap-timepicker-hour").text(g);this.$widget.find("span.bootstrap-timepicker-minute").text(i);if(this.showSeconds){this.$widget.find("span.bootstrap-timepicker-second").text(h)}if(this.showMeridian){this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian)}}},updateFromWidgetInputs:function(){if(this.$widget===false){return}var g=e("input.bootstrap-timepicker-hour",this.$widget).val()+":"+e("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+e("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+e("input.bootstrap-timepicker-meridian",this.$widget).val():"");this.setTime(g)},widgetClick:function(h){h.stopPropagation();h.preventDefault();var g=e(h.target).closest("a").data("action");if(g){this[g]()}},widgetKeydown:function(h){var i=e(h.target).closest("input"),g=i.attr("name");switch(h.keyCode){case 9:if(this.showMeridian){if(g==="meridian"){return this.hideWidget()}}else{if(this.showSeconds){if(g==="second"){return this.hideWidget()}}else{if(g==="minute"){return this.hideWidget()}}}this.updateFromWidgetInputs();break;case 27:this.hideWidget();break;case 38:h.preventDefault();switch(g){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian();break}break;case 40:h.preventDefault();switch(g){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian();break}break}}};e.fn.timepicker=function(h){var g=Array.apply(null,arguments);g.shift();return this.each(function(){var k=e(this),j=k.data("timepicker"),i=typeof h==="object"&&h;if(!j){k.data("timepicker",(j=new c(this,e.extend({},e.fn.timepicker.defaults,i,e(this).data()))))}if(typeof h==="string"){j[h].apply(j,g)}})};e.fn.timepicker.defaults={defaultTime:"current",disableFocus:false,isOpen:false,minuteStep:15,modalBackdrop:false,secondStep:15,showSeconds:false,showInputs:true,showMeridian:true,template:"dropdown",appendWidgetTo:".bootstrap-timepicker"};e.fn.timepicker.Constructor=c})(jQuery,window,document);(function(b){var c=function(e,d){this.$element=b(e);this.$note=b('<div class="alert"></div>');this.options=b.extend(true,b.fn.notify.defaults,d,this.$element.data());if(this.options.transition){if(this.options.transition=="fade"){this.$note.addClass("in").addClass(this.options.transition)}else{this.$note.addClass(this.options.transition)}}else{this.$note.addClass("fade").addClass("in")}if(this.options.type){this.$note.addClass("alert-"+this.options.type)}else{this.$note.addClass("alert-success")}if(this.options.message){if(typeof this.options.message==="string"){this.$note.html(this.options.message)}else{if(typeof this.options.message==="object"){if(this.options.message.html){this.$note.html(this.options.message.html)}else{if(this.options.message.text){this.$note.text(this.options.message.text)}}}}}if(this.options.closable){var f=b('<a class="close pull-right">&times;</a>')}b(f).on("click",b.proxy(onClose,this));this.$note.prepend(f);return this};onClose=function(){this.options.onClose();b(this.$note).remove();this.options.onClosed()};c.prototype.show=function(){if(this.options.fadeOut.enabled){this.$note.delay(this.options.fadeOut.delay||3000).fadeOut("slow",b.proxy(onClose,this))}this.$element.append(this.$note);this.$note.alert()};c.prototype.hide=function(){if(this.options.fadeOut.enabled){this.$note.delay(this.options.fadeOut.delay||3000).fadeOut("slow",b.proxy(onClose,this))}else{onClose.call(this)}};b.fn.notify=function(d){return new c(this,d)};b.fn.notify.defaults={type:"success",closable:true,transition:"fade",fadeOut:{enabled:true,delay:3000},message:null,onClose:function(){},onClosed:function(){}}})(window.jQuery);$.fn.toggles=function(d){d=d||{};var f=$.extend({drag:true,click:true,text:{on:"ON",off:"OFF"},on:false,animate:250,transition:"ease-in-out",checkbox:null,clicker:null,width:50,height:20,type:"compact"},d);var c=(f.type=="select");f.checkbox=$(f.checkbox);if(f.clicker){f.clicker=$(f.clicker)}var h="margin-left "+f.animate+"ms "+f.transition;var g={"-webkit-transition":h,"-moz-transition":h,transition:h};var e={"-webkit-transition":"","-moz-transition":"",transition:""};var b=function(j,l,i,n){var o=j.toggleClass("active").hasClass("active");if(n===o){return}var k=j.find(".toggle-inner").css(g);j.find(".toggle-off").toggleClass("active");j.find(".toggle-on").toggleClass("active");f.checkbox.prop("checked",o);if(c){return}var m=o?0:-l+i;k.css("margin-left",m);setTimeout(function(){k.css(e);k.css("margin-left",m)},f.animate)};return this.each(function(){var r=$(this);var x=r.height();var l=r.width();if(!x||!l){r.height(x=f.height);r.width(l=f.width)}var k='<div class="toggle-';var s=$(k+'slide">');var y=$(k+'inner">');var t=$(k+'on">');var m=$(k+'off">');var i=$(k+'blob">');var u=x/2;var w=l-u;t.css({height:x,width:w,textAlign:"center",textIndent:c?"":-u,lineHeight:x+"px"}).html(f.text["on"]);m.css({height:x,width:w,marginLeft:c?"":-u,textAlign:"center",textIndent:c?"":u,lineHeight:x+"px"}).html(f.text["off"]).addClass("active");i.css({height:x,width:x,marginLeft:-u});y.css({width:l*2-x,marginLeft:c?0:-l+x});if(c){s.addClass("toggle-select");r.css("width",w*2);i.hide()}r.html(s.html(y.append(t,i,m)));s.on("toggle",function(A,z){if(A){A.stopPropagation()}b(s,l,x);r.trigger("toggle",!z)});r.on("toggleOn",function(){b(s,l,x,false)});r.on("toggleOff",function(){b(s,l,x,true)});if(f.on){b(s,l,x)}if(f.click&&(!f.clicker||!f.clicker.has(r).length)){r.on("click",function(z){if(z.target!=i[0]||!f.drag){s.trigger("toggle",s.hasClass("active"))}})}if(f.clicker){f.clicker.on("click",function(z){if(z.target!=i[0]||!f.drag){s.trigger("toggle",s.hasClass("active"))}})}if(!f.drag||c){return}var v;var o=(l-x)/4;var n=function(A){r.off("mousemove");s.off("mouseleave");i.off("mouseup");var z=s.hasClass("active");if(!v&&f.click&&A.type!=="mouseleave"){s.trigger("toggle",z);return}if(z){if(v<-o){s.trigger("toggle",z)}else{y.animate({marginLeft:0},f.animate/2)}}else{if(v>o){s.trigger("toggle",z)}else{y.animate({marginLeft:-l+x},f.animate/2)}}};var j=-l+x;i.on("mousedown",function(z){v=0;i.off("mouseup");s.off("mouseleave");var A=z.pageX;r.on("mousemove",i,function(C){v=C.pageX-A;var B;if(s.hasClass("active")){B=v;if(v>0){B=0}if(v<j){B=j}}else{B=v+j;if(v<0){B=j}if(v>-j){B=0}}y.css("margin-left",B)});i.on("mouseup",n);s.on("mouseleave",n)})})};var bootbox=window.bootbox||(function(m,j){var h="en",i="en",b=true,k="static",e="javascript:;",g="",n={},d={},l={};l.setLocale=function(o){for(var r in c){if(r==o){h=o;return}}throw new Error("Invalid locale: "+o)};l.addLocale=function(o,r){if(typeof c[o]==="undefined"){c[o]={}}for(var s in r){c[o][s]=r[s]}};l.setIcons=function(o){d=o;if(typeof d!=="object"||d===null){d={}}};l.setBtnClasses=function(o){n=o;if(typeof n!=="object"||n===null){n={}}};l.alert=function(){var s="",r=f("OK"),o=null;switch(arguments.length){case 1:s=arguments[0];break;case 2:s=arguments[0];if(typeof arguments[1]=="function"){o=arguments[1]}else{r=arguments[1]}break;case 3:s=arguments[0];r=arguments[1];o=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}return l.dialog(s,{label:r,icon:d.OK,"class":n.OK,callback:o},{onEscape:o||true})};l.confirm=function(){var u="",t=f("CANCEL"),s=f("CONFIRM"),o=null;switch(arguments.length){case 1:u=arguments[0];break;case 2:u=arguments[0];if(typeof arguments[1]=="function"){o=arguments[1]}else{t=arguments[1]}break;case 3:u=arguments[0];t=arguments[1];if(typeof arguments[2]=="function"){o=arguments[2]}else{s=arguments[2]}break;case 4:u=arguments[0];t=arguments[1];s=arguments[2];o=arguments[3];break;default:throw new Error("Incorrect number of arguments: expected 1-4")}var r=function(){if(typeof o==="function"){return o(false)}};var v=function(){if(typeof o==="function"){return o(true)}};return l.dialog(u,[{label:t,icon:d.CANCEL,"class":n.CANCEL,callback:r},{label:s,icon:d.CONFIRM,"class":n.CONFIRM,callback:v}],{onEscape:r})};l.prompt=function(){var x="",t=f("CANCEL"),y=f("CONFIRM"),s=null,v="";switch(arguments.length){case 1:x=arguments[0];break;case 2:x=arguments[0];if(typeof arguments[1]=="function"){s=arguments[1]}else{t=arguments[1]}break;case 3:x=arguments[0];t=arguments[1];if(typeof arguments[2]=="function"){s=arguments[2]}else{y=arguments[2]}break;case 4:x=arguments[0];t=arguments[1];y=arguments[2];s=arguments[3];break;case 5:x=arguments[0];t=arguments[1];y=arguments[2];s=arguments[3];v=arguments[4];break;default:throw new Error("Incorrect number of arguments: expected 1-5")}var u=x;var r=j("<form></form>");r.append("<input class='input-block-level' autocomplete=off type=text value='"+v+"' />");var z=function(){if(typeof s==="function"){return s(null)}};var w=function(){if(typeof s==="function"){return s(r.find("input[type=text]").val())}};var o=l.dialog(r,[{label:t,icon:d.CANCEL,"class":n.CANCEL,callback:z},{label:y,icon:d.CONFIRM,"class":n.CONFIRM,callback:w}],{header:u,show:false,onEscape:z});o.on("shown",function(){r.find("input[type=text]").focus();r.on("submit",function(A){A.preventDefault();o.find(".btn-primary").click()})});o.modal("show");return o};l.dialog=function(C,B,t){var G="",J=[];if(!t){t={}}if(typeof B==="undefined"){B=[]}else{if(typeof B.length=="undefined"){B=[B]}}var E=B.length;while(E--){var x=null,F=null,r=null,H="",u=null;if(typeof B[E]["label"]=="undefined"&&typeof B[E]["class"]=="undefined"&&typeof B[E]["callback"]=="undefined"){var I=0,v=null;for(var D in B[E]){v=D;if(++I>1){break}}if(I==1&&typeof B[E][D]=="function"){B[E]["label"]=v;B[E]["callback"]=B[E][D]}}if(typeof B[E]["callback"]=="function"){u=B[E]["callback"]}if(B[E]["class"]){r=B[E]["class"]}else{if(E==B.length-1&&B.length<=2){r="btn-primary"}}if(B[E]["link"]!==true){r="btn "+r}if(B[E]["label"]){x=B[E]["label"]}else{x="Option "+(E+1)}if(B[E]["icon"]){H="<i class='"+B[E]["icon"]+"'></i> "}if(B[E]["href"]){F=B[E]["href"]}else{F=e}G="<a data-handler='"+E+"' class='"+r+"' href='"+F+"'>"+H+""+x+"</a>"+G;J[E]=u}var A=["<div class='bootbox modal' tabindex='-1' style='overflow:hidden;'>"];if(t.header){var o="";if(typeof t.headerCloseButton=="undefined"||t.headerCloseButton){o="<a href='"+e+"' class='close'>&times;</a>"}A.push("<div class='modal-header'>"+o+"<h3>"+t.header+"</h3></div>")}A.push("<div class='modal-body'></div>");if(G){A.push("<div class='modal-footer'>"+G+"</div>")}A.push("</div>");var z=j(A.join("\n"));var w=(typeof t.animate==="undefined")?b:t.animate;if(w){z.addClass("fade")}var s=(typeof t.classes==="undefined")?g:t.classes;if(s){z.addClass(s)}z.find(".modal-body").html(C);function y(K){var L=null;if(typeof t.onEscape==="function"){L=t.onEscape()}if(L!==false){z.modal("hide")}}z.on("keyup.dismiss.modal",function(K){if(K.which===27&&t.onEscape){y("escape")}});z.on("click","a.close",function(K){K.preventDefault();y("close")});z.on("shown",function(){z.find("a.btn-primary:first").focus()});z.on("hidden",function(K){if(K.target===this){z.remove()}});z.on("click",".modal-footer a",function(N){var L=j(this).data("handler"),K=J[L],M=null;if(typeof L!=="undefined"&&typeof B[L]["href"]!=="undefined"){return}N.preventDefault();if(typeof K==="function"){M=K(N)}if(M!==false){z.modal("hide")}});j("body").append(z);z.modal({backdrop:(typeof t.backdrop==="undefined")?k:t.backdrop,keyboard:false,show:false});z.on("show",function(K){j(m).off("focusin.modal")});if(typeof t.show==="undefined"||t.show===true){z.modal("show")}return z};l.modal=function(){var t;var s;var r;var o={onEscape:null,keyboard:true,backdrop:k};switch(arguments.length){case 1:t=arguments[0];break;case 2:t=arguments[0];if(typeof arguments[1]=="object"){r=arguments[1]}else{s=arguments[1]}break;case 3:t=arguments[0];s=arguments[1];r=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}o.header=s;if(typeof r=="object"){r=j.extend(o,r)}else{r=o}return l.dialog(t,[],r)};l.hideAll=function(){j(".bootbox").modal("hide")};l.animate=function(o){b=o};l.backdrop=function(o){k=o};l.classes=function(o){g=o};var c={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"PotwierdÅº"},ru:{OK:"OK",CANCEL:"ÐžÑ‚Ð¼ÐµÐ½Ð°",CONFIRM:"ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ"},zh_CN:{OK:"OK",CANCEL:"å–æ¶ˆ",CONFIRM:"ç¡®è®¤"},zh_TW:{OK:"OK",CANCEL:"å–æ¶ˆ",CONFIRM:"ç¢ºèª"}};function f(r,o){if(typeof o==="undefined"){o=h}if(typeof c[o][r]==="string"){return c[o][r]}if(o!=i){return f(r,i)}return r}return l}(document,window.jQuery));window.bootbox=bootbox;!function(c){var b=function(e,d){this.cinit("clickover",e,d)};b.prototype=c.extend({},c.fn.popover.Constructor.prototype,{constructor:b,cinit:function(f,e,d){this.attr={};this.attr.me=((Math.random()*10)+"").replace(/\D/g,"");this.attr.click_event_ns="click."+this.attr.me+" touchstart."+this.attr.me;if(!d){d={}}d.trigger="manual";this.init(f,e,d);this.$element.on("click",this.options.selector,c.proxy(this.clickery,this))},clickery:function(f){if(f){f.preventDefault();f.stopPropagation()}this.options.width&&this.tip().find(".popover-inner").width(this.options.width);this.options.height&&this.tip().find(".popover-inner").height(this.options.height);this.options.tip_id&&this.tip().attr("id",this.options.tip_id);this.options.class_name&&this.tip().addClass(this.options.class_name);this[this.isShown()?"hide":"show"]();if(this.isShown()){var d=this;this.options.global_close&&c("body").on(this.attr.click_event_ns,function(g){if(!d.tip().has(g.target).length){d.clickery()}});this.options.esc_close&&c(document).bind("keyup.clickery",function(g){if(g.keyCode==27){d.clickery()}return});!this.options.allow_multiple&&c("[data-clickover-open=1]").each(function(){c(this).data("clickover")&&c(this).data("clickover").clickery()});this.$element.attr("data-clickover-open",1);this.tip().on("click",'[data-dismiss="clickover"]',c.proxy(this.clickery,this));if(this.options.auto_close&&this.options.auto_close>0){this.attr.tid=setTimeout(c.proxy(this.clickery,this),this.options.auto_close)}typeof this.options.onShown=="function"&&this.options.onShown.call(this);this.$element.trigger("shown")}else{this.$element.removeAttr("data-clickover-open");this.options.esc_close&&c(document).unbind("keyup.clickery");c("body").off(this.attr.click_event_ns);if(typeof this.attr.tid=="number"){clearTimeout(this.attr.tid);delete this.attr.tid}typeof this.options.onHidden=="function"&&this.options.onHidden.call(this);this.$element.trigger("hidden")}},isShown:function(){return this.tip().hasClass("in")},resetPosition:function(){var h,d,j,f,i,e,g;if(this.hasContent()&&this.enabled){h=this.tip();e=typeof this.options.placement=="function"?this.options.placement.call(this,h[0],this.$element[0]):this.options.placement;d=/in/.test(e);j=this.getPosition(d);f=h[0].offsetWidth;i=h[0].offsetHeight;switch(d?e.split(" ")[1]:e){case"bottom":g={top:j.top+j.height,left:j.left+j.width/2-f/2};break;case"top":g={top:j.top-i,left:j.left+j.width/2-f/2};break;case"left":g={top:j.top+j.height/2-i/2,left:j.left-f};break;case"right":g={top:j.top+j.height/2-i/2,left:j.left+j.width};break}h.css(g)}},debughide:function(){var d=new Date().toString();console.log(d+": clickover hide");this.hide()}});c.fn.clickover=function(d){return this.each(function(){var g=c(this),f=g.data("clickover"),e=typeof d=="object"&&d;if(!f){g.data("clickover",(f=new b(this,e)))}if(typeof d=="string"){f[d]()}})};c.fn.clickover.Constructor=b;c.fn.clickover.defaults=c.extend({},c.fn.popover.defaults,{trigger:"manual",auto_close:0,global_close:1,esc_close:1,onShown:null,onHidden:null,width:null,height:null,tip_id:null,class_name:"clickover",allow_multiple:0})}(window.jQuery);
/*!
	Autosize v1.17.1 - 2013-06-23
	Automatically adjust textarea height based on user input.
	(c) 2013 Jack Moore - http://www.jacklmoore.com/autosize
	license: http://www.opensource.org/licenses/mit-license.php
*/
(function(c){var f={className:"autosizejs",append:"",callback:false,resizeDelay:10},g='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',b=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],e,d=c(g).data("autosize",true)[0];d.style.lineHeight="99px";if(c(d).css("lineHeight")==="99px"){b.push("lineHeight")}d.style.lineHeight="";c.fn.autosize=function(h){h=c.extend({},f,h||{});if(d.parentNode!==document.body){c(document.body).append(d)}return this.each(function(){var m=this,l=c(m),t,v,k=0,u=c.isFunction(h.callback),n={height:m.style.height,overflow:m.style.overflow,overflowY:m.style.overflowY,wordWrap:m.style.wordWrap,resize:m.style.resize},o,i=l.width();if(l.data("autosize")){return}l.data("autosize",true);if(l.css("box-sizing")==="border-box"||l.css("-moz-box-sizing")==="border-box"||l.css("-webkit-box-sizing")==="border-box"){k=l.outerHeight()-l.height()}v=Math.max(parseInt(l.css("minHeight"),10)-k||0,l.height());l.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word",resize:(l.css("resize")==="none"||l.css("resize")==="vertical")?"none":"horizontal"});function s(){var x={},y;e=m;d.className=h.className;t=parseInt(l.css("maxHeight"),10);c.each(b,function(z,A){x[A]=l.css(A)});c(d).css(x);if("oninput" in m){var w=m.style.width;m.style.width="0px";y=m.offsetWidth;m.style.width=w}}function r(){var w,x,z,y;if(e!==m){s()}d.value=m.value+h.append;d.style.overflowY=m.style.overflowY;x=parseInt(m.style.height,10);if("getComputedStyle" in window){y=window.getComputedStyle(m);z=m.getBoundingClientRect().width;c.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(A,B){z-=parseInt(y[B],10)});d.style.width=z+"px"}else{d.style.width=Math.max(l.width(),0)+"px"}d.scrollTop=0;d.scrollTop=90000;w=d.scrollTop;if(t&&w>t){m.style.overflowY="scroll";w=t}else{m.style.overflowY="hidden";if(w<v){w=v}}w+=k;if(x!==w){m.style.height=w+"px";if(u){h.callback.call(m,m)}}}function j(){clearTimeout(o);o=setTimeout(function(){if(l.width()!==i){r()}},parseInt(h.resizeDelay,10))}if("onpropertychange" in m){if("oninput" in m){l.on("input.autosize keyup.autosize",r)}else{l.on("propertychange.autosize",function(){if(event.propertyName==="value"){r()}})}}else{l.on("input.autosize",r)}if(h.resizeDelay!==false){c(window).on("resize.autosize",j)}l.on("autosize.resize",r);l.on("autosize.resizeIncludeStyle",function(){e=null;r()});l.on("autosize.destroy",function(){e=null;clearTimeout(o);c(window).off("resize",j);l.off("autosize").off(".autosize").css(n).removeData("autosize")});r()})}}(window.jQuery||window.Zepto));
/*! jqBootstrapValidation - v1.3.7 - 2013-05-07
* http://reactiveraven.github.com/jqBootstrapValidation
* Copyright (c) 2013 David Godfrey; Licensed MIT */
(function(f){var b=[];var g={options:{prependExistingHelpBlock:false,sniffHtml:true,preventSubmit:true,submitError:false,submitSuccess:false,semanticallyStrict:false,bindEvents:[],autoAdd:{helpBlocks:true},filter:function(){return true}},methods:{init:function(j){var k=f.extend(true,{},g);k.options=f.extend(true,k.options,j);var l=this;var i=f.unique(l.map(function(){return f(this).parents("form")[0]}).toArray());f(i).bind("submit.validationSubmit",function(s){var m=f(this);var t=0;var r=m.find("input,textarea,select").not("[type=submit],[type=image]").filter(k.options.filter);var o=m.find(".control-group");var n=r.filter(function(){return f(this).triggerHandler("getValidatorCount.validation")>0});n.trigger("submit.validation");r.trigger("validationLostFocus.validation");o.each(function(u,v){var w=f(v);if(w.hasClass("warning")||w.hasClass("error")){w.removeClass("warning").addClass("error");t++}});if(t){if(k.options.preventSubmit){s.preventDefault();s.stopImmediatePropagation()}m.addClass("error");if(f.isFunction(k.options.submitError)){k.options.submitError(m,s,n.jqBootstrapValidation("collectErrors",true))}}else{m.removeClass("error");if(f.isFunction(k.options.submitSuccess)){k.options.submitSuccess(m,s)}}});return this.each(function(){var x=f(this),v=x.parents(".control-group").first(),A=v.find(".help-block").first(),D=x.parents("form").first(),m=[];if(!A.length&&k.options.autoAdd&&k.options.autoAdd.helpBlocks){A=f('<div class="help-block" />');v.find(".controls").append(A);b.push(A[0])}if(k.options.sniffHtml){var C;if(x.data("validationPatternPattern")){x.attr("pattern",x.data("validationPatternPattern"))}if(x.attr("pattern")!==undefined){C="Not in the expected format<!-- data-validation-pattern-message to override -->";if(x.data("validationPatternMessage")){C=x.data("validationPatternMessage")}x.data("validationPatternMessage",C);x.data("validationPatternRegex",x.attr("pattern"))}if(x.attr("max")!==undefined||x.attr("aria-valuemax")!==undefined){var z=(x.attr("max")!==undefined?x.attr("max"):x.attr("aria-valuemax"));C="Too high: Maximum of '"+z+"'<!-- data-validation-max-message to override -->";if(x.data("validationMaxMessage")){C=x.data("validationMaxMessage")}x.data("validationMaxMessage",C);x.data("validationMaxMax",z)}if(x.attr("min")!==undefined||x.attr("aria-valuemin")!==undefined){var s=(x.attr("min")!==undefined?x.attr("min"):x.attr("aria-valuemin"));C="Too low: Minimum of '"+s+"'<!-- data-validation-min-message to override -->";if(x.data("validationMinMessage")){C=x.data("validationMinMessage")}x.data("validationMinMessage",C);x.data("validationMinMin",s)}if(x.attr("maxlength")!==undefined){C="Too long: Maximum of '"+x.attr("maxlength")+"' characters<!-- data-validation-maxlength-message to override -->";if(x.data("validationMaxlengthMessage")){C=x.data("validationMaxlengthMessage")}x.data("validationMaxlengthMessage",C);x.data("validationMaxlengthMaxlength",x.attr("maxlength"))}if(x.attr("minlength")!==undefined){C="Too short: Minimum of '"+x.attr("minlength")+"' characters<!-- data-validation-minlength-message to override -->";if(x.data("validationMinlengthMessage")){C=x.data("validationMinlengthMessage")}x.data("validationMinlengthMessage",C);x.data("validationMinlengthMinlength",x.attr("minlength"))}if(x.attr("required")!==undefined||x.attr("aria-required")!==undefined){C=k.builtInValidators.required.message;if(x.data("validationRequiredMessage")){C=x.data("validationRequiredMessage")}x.data("validationRequiredMessage",C)}if(x.attr("type")!==undefined&&x.attr("type").toLowerCase()==="number"){C=k.validatorTypes.number.message;if(x.data("validationNumberMessage")){C=x.data("validationNumberMessage")}x.data("validationNumberMessage",C);var n=k.validatorTypes.number.step;if(x.data("validationNumberStep")){n=x.data("validationNumberStep")}x.data("validationNumberStep",n);var u=k.validatorTypes.number.decimal;if(x.data("validationNumberDecimal")){u=x.data("validationNumberDecimal")}x.data("validationNumberDecimal",u)}if(x.attr("type")!==undefined&&x.attr("type").toLowerCase()==="email"){C="Not a valid email address<!-- data-validation-email-message to override -->";if(x.data("validationEmailMessage")){C=x.data("validationEmailMessage")}x.data("validationEmailMessage",C)}if(x.attr("minchecked")!==undefined){C="Not enough options checked; Minimum of '"+x.attr("minchecked")+"' required<!-- data-validation-minchecked-message to override -->";if(x.data("validationMincheckedMessage")){C=x.data("validationMincheckedMessage")}x.data("validationMincheckedMessage",C);x.data("validationMincheckedMinchecked",x.attr("minchecked"))}if(x.attr("maxchecked")!==undefined){C="Too many options checked; Maximum of '"+x.attr("maxchecked")+"' required<!-- data-validation-maxchecked-message to override -->";if(x.data("validationMaxcheckedMessage")){C=x.data("validationMaxcheckedMessage")}x.data("validationMaxcheckedMessage",C);x.data("validationMaxcheckedMaxchecked",x.attr("maxchecked"))}}if(x.data("validation")!==undefined){m=x.data("validation").split(",")}f.each(x.data(),function(E,F){var G=E.replace(/([A-Z])/g,",$1").split(",");if(G[0]==="validation"&&G[1]){m.push(G[1])}});var t=m;var y=[];var w=function(E,F){m[E]=e(F)};var r=function(F,G){if(x.data("validation"+G+"Shortcut")!==undefined){f.each(x.data("validation"+G+"Shortcut").split(","),function(I,H){y.push(H)})}else{if(k.builtInValidators[G.toLowerCase()]){var E=k.builtInValidators[G.toLowerCase()];if(E.type.toLowerCase()==="shortcut"){f.each(E.shortcut.split(","),function(H,I){I=e(I);y.push(I);m.push(I)})}}}};do{f.each(m,w);m=f.unique(m);y=[];f.each(t,r);t=y}while(t.length>0);var o={};f.each(m,function(F,H){var I=x.data("validation"+H+"Message");var K=!!I;var G=false;if(!I){I="'"+H+"' validation failed <!-- Add attribute 'data-validation-"+H.toLowerCase()+"-message' to input to change this message -->"}f.each(k.validatorTypes,function(L,N){if(o[L]===undefined){o[L]=[]}if(!G&&x.data("validation"+H+e(N.name))!==undefined){var M=N.init(x,H);if(K){M.message=I}o[L].push(f.extend(true,{name:e(N.name),message:I},M));G=true}});if(!G&&k.builtInValidators[H.toLowerCase()]){var E=f.extend(true,{},k.builtInValidators[H.toLowerCase()]);if(K){E.message=I}var J=E.type.toLowerCase();if(J==="shortcut"){G=true}else{f.each(k.validatorTypes,function(L,M){if(o[L]===undefined){o[L]=[]}if(!G&&J===L.toLowerCase()){x.data("validation"+H+e(M.name),E[M.name.toLowerCase()]);o[J].push(f.extend(E,M.init(x,H)));G=true}})}}if(!G){f.error("Cannot find validation info for '"+H+"'")}});A.data("original-contents",(A.data("original-contents")?A.data("original-contents"):A.html()));A.data("original-role",(A.data("original-role")?A.data("original-role"):A.attr("role")));v.data("original-classes",(v.data("original-clases")?v.data("original-classes"):v.attr("class")));x.data("original-aria-invalid",(x.data("original-aria-invalid")?x.data("original-aria-invalid"):x.attr("aria-invalid")));x.bind("validation.validation",function(F,H){var G=d(x);var E=[];f.each(o,function(I,J){if(G||G.length||((H&&H.includeEmpty)||!!k.validatorTypes[I].includeEmpty)||(!!k.validatorTypes[I].blockSubmit&&H&&!!H.submitting)){f.each(J,function(L,K){if(k.validatorTypes[I].validate(x,G,K)){E.push(K.message)}})}});return E});x.bind("getValidators.validation",function(){return o});var B=0;f.each(o,function(E,F){B+=F.length});x.bind("getValidatorCount.validation",function(){return B});x.bind("submit.validation",function(){return x.triggerHandler("change.validation",{submitting:true})});x.bind((k.options.bindEvents.length>0?k.options.bindEvents:["keyup","focus","blur","click","keydown","keypress","change"]).concat(["revalidate"]).join(".validation ")+".validation",function(H,I){var G=d(x);var F=[];if(I&&!!I.submitting){v.data("jqbvIsSubmitting",true)}else{if(H.type!=="revalidate"){v.data("jqbvIsSubmitting",false)}}var E=!!v.data("jqbvIsSubmitting");v.find("input,textarea,select").each(function(L,M){var J=F.length;f.each(f(M).triggerHandler("validation.validation",I),function(N,O){F.push(O)});if(F.length>J){f(M).attr("aria-invalid","true")}else{var K=x.data("original-aria-invalid");f(M).attr("aria-invalid",(K!==undefined?K:false))}});D.find("input,select,textarea").not(x).not('[name="'+x.attr("name")+'"]').trigger("validationLostFocus.validation");F=f.unique(F.sort());if(F.length){v.removeClass("success error warning").addClass(E?"error":"warning");if(k.options.semanticallyStrict&&F.length===1){A.html(F[0]+(k.options.prependExistingHelpBlock?A.data("original-contents"):""))}else{A.html('<ul role="alert"><li>'+F.join("</li><li>")+"</li></ul>"+(k.options.prependExistingHelpBlock?A.data("original-contents"):""))}}else{v.removeClass("warning error success");if(G.length>0){v.addClass("success")}A.html(A.data("original-contents"))}if(H.type==="blur"){v.removeClass("success")}});x.bind("validationLostFocus.validation",function(){v.removeClass("success")})})},destroy:function(){return this.each(function(){var j=f(this),l=j.parents(".control-group").first(),k=l.find(".help-block").first(),i=j.parents("form").first();j.unbind(".validation");i.unbind(".validationSubmit");k.html(k.data("original-contents"));l.attr("class",l.data("original-classes"));j.attr("aria-invalid",j.data("original-aria-invalid"));k.attr("role",j.data("original-role"));if(f.inArray(k[0],b)>-1){k.remove()}})},collectErrors:function(i){var j={};this.each(function(m,n){var l=f(n);var k=l.attr("name");var o=l.triggerHandler("validation.validation",{includeEmpty:true});j[k]=f.extend(true,o,j[k])});f.each(j,function(k,l){if(l.length===0){delete j[k]}});return j},hasErrors:function(){var i=[];this.find("input,select,textarea").add(this).each(function(j,k){i=i.concat(f(k).triggerHandler("getValidators.validation")?f(k).triggerHandler("validation.validation",{submitting:true}):[])});return(i.length>0)},override:function(i){g=f.extend(true,g,i)}},validatorTypes:{callback:{name:"callback",init:function(l,j){var i={validatorName:j,callback:l.data("validation"+j+"Callback"),lastValue:l.val(),lastValid:true,lastFinished:true};var k="Not valid";if(l.data("validation"+j+"Message")){k=l.data("validation"+j+"Message")}i.message=k;return i},validate:function(l,k,j){if(j.lastValue===k&&j.lastFinished){return !j.lastValid}if(j.lastFinished===true){j.lastValue=k;j.lastValid=true;j.lastFinished=false;var m=j;var i=l;c(j.callback,window,l,k,function(n){if(m.lastValue===n.value){m.lastValid=n.valid;if(n.message){m.message=n.message}m.lastFinished=true;i.data("validation"+m.validatorName+"Message",m.message);setTimeout(function(){if(!l.is(":focus")&&l.parents("form").first().data("jqbvIsSubmitting")){i.trigger("blur.validation")}else{i.trigger("revalidate.validation")}},1)}})}return false}},ajax:{name:"ajax",init:function(j,i){return{validatorName:i,url:j.data("validation"+i+"Ajax"),lastValue:j.val(),lastValid:true,lastFinished:true}},validate:function(k,j,i){if(""+i.lastValue===""+j&&i.lastFinished===true){return i.lastValid===false}if(i.lastFinished===true){i.lastValue=j;i.lastValid=true;i.lastFinished=false;f.ajax({url:i.url,data:"value="+encodeURIComponent(j)+"&field="+k.attr("name"),dataType:"json",success:function(l){if(""+i.lastValue===""+l.value){i.lastValid=!!(l.valid);if(l.message){i.message=l.message}i.lastFinished=true;k.data("validation"+i.validatorName+"Message",i.message);setTimeout(function(){k.trigger("revalidate.validation")},1)}},failure:function(){i.lastValid=true;i.message="ajax call failed";i.lastFinished=true;k.data("validation"+i.validatorName+"Message",i.message);setTimeout(function(){k.trigger("revalidate.validation")},1)}})}return false}},regex:{name:"regex",init:function(m,k){var i={};var j=m.data("validation"+k+"Regex");i.regex=h(j);if(j===undefined){f.error("Can't find regex for '"+k+"' validator on '"+m.attr("name")+"'")}var l="Not in the expected format";if(m.data("validation"+k+"Message")){l=m.data("validation"+k+"Message")}i.message=l;i.originalName=k;return i},validate:function(k,j,i){return(!i.regex.test(j)&&!i.negative)||(i.regex.test(j)&&i.negative)}},email:{name:"email",init:function(l,j){var i={};i.regex=h("[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}");var k="Not a valid email address";if(l.data("validation"+j+"Message")){k=l.data("validation"+j+"Message")}i.message=k;i.originalName=j;return i},validate:function(k,j,i){return(!i.regex.test(j)&&!i.negative)||(i.regex.test(j)&&i.negative)}},required:{name:"required",init:function(k,i){var j="This is required";if(k.data("validation"+i+"Message")){j=k.data("validation"+i+"Message")}return{message:j,includeEmpty:true}},validate:function(k,j,i){return !!((j.length===0&&!i.negative)||(j.length>0&&i.negative))},blockSubmit:true},match:{name:"match",init:function(r,n){var k=r.data("validation"+n+"Match");var m=r.parents("form").first();var l=m.find('[name="'+k+'"]').first();l.bind("validation.validation",function(){r.trigger("revalidate.validation",{submitting:true})});var j={};j.element=l;if(l.length===0){f.error("Can't find field '"+k+"' to match '"+r.attr("name")+"' against in '"+n+"' validator")}var o="Must match";var i=null;if((i=m.find('label[for="'+k+'"]')).length){o+=" '"+i.text()+"'"}else{if((i=l.parents(".control-group").first().find("label")).length){o+=" '"+i.first().text()+"'"}}if(r.data("validation"+n+"Message")){o=r.data("validation"+n+"Message")}j.message=o;return j},validate:function(k,j,i){return(j!==i.element.val()&&!i.negative)||(j===i.element.val()&&i.negative)},blockSubmit:true,includeEmpty:true},max:{name:"max",init:function(k,j){var i={};i.max=k.data("validation"+j+"Max");i.message="Too high: Maximum of '"+i.max+"'";if(k.data("validation"+j+"Message")){i.message=k.data("validation"+j+"Message")}return i},validate:function(k,j,i){return(parseFloat(j,10)>parseFloat(i.max,10)&&!i.negative)||(parseFloat(j,10)<=parseFloat(i.max,10)&&i.negative)}},min:{name:"min",init:function(k,j){var i={};i.min=k.data("validation"+j+"Min");i.message="Too low: Minimum of '"+i.min+"'";if(k.data("validation"+j+"Message")){i.message=k.data("validation"+j+"Message")}return i},validate:function(k,j,i){return(parseFloat(j)<parseFloat(i.min)&&!i.negative)||(parseFloat(j)>=parseFloat(i.min)&&i.negative)}},maxlength:{name:"maxlength",init:function(k,j){var i={};i.maxlength=k.data("validation"+j+"Maxlength");i.message="Too long: Maximum of '"+i.maxlength+"' characters";if(k.data("validation"+j+"Message")){i.message=k.data("validation"+j+"Message")}return i},validate:function(k,j,i){return((j.length>i.maxlength)&&!i.negative)||((j.length<=i.maxlength)&&i.negative)}},minlength:{name:"minlength",init:function(k,j){var i={};i.minlength=k.data("validation"+j+"Minlength");i.message="Too short: Minimum of '"+i.minlength+"' characters";if(k.data("validation"+j+"Message")){i.message=k.data("validation"+j+"Message")}return i},validate:function(k,j,i){return((j.length<i.minlength)&&!i.negative)||((j.length>=i.minlength)&&i.negative)}},maxchecked:{name:"maxchecked",init:function(m,j){var i={};var l=m.parents("form").first().find('[name="'+m.attr("name")+'"]');l.bind("change.validation click.validation",function(){m.trigger("revalidate.validation",{includeEmpty:true})});i.elements=l;i.maxchecked=m.data("validation"+j+"Maxchecked");var k="Too many: Max '"+i.maxchecked+"' checked";if(m.data("validation"+j+"Message")){k=m.data("validation"+j+"Message")}i.message=k;return i},validate:function(k,j,i){return(i.elements.filter(":checked").length>i.maxchecked&&!i.negative)||(i.elements.filter(":checked").length<=i.maxchecked&&i.negative)},blockSubmit:true},minchecked:{name:"minchecked",init:function(m,j){var i={};var l=m.parents("form").first().find('[name="'+m.attr("name")+'"]');l.bind("change.validation click.validation",function(){m.trigger("revalidate.validation",{includeEmpty:true})});i.elements=l;i.minchecked=m.data("validation"+j+"Minchecked");var k="Too few: Min '"+i.minchecked+"' checked";if(m.data("validation"+j+"Message")){k=m.data("validation"+j+"Message")}i.message=k;return i},validate:function(k,j,i){return(i.elements.filter(":checked").length<i.minchecked&&!i.negative)||(i.elements.filter(":checked").length>=i.minchecked&&i.negative)},blockSubmit:true,includeEmpty:true},number:{name:"number",init:function(l,k){var i={};i.step=1;if(l.attr("step")){i.step=l.attr("step")}if(l.data("validation"+k+"Step")){i.step=l.data("validation"+k+"Step")}i.decimal=".";if(l.data("validation"+k+"Decimal")){i.decimal=l.data("validation"+k+"Decimal")}i.thousands="";if(l.data("validation"+k+"Thousands")){i.thousands=l.data("validation"+k+"Thousands")}i.regex=h("([+-]?\\d+(\\"+i.decimal+"\\d+)?)?");i.message="Must be a number";var j=l.data("validation"+k+"Message");if(j){i.message=j}return i},validate:function(n,r,i){var j=r.replace(i.decimal,".").replace(i.thousands,"");var k=parseFloat(j);var o=parseFloat(i.step);while(o%1!==0){o=parseFloat(o.toPrecision(12))*10;k=parseFloat(k.toPrecision(12))*10}var m=i.regex.test(r);var l=parseFloat(k)%parseFloat(o)===0;var s=!isNaN(parseFloat(j))&&isFinite(j);var t=!(m&&l&&s);return t},message:"Must be a number"}},builtInValidators:{email:{name:"Email",type:"email"},passwordagain:{name:"Passwordagain",type:"match",match:"password",message:"Does not match the given password<!-- data-validator-paswordagain-message to override -->"},positive:{name:"Positive",type:"shortcut",shortcut:"number,positivenumber"},negative:{name:"Negative",type:"shortcut",shortcut:"number,negativenumber"},integer:{name:"Integer",type:"regex",regex:"[+-]?\\d+",message:"No decimal places allowed<!-- data-validator-integer-message to override -->"},positivenumber:{name:"Positivenumber",type:"min",min:0,message:"Must be a positive number<!-- data-validator-positivenumber-message to override -->"},negativenumber:{name:"Negativenumber",type:"max",max:0,message:"Must be a negative number<!-- data-validator-negativenumber-message to override -->"},required:{name:"Required",type:"required",message:"This is required<!-- data-validator-required-message to override -->"},checkone:{name:"Checkone",type:"minchecked",minchecked:1,message:"Check at least one option<!-- data-validation-checkone-message to override -->"},number:{name:"Number",type:"number",decimal:".",step:"1"},pattern:{name:"Pattern",type:"regex",message:"Not in expected format"}}};var e=function(i){return i.toLowerCase().replace(/(^|\s)([a-z])/g,function(j,l,k){return l+k.toUpperCase()})};var d=function(m){var l=null;var j=m.attr("type");if(j==="checkbox"){l=(m.is(":checked")?l:"");var i=m.parents("form").first()||m.parents(".control-group").first();if(i){l=i.find("input[name='"+m.attr("name")+"']:checked").map(function(n,o){return f(o).val()}).toArray().join(",")}}else{if(j==="radio"){l=(f('input[name="'+m.attr("name")+'"]:checked').length>0?m.val():"");var k=m.parents("form").first()||m.parents(".control-group").first();if(k){l=k.find("input[name='"+m.attr("name")+"']:checked").map(function(n,o){return f(o).val()}).toArray().join(",")}}else{l=m.val()}}return l};function h(i){return new RegExp("^"+i+"$")}function c(o,l){var j=Array.prototype.slice.call(arguments,2);var n=o.split(".");var m=n.pop();for(var k=0;k<n.length;k++){l=l[n[k]]}return l[m].apply(l,j)}f.fn.jqBootstrapValidation=function(i){if(g.methods[i]){return g.methods[i].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof i==="object"||!i){return g.methods.init.apply(this,arguments)}else{f.error("Method "+i+" does not exist on jQuery.jqBootstrapValidation");return null}}};f.jqBootstrapValidation=function(i){f(":input").not("[type=image],[type=submit]").jqBootstrapValidation.apply(this,arguments)}})(jQuery);function getPasteEvent(){var c=document.createElement("input"),b="onpaste";c.setAttribute(b,"");return(typeof c[b]==="function")?"paste":"input"}var pasteEventName=getPasteEvent()+".mask",ua=navigator.userAgent,iPhone=/iphone/i.test(ua),android=/android/i.test(ua),caretTimeoutId;$.mask={definitions:{"9":"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"};$.fn.extend({caret:function(d,b){var c;if(this.length===0||this.is(":hidden")){return}if(typeof d=="number"){b=(typeof b==="number")?b:d;return this.each(function(){if(this.setSelectionRange){this.setSelectionRange(d,b)}else{if(this.createTextRange){c=this.createTextRange();c.collapse(true);c.moveEnd("character",b);c.moveStart("character",d);c.select()}}})}else{if(this[0].setSelectionRange){d=this[0].selectionStart;b=this[0].selectionEnd}else{if(document.selection&&document.selection.createRange){c=document.selection.createRange();d=0-c.duplicate().moveStart("character",-100000);b=d+c.text.length}}return{begin:d,end:b}}},unmask:function(){return this.trigger("unmask")},mask:function(d,h){var e,c,g,i,f,b;if(!d&&this.length>0){e=$(this[0]);return e.data($.mask.dataName)()}h=$.extend({placeholder:$.mask.placeholder,completed:null},h);c=$.mask.definitions;g=[];i=b=d.length;f=null;$.each(d.split(""),function(j,k){if(k=="?"){b--;i=j}else{if(c[k]){g.push(new RegExp(c[k]));if(f===null){f=g.length-1}}else{g.push(null)}}});return this.trigger("unmask").each(function(){var u=$(this),n=$.map(d.split(""),function(y,x){if(y!="?"){return c[y]?h.placeholder:y}}),w=u.val();function t(x){while(++x<b&&!g[x]){}return x}function o(x){while(--x>=0&&!g[x]){}return x}function m(A,x){var z,y;if(A<0){return}for(z=A,y=t(x);z<b;z++){if(g[z]){if(y<b&&g[z].test(n[y])){n[z]=n[y];n[y]=h.placeholder}else{break}y=t(y)}}s();u.caret(Math.max(f,A))}function j(B){var z,A,x,y;for(z=B,A=h.placeholder;z<b;z++){if(g[z]){x=t(z);y=n[z];n[z]=A;if(x<b&&g[x].test(y)){A=y}else{break}}}}function r(A){var y=A.which,B,z,x;if(y===8||y===46||(iPhone&&y===127)){B=u.caret();z=B.begin;x=B.end;if(x-z===0){z=y!==46?o(z):(x=t(z-1));x=y===46?t(x):x}k(z,x);m(z,x-1);A.preventDefault()}else{if(y==27){u.val(w);u.caret(0,l());A.preventDefault()}}}function v(A){var x=A.which,C=u.caret(),z,B,y;if(A.ctrlKey||A.altKey||A.metaKey||x<32){return}else{if(x){if(C.end-C.begin!==0){k(C.begin,C.end);m(C.begin,C.end-1)}z=t(C.begin-1);if(z<b){B=String.fromCharCode(x);if(g[z].test(B)){j(z);n[z]=B;s();y=t(z);if(android){setTimeout($.proxy($.fn.caret,u,y),0)}else{u.caret(y)}if(h.completed&&y>=b){h.completed.call(u)}}}A.preventDefault()}}}function k(z,x){var y;for(y=z;y<x&&y<b;y++){if(g[y]){n[y]=h.placeholder}}}function s(){u.val(n.join(""))}function l(y){var C=u.val(),B=-1,x,A,z;for(x=0,z=0;x<b;x++){if(g[x]){n[x]=h.placeholder;while(z++<C.length){A=C.charAt(z-1);if(g[x].test(A)){n[x]=A;B=x;break}}if(z>C.length){break}}else{if(n[x]===C.charAt(z)&&x!==i){z++;B=x}}}if(y){s()}else{if(B+1<i){u.val("");k(0,b)}else{s();u.val(u.val().substring(0,B+1))}}return(i?x:f)}u.data($.mask.dataName,function(){return $.map(n,function(y,x){return g[x]&&y!=h.placeholder?y:null}).join("")});if(!u.attr("readonly")){u.one("unmask",function(){u.unbind(".mask").removeData($.mask.dataName)}).bind("focus.mask",function(){clearTimeout(caretTimeoutId);var x;w=u.val();x=l();caretTimeoutId=setTimeout(function(){s();if(x==d.length){u.caret(0,x)}else{u.caret(x)}},10)}).bind("blur.mask",function(){l();if(u.val()!=w){u.change()}}).bind("keydown.mask",r).bind("keypress.mask",v).bind(pasteEventName,function(){setTimeout(function(){var x=l(true);u.caret(x);if(h.completed&&x==u.val().length){h.completed.call(u)}},0)})}l()})}});(function(b){b.easyPieChart=function(e,m){var g,h,j,k,d,l,f,c,i=this;this.el=e;this.$el=b(e);this.$el.data("easyPieChart",this);this.init=function(){var o,n;i.options=b.extend({},b.easyPieChart.defaultOptions,m);o=parseInt(i.$el.data("percent"),10);i.percentage=0;i.canvas=b("<canvas width='"+i.options.size+"' height='"+i.options.size+"'></canvas>").get(0);i.$el.append(i.canvas);if(typeof G_vmlCanvasManager!=="undefined"&&G_vmlCanvasManager!==null){G_vmlCanvasManager.initElement(i.canvas)}i.ctx=i.canvas.getContext("2d");if(window.devicePixelRatio>1){n=window.devicePixelRatio;b(i.canvas).css({width:i.options.size,height:i.options.size});i.canvas.width*=n;i.canvas.height*=n;i.ctx.scale(n,n)}i.ctx.translate(i.options.size/2,i.options.size/2);i.ctx.rotate(i.options.rotate*Math.PI/180);i.$el.addClass("easyPieChart");i.$el.css({width:i.options.size,height:i.options.size,lineHeight:""+i.options.size+"px"});i.update(o);return i};this.update=function(n){n=parseFloat(n)||0;if(i.options.animate===false){j(n)}else{h(i.percentage,n)}return i};f=function(){var o,r,n;i.ctx.fillStyle=i.options.scaleColor;i.ctx.lineWidth=1;n=[];for(o=r=0;r<=24;o=++r){n.push(g(o))}return n};g=function(n){var o;o=n%6===0?0:i.options.size*0.017;i.ctx.save();i.ctx.rotate(n*Math.PI/12);i.ctx.fillRect(i.options.size/2-o,0,-i.options.size*0.05+o,1);i.ctx.restore()};c=function(){var n;n=i.options.size/2-i.options.lineWidth/2;if(i.options.scaleColor!==false){n-=i.options.size*0.08}i.ctx.beginPath();i.ctx.arc(0,0,n,0,Math.PI*2,true);i.ctx.closePath();i.ctx.strokeStyle=i.options.trackColor;i.ctx.lineWidth=i.options.lineWidth;i.ctx.stroke()};l=function(){if(i.options.scaleColor!==false){f()}if(i.options.trackColor!==false){c()}};j=function(n){var o;l();i.ctx.strokeStyle=b.isFunction(i.options.barColor)?i.options.barColor(n):i.options.barColor;i.ctx.lineCap=i.options.lineCap;i.ctx.lineWidth=i.options.lineWidth;o=i.options.size/2-i.options.lineWidth/2;if(i.options.scaleColor!==false){o-=i.options.size*0.08}i.ctx.save();i.ctx.rotate(-Math.PI/2);i.ctx.beginPath();i.ctx.arc(0,0,o,0,Math.PI*2*n/100,false);i.ctx.stroke();i.ctx.restore()};d=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(n){return window.setTimeout(n,1000/60)}})();h=function(s,r){var o,n;i.options.onStart.call(i);i.percentage=r;n=Date.now();o=function(){var t,u;u=Date.now()-n;if(u<i.options.animate){d(o)}i.ctx.clearRect(-i.options.size/2,-i.options.size/2,i.options.size,i.options.size);l.call(i);t=[k(u,s,r-s,i.options.animate)];i.options.onStep.call(i,t);j.call(i,t);if(u>=i.options.animate){return i.options.onStop.call(i)}};d(o)};k=function(r,o,v,s){var n,u;n=function(w){return Math.pow(w,2)};u=function(w){if(w<1){return n(w)}else{return 2-n((w/2)*-2+2)}};r/=s/2;return v/2*u(r)+o};return this.init()};b.easyPieChart.defaultOptions={barColor:"#ef1e25",trackColor:"#f2f2f2",scaleColor:"#dfe0e0",lineCap:"round",rotate:0,size:110,lineWidth:3,animate:false,onStart:b.noop,onStop:b.noop,onStep:b.noop};b.fn.easyPieChart=function(c){return b.each(this,function(e,f){var d,g;d=b(f);if(!d.data("easyPieChart")){g=b.extend({},c,d.data());return d.data("easyPieChart",new b.easyPieChart(f,g))}})};return void 0})(jQuery);(function(b,c,d){(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{if(jQuery&&!jQuery.fn.sparkline){e(jQuery)}}}(function(m){var v={},s,K,x,H,y,o,L,M,A,g,h,N,D,r,w,J,F,k,u,G,i,e,I,z,t,O,f,C,n,E,B,l,j=0;s=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:false,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:false,enableHighlight:true,highlightLighten:1.4,tooltipSkipNull:true,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:false,numberFormatter:false,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:false,disableInteraction:false},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:d,normalRangeMax:d,normalRangeColor:"#ccc",drawNormalOnTop:false,chartRangeMin:d,chartRangeMax:d,chartRangeMinX:d,chartRangeMaxX:d,tooltipFormat:new x('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:d,nullColor:d,zeroAxis:true,barWidth:4,barSpacing:1,chartRangeMax:d,chartRangeMin:d,chartRangeClip:false,colorMap:d,tooltipFormat:new x('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new x('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss","0":"Draw","1":"Win"}}},discrete:{lineHeight:"auto",thresholdColor:d,thresholdValue:0,chartRangeMax:d,chartRangeMin:d,chartRangeClip:false,tooltipFormat:new x("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:d,tooltipFormat:new x("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new x('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:false,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:true,outlierIQR:1.5,spotRadius:1.5,target:d,targetColor:"#4a2",chartRangeMax:d,chartRangeMin:d,tooltipFormat:new x("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}};O='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}';K=function(){var P,Q;P=function(){this.init.apply(this,arguments)};if(arguments.length>1){if(arguments[0]){P.prototype=m.extend(new arguments[0](),arguments[arguments.length-1]);P._super=arguments[0].prototype}else{P.prototype=arguments[arguments.length-1]}if(arguments.length>2){Q=Array.prototype.slice.call(arguments,1,-1);Q.unshift(P.prototype);m.extend.apply(m,Q)}}else{P.prototype=arguments[0]}P.prototype.cls=P;return P};m.SPFormatClass=x=K({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(Q,P){this.format=Q;this.fclass=P},render:function(X,V,Y){var W=this,U=X,T,Q,R,S,P;return this.format.replace(this.fre,function(){var Z;Q=arguments[1];R=arguments[3];T=W.precre.exec(Q);if(T){P=T[2];Q=T[1]}else{P=false}S=U[Q];if(S===d){return""}if(R&&V&&V[R]){Z=V[R];if(Z.get){return V[R].get(S)||S}else{return V[R][S]||S}}if(A(S)){if(Y.get("numberFormatter")){S=Y.get("numberFormatter")(S)}else{S=r(S,P,Y.get("numberDigitGroupCount"),Y.get("numberDigitGroupSep"),Y.get("numberDecimalMark"))}}return S})}});m.spformat=function(Q,P){return new x(Q,P)};H=function(R,Q,P){if(R<Q){return Q}if(R>P){return P}return R};y=function(P,R){var Q;if(R===2){Q=c.floor(P.length/2);return P.length%2?P[Q]:(P[Q-1]+P[Q])/2}else{if(P.length%2){Q=(P.length*R+R)/4;return Q%1?(P[c.floor(Q)]+P[c.floor(Q)-1])/2:P[Q-1]}else{Q=(P.length*R+2)/4;return Q%1?(P[c.floor(Q)]+P[c.floor(Q)-1])/2:P[Q-1]}}};o=function(Q){var P;switch(Q){case"undefined":Q=d;break;case"null":Q=null;break;case"true":Q=true;break;case"false":Q=false;break;default:P=parseFloat(Q);if(Q==P){Q=P}}return Q};L=function(R){var Q,P=[];for(Q=R.length;Q--;){P[Q]=o(R[Q])}return P};M=function(T,R){var Q,S,P=[];for(Q=0,S=T.length;Q<S;Q++){if(T[Q]!==R){P.push(T[Q])}}return P};A=function(P){return !isNaN(parseFloat(P))&&isFinite(P)};r=function(R,Q,P,U,T){var V,S;R=(Q===false?parseFloat(R).toString():R.toFixed(Q)).split("");V=(V=m.inArray(".",R))<0?R.length:V;if(V<R.length){R[V]=T}for(S=V-P;S>0;S-=P){R.splice(S,0,U)}return R.join("")};g=function(S,Q,P){var R;for(R=Q.length;R--;){if(P&&Q[R]===null){continue}if(Q[R]!==S){return false}}return true};h=function(R){var Q=0,P;for(P=R.length;P--;){Q+=typeof R[P]==="number"?R[P]:0}return Q};D=function(P){return m.isArray(P)?P:[P]};N=function(Q){var P;if(b.createStyleSheet){b.createStyleSheet().cssText=Q}else{P=b.createElement("style");P.type="text/css";b.getElementsByTagName("head")[0].appendChild(P);P[(typeof b.body.style.WebkitAppearance=="string")?"innerText":"innerHTML"]=Q}};m.fn.simpledraw=function(T,P,Q,S){var V,U;if(Q&&(V=this.data("_jqs_vcanvas"))){return V}if(m.fn.sparkline.canvas===false){return false}else{if(m.fn.sparkline.canvas===d){var R=b.createElement("canvas");if(!!(R.getContext&&R.getContext("2d"))){m.fn.sparkline.canvas=function(Y,W,Z,X){return new E(Y,W,Z,X)}}else{if(b.namespaces&&!b.namespaces.v){b.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML");m.fn.sparkline.canvas=function(Y,W,Z,X){return new B(Y,W,Z)}}else{m.fn.sparkline.canvas=false;return false}}}}if(T===d){T=m(this).innerWidth()}if(P===d){P=m(this).innerHeight()}V=m.fn.sparkline.canvas(T,P,this,S);U=m(this).data("_jqs_mhandler");if(U){U.registerCanvas(V)}return V};m.fn.cleardraw=function(){var P=this.data("_jqs_vcanvas");if(P){P.reset()}};m.RangeMapClass=w=K({init:function(S){var R,P,Q=[];for(R in S){if(S.hasOwnProperty(R)&&typeof R==="string"&&R.indexOf(":")>-1){P=R.split(":");P[0]=P[0].length===0?-Infinity:parseFloat(P[0]);P[1]=P[1].length===0?Infinity:parseFloat(P[1]);P[2]=S[R];Q.push(P)}}this.map=S;this.rangelist=Q||false},get:function(T){var S=this.rangelist,R,Q,P;if((P=this.map[T])!==d){return P}if(S){for(R=S.length;R--;){Q=S[R];if(Q[0]<=T&&Q[1]>=T){return Q[2]}}}return d}});m.range_map=function(P){return new w(P)};J=K({init:function(R,P){var Q=m(R);this.$el=Q;this.options=P;this.currentPageX=0;this.currentPageY=0;this.el=R;this.splist=[];this.tooltip=null;this.over=false;this.displayTooltips=!P.get("disableTooltips");this.highlightEnabled=!P.get("disableHighlight")},registerSparkline:function(P){this.splist.push(P);if(this.over){this.updateDisplay()}},registerCanvas:function(P){var Q=m(P.canvas);this.canvas=P;this.$canvas=Q;Q.mouseenter(m.proxy(this.mouseenter,this));Q.mouseleave(m.proxy(this.mouseleave,this));Q.click(m.proxy(this.mouseclick,this))},reset:function(P){this.splist=[];if(this.tooltip&&P){this.tooltip.remove();this.tooltip=d}},mouseclick:function(Q){var P=m.Event("sparklineClick");P.originalEvent=Q;P.sparklines=this.splist;this.$el.trigger(P)},mouseenter:function(P){m(b.body).unbind("mousemove.jqs");m(b.body).bind("mousemove.jqs",m.proxy(this.mousemove,this));this.over=true;this.currentPageX=P.pageX;this.currentPageY=P.pageY;this.currentEl=P.target;if(!this.tooltip&&this.displayTooltips){this.tooltip=new F(this.options);this.tooltip.updatePosition(P.pageX,P.pageY)}this.updateDisplay()},mouseleave:function(){m(b.body).unbind("mousemove.jqs");var S=this.splist,P=S.length,R=false,T,Q;this.over=false;this.currentEl=null;if(this.tooltip){this.tooltip.remove();this.tooltip=null}for(Q=0;Q<P;Q++){T=S[Q];if(T.clearRegionHighlight()){R=true}}if(R){this.canvas.render()}},mousemove:function(P){this.currentPageX=P.pageX;this.currentPageY=P.pageY;this.currentEl=P.target;if(this.tooltip){this.tooltip.updatePosition(P.pageX,P.pageY)}this.updateDisplay()},updateDisplay:function(){var Q=this.splist,W=Q.length,U=false,T=this.$canvas.offset(),S=this.currentPageX-T.left,R=this.currentPageY-T.top,X,P,V,Z,Y;if(!this.over){return}for(V=0;V<W;V++){P=Q[V];Z=P.setRegionHighlight(this.currentEl,S,R);if(Z){U=true}}if(U){Y=m.Event("sparklineRegionChange");Y.sparklines=this.splist;this.$el.trigger(Y);if(this.tooltip){X="";for(V=0;V<W;V++){P=Q[V];X+=P.getCurrentRegionTooltip()}this.tooltip.setContent(X)}if(!this.disableHighlight){this.canvas.render()}}if(Z===null){this.mouseleave()}}});F=K({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(P){var S=P.get("tooltipClassname","jqstooltip"),Q=this.sizeStyle,R;this.container=P.get("tooltipContainer")||b.body;this.tooltipOffsetX=P.get("tooltipOffsetX",10);this.tooltipOffsetY=P.get("tooltipOffsetY",12);m("#jqssizetip").remove();m("#jqstooltip").remove();this.sizetip=m("<div/>",{id:"jqssizetip",style:Q,"class":S});this.tooltip=m("<div/>",{id:"jqstooltip","class":S}).appendTo(this.container);R=this.tooltip.offset();this.offsetLeft=R.left;this.offsetTop=R.top;this.hidden=true;m(window).unbind("resize.jqs scroll.jqs");m(window).bind("resize.jqs scroll.jqs",m.proxy(this.updateWindowDims,this));this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=m(window).scrollTop();this.scrollLeft=m(window).scrollLeft();this.scrollRight=this.scrollLeft+m(window).width();this.updatePosition()},getSize:function(P){this.sizetip.html(P).appendTo(this.container);this.width=this.sizetip.width()+1;this.height=this.sizetip.height();this.sizetip.remove()},setContent:function(P){if(!P){this.tooltip.css("visibility","hidden");this.hidden=true;return}this.getSize(P);this.tooltip.html(P).css({width:this.width,height:this.height,visibility:"visible"});if(this.hidden){this.hidden=false;this.updatePosition()}},updatePosition:function(P,Q){if(P===d){if(this.mousex===d){return}P=this.mousex-this.offsetLeft;Q=this.mousey-this.offsetTop}else{this.mousex=P=P-this.offsetLeft;this.mousey=Q=Q-this.offsetTop}if(!this.height||!this.width||this.hidden){return}Q-=this.height+this.tooltipOffsetY;P+=this.tooltipOffsetX;if(Q<this.scrollTop){Q=this.scrollTop}if(P<this.scrollLeft){P=this.scrollLeft}else{if(P+this.width>this.scrollRight){P=this.scrollRight-this.width}}this.tooltip.css({left:P,top:Q})},remove:function(){this.tooltip.remove();this.sizetip.remove();this.sizetip=this.tooltip=d;m(window).unbind("resize.jqs scroll.jqs")}});f=function(){N(O)};m(f);l=[];m.fn.sparkline=function(P,Q){return this.each(function(){var R=new m.fn.sparkline.options(this,Q),U=m(this),T,S;T=function(){var W,Y,V,X,ab,aa,Z;if(P==="html"||P===d){Z=this.getAttribute(R.get("tagValuesAttribute"));if(Z===d||Z===null){Z=U.html()}W=Z.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")}else{W=P}Y=R.get("width")==="auto"?W.length*R.get("defaultPixelsPerValue"):R.get("width");if(R.get("height")==="auto"){if(!R.get("composite")||!m.data(this,"_jqs_vcanvas")){X=b.createElement("span");X.innerHTML="a";U.html(X);V=m(X).innerHeight()||m(X).height();m(X).remove();X=null}}else{V=R.get("height")}if(!R.get("disableInteraction")){ab=m.data(this,"_jqs_mhandler");if(!ab){ab=new J(this,R);m.data(this,"_jqs_mhandler",ab)}else{if(!R.get("composite")){ab.reset()}}}else{ab=false}if(R.get("composite")&&!m.data(this,"_jqs_vcanvas")){if(!m.data(this,"_jqs_errnotify")){alert("Attempted to attach a composite sparkline to an element with no existing sparkline");m.data(this,"_jqs_errnotify",true)}return}aa=new m.fn.sparkline[R.get("type")](this,W,R,Y,V);aa.render();if(ab){ab.registerSparkline(aa)}};if((m(this).html()&&!R.get("disableHiddenCheck")&&m(this).is(":hidden"))||!m(this).parents("body").length){if(!R.get("composite")&&m.data(this,"_jqs_pending")){for(S=l.length;S;S--){if(l[S-1][0]==this){l.splice(S-1,1)}}}l.push([this,T]);m.data(this,"_jqs_pending",true)}else{T.call(this)}})};m.fn.sparkline.defaults=s();m.sparkline_display_visible=function(){var S,Q,R;var P=[];for(Q=0,R=l.length;Q<R;Q++){S=l[Q][0];if(m(S).is(":visible")&&!m(S).parents().is(":hidden")){l[Q][1].call(S);m.data(l[Q][0],"_jqs_pending",false);P.push(Q)}else{if(!m(S).closest("html").length&&!m.data(S,"_jqs_pending")){m.data(l[Q][0],"_jqs_pending",false);P.push(Q)}}}for(Q=P.length;Q;Q--){l.splice(P[Q-1],1)}};m.fn.sparkline.options=K({init:function(P,U){var T,S,R,Q;this.userOptions=U=U||{};this.tag=P;this.tagValCache={};S=m.fn.sparkline.defaults;R=S.common;this.tagOptionsPrefix=U.enableTagOptions&&(U.tagOptionsPrefix||R.tagOptionsPrefix);Q=this.getTagSetting("type");if(Q===v){T=S[U.type||R.type]}else{T=S[Q]}this.mergedOptions=m.extend({},R,T,U)},getTagSetting:function(R){var T=this.tagOptionsPrefix,U,Q,S,P;if(T===false||T===d){return v}if(this.tagValCache.hasOwnProperty(R)){U=this.tagValCache.key}else{U=this.tag.getAttribute(T+R);if(U===d||U===null){U=v}else{if(U.substr(0,1)==="["){U=U.substr(1,U.length-2).split(",");for(Q=U.length;Q--;){U[Q]=o(U[Q].replace(/(^\s*)|(\s*$)/g,""))}}else{if(U.substr(0,1)==="{"){S=U.substr(1,U.length-2).split(",");U={};for(Q=S.length;Q--;){P=S[Q].split(":",2);U[P[0].replace(/(^\s*)|(\s*$)/g,"")]=o(P[1].replace(/(^\s*)|(\s*$)/g,""))}}else{U=o(U)}}}this.tagValCache.key=U}return U},get:function(S,R){var Q=this.getTagSetting(S),P;if(Q!==v){return Q}return(P=this.mergedOptions[S])===d?R:P}});m.fn.sparkline._base=K({disabled:false,init:function(T,Q,R,S,P){this.el=T;this.$el=m(T);this.values=Q;this.options=R;this.width=S;this.height=P;this.currentRegion=d},initTarget:function(){var P=!this.options.get("disableInteraction");if(!(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),P))){this.disabled=true}else{this.canvasWidth=this.target.pixelWidth;this.canvasHeight=this.target.pixelHeight}},render:function(){if(this.disabled){this.el.innerHTML="";return false}return true},getRegion:function(P,Q){},setRegionHighlight:function(R,P,U){var S=this.currentRegion,Q=!this.options.get("disableHighlight"),T;if(P>this.canvasWidth||U>this.canvasHeight||P<0||U<0){return null}T=this.getRegion(R,P,U);if(S!==T){if(S!==d&&Q){this.removeHighlight()}this.currentRegion=T;if(T!==d&&Q){this.renderHighlight()}return true}return false},clearRegionHighlight:function(){if(this.currentRegion!==d){this.removeHighlight();this.currentRegion=d;return true}return false},renderHighlight:function(){this.changeHighlight(true)},removeHighlight:function(){this.changeHighlight(false)},changeHighlight:function(P){},getCurrentRegionTooltip:function(){var af=this.options,U="",V=[],W,ab,P,Y,ae,T,X,S,Z,R,ad,ac,aa,Q;if(this.currentRegion===d){return""}W=this.getCurrentRegionFields();ad=af.get("tooltipFormatter");if(ad){return ad(this,af,W)}if(af.get("tooltipChartTitle")){U+='<div class="jqs jqstitle">'+af.get("tooltipChartTitle")+"</div>\n"}ab=this.options.get("tooltipFormat");if(!ab){return""}if(!m.isArray(ab)){ab=[ab]}if(!m.isArray(W)){W=[W]}X=this.options.get("tooltipFormatFieldlist");S=this.options.get("tooltipFormatFieldlistKey");if(X&&S){Z=[];for(T=W.length;T--;){R=W[T][S];if((Q=m.inArray(R,X))!=-1){Z[Q]=W[T]}}W=Z}P=ab.length;aa=W.length;for(T=0;T<P;T++){ac=ab[T];if(typeof ac==="string"){ac=new x(ac)}Y=ac.fclass||"jqsfield";for(Q=0;Q<aa;Q++){if(!W[Q].isNull||!af.get("tooltipSkipNull")){m.extend(W[Q],{prefix:af.get("tooltipPrefix"),suffix:af.get("tooltipSuffix")});ae=ac.render(W[Q],af.get("tooltipValueLookups"),af);V.push('<div class="'+Y+'">'+ae+"</div>")}}}if(V.length){return U+V.join("\n")}return""},getCurrentRegionFields:function(){},calcHighlightColor:function(P,Q){var W=Q.get("highlightColor"),S=Q.get("highlightLighten"),V,U,T,R;if(W){return W}if(S){V=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(P)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(P);if(V){T=[];U=P.length===4?16:1;for(R=0;R<3;R++){T[R]=H(c.round(parseInt(V[R+1],16)*U*S),0,255)}return"rgb("+T.join(",")+")"}}return P}});k={changeHighlight:function(R){var T=this.currentRegion,S=this.target,P=this.regionShapes[T],Q;if(P){Q=this.renderRegion(T,R);if(m.isArray(Q)||m.isArray(P)){S.replaceWithShapes(P,Q);this.regionShapes[T]=m.map(Q,function(U){return U.id})}else{S.replaceWithShape(P,Q);this.regionShapes[T]=Q.id}}},render:function(){var Q=this.values,U=this.target,V=this.regionShapes,P,T,S,R;if(!this.cls._super.render.call(this)){return}for(S=Q.length;S--;){P=this.renderRegion(S);if(P){if(m.isArray(P)){T=[];for(R=P.length;R--;){P[R].append();T.push(P[R].id)}V[S]=T}else{P.append();V[S]=P.id}}else{V[S]=null}}U.render()}};m.fn.sparkline.line=u=K(m.fn.sparkline._base,{type:"line",init:function(T,Q,R,S,P){u._super.init.call(this,T,Q,R,S,P);this.vertices=[];this.regionMap=[];this.xvalues=[];this.yvalues=[];this.yminmax=[];this.hightlightSpotId=null;this.lastShapeId=null;this.initTarget()},getRegion:function(R,P,T){var Q,S=this.regionMap;for(Q=S.length;Q--;){if(S[Q]!==null&&P>=S[Q][0]&&P<=S[Q][1]){return S[Q][2]}}return d},getCurrentRegionFields:function(){var P=this.currentRegion;return{isNull:this.yvalues[P]===null,x:this.xvalues[P],y:this.yvalues[P],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:P}},renderHighlight:function(){var P=this.currentRegion,W=this.target,T=this.vertices[P],X=this.options,S=X.get("spotRadius"),R=X.get("highlightSpotColor"),U=X.get("highlightLineColor"),Q,V;if(!T){return}if(S&&R){Q=W.drawCircle(T[0],T[1],S,d,R);this.highlightSpotId=Q.id;W.insertAfterShape(this.lastShapeId,Q)}if(U){V=W.drawLine(T[0],this.canvasTop,T[0],this.canvasTop+this.canvasHeight,U);this.highlightLineId=V.id;W.insertAfterShape(this.lastShapeId,V)}},removeHighlight:function(){var P=this.target;if(this.highlightSpotId){P.removeShapeId(this.highlightSpotId);this.highlightSpotId=null}if(this.highlightLineId){P.removeShapeId(this.highlightLineId);this.highlightLineId=null}},scanValues:function(){var X=this.values,R=X.length,P=this.xvalues,V=this.yvalues,Y=this.yminmax,T,S,W,U,Q;for(T=0;T<R;T++){S=X[T];W=typeof(X[T])==="string";U=typeof(X[T])==="object"&&X[T] instanceof Array;Q=W&&X[T].split(":");if(W&&Q.length===2){P.push(Number(Q[0]));V.push(Number(Q[1]));Y.push(Number(Q[1]))}else{if(U){P.push(S[0]);V.push(S[1]);Y.push(S[1])}else{P.push(T);if(X[T]===null||X[T]==="null"){V.push(null)}else{V.push(Number(S));Y.push(Number(S))}}}}if(this.options.get("xvalues")){P=this.options.get("xvalues")}this.maxy=this.maxyorg=c.max.apply(c,Y);this.miny=this.minyorg=c.min.apply(c,Y);this.maxx=c.max.apply(c,P);this.minx=c.min.apply(c,P);this.xvalues=P;this.yvalues=V;this.yminmax=Y},processRangeOptions:function(){var Q=this.options,P=Q.get("normalRangeMin"),R=Q.get("normalRangeMax");if(P!==d){if(P<this.miny){this.miny=P}if(R>this.maxy){this.maxy=R}}if(Q.get("chartRangeMin")!==d&&(Q.get("chartRangeClip")||Q.get("chartRangeMin")<this.miny)){this.miny=Q.get("chartRangeMin")}if(Q.get("chartRangeMax")!==d&&(Q.get("chartRangeClip")||Q.get("chartRangeMax")>this.maxy)){this.maxy=Q.get("chartRangeMax")}if(Q.get("chartRangeMinX")!==d&&(Q.get("chartRangeClipX")||Q.get("chartRangeMinX")<this.minx)){this.minx=Q.get("chartRangeMinX")}if(Q.get("chartRangeMaxX")!==d&&(Q.get("chartRangeClipX")||Q.get("chartRangeMaxX")>this.maxx)){this.maxx=Q.get("chartRangeMaxX")}},drawNormalRange:function(R,V,U,S,W){var P=this.options.get("normalRangeMin"),T=this.options.get("normalRangeMax"),Q=V+c.round(U-(U*((T-this.miny)/W))),X=c.round((U*(T-P))/W);this.target.drawRect(R,Q,S,X,d,this.options.get("normalRangeColor")).append()},render:function(){var V=this.options,au=this.target,aq=this.canvasWidth,S=this.canvasHeight,Y=this.vertices,av=V.get("spotRadius"),af=this.regionMap,R,Q,ak,ao,am,ap,ag,aj,ad,ac,ai,T,ar,ab,ah,at,U,W,ae,P,Z,al,aa,X,an;if(!u._super.render.call(this)){return}this.scanValues();this.processRangeOptions();aa=this.xvalues;X=this.yvalues;if(!this.yminmax.length||this.yvalues.length<2){return}ao=am=0;R=this.maxx-this.minx===0?1:this.maxx-this.minx;Q=this.maxy-this.miny===0?1:this.maxy-this.miny;ak=this.yvalues.length-1;if(av&&(aq<(av*4)||S<(av*4))){av=0}if(av){Z=V.get("highlightSpotColor")&&!V.get("disableInteraction");if(Z||V.get("minSpotColor")||(V.get("spotColor")&&X[ak]===this.miny)){S-=c.ceil(av)}if(Z||V.get("maxSpotColor")||(V.get("spotColor")&&X[ak]===this.maxy)){S-=c.ceil(av);ao+=c.ceil(av)}if(Z||((V.get("minSpotColor")||V.get("maxSpotColor"))&&(X[0]===this.miny||X[0]===this.maxy))){am+=c.ceil(av);aq-=c.ceil(av)}if(Z||V.get("spotColor")||(V.get("minSpotColor")||V.get("maxSpotColor")&&(X[ak]===this.miny||X[ak]===this.maxy))){aq-=c.ceil(av)}}S--;if(V.get("normalRangeMin")!==d&&!V.get("drawNormalOnTop")){this.drawNormalRange(am,ao,S,aq,Q)}ag=[];aj=[ag];ab=ah=null;at=X.length;for(an=0;an<at;an++){ad=aa[an];ai=aa[an+1];ac=X[an];T=am+c.round((ad-this.minx)*(aq/R));ar=an<at-1?am+c.round((ai-this.minx)*(aq/R)):aq;ah=T+((ar-T)/2);af[an]=[ab||0,ah,an];ab=ah;if(ac===null){if(an){if(X[an-1]!==null){ag=[];aj.push(ag)}Y.push(null)}}else{if(ac<this.miny){ac=this.miny}if(ac>this.maxy){ac=this.maxy}if(!ag.length){ag.push([T,ao+S])}ap=[T,ao+c.round(S-(S*((ac-this.miny)/Q)))];ag.push(ap);Y.push(ap)}}U=[];W=[];ae=aj.length;for(an=0;an<ae;an++){ag=aj[an];if(ag.length){if(V.get("fillColor")){ag.push([ag[ag.length-1][0],(ao+S)]);W.push(ag.slice(0));ag.pop()}if(ag.length>2){ag[0]=[ag[0][0],ag[1][1]]}U.push(ag)}}ae=W.length;for(an=0;an<ae;an++){au.drawShape(W[an],V.get("fillColor"),V.get("fillColor")).append()}if(V.get("normalRangeMin")!==d&&V.get("drawNormalOnTop")){this.drawNormalRange(am,ao,S,aq,Q)}ae=U.length;for(an=0;an<ae;an++){au.drawShape(U[an],V.get("lineColor"),d,V.get("lineWidth")).append()}if(av&&V.get("valueSpots")){P=V.get("valueSpots");if(P.get===d){P=new w(P)}for(an=0;an<at;an++){al=P.get(X[an]);if(al){au.drawCircle(am+c.round((aa[an]-this.minx)*(aq/R)),ao+c.round(S-(S*((X[an]-this.miny)/Q))),av,d,al).append()}}}if(av&&V.get("spotColor")&&X[ak]!==null){au.drawCircle(am+c.round((aa[aa.length-1]-this.minx)*(aq/R)),ao+c.round(S-(S*((X[ak]-this.miny)/Q))),av,d,V.get("spotColor")).append()}if(this.maxy!==this.minyorg){if(av&&V.get("minSpotColor")){ad=aa[m.inArray(this.minyorg,X)];au.drawCircle(am+c.round((ad-this.minx)*(aq/R)),ao+c.round(S-(S*((this.minyorg-this.miny)/Q))),av,d,V.get("minSpotColor")).append()}if(av&&V.get("maxSpotColor")){ad=aa[m.inArray(this.maxyorg,X)];au.drawCircle(am+c.round((ad-this.minx)*(aq/R)),ao+c.round(S-(S*((this.maxyorg-this.miny)/Q))),av,d,V.get("maxSpotColor")).append()}}this.lastShapeId=au.getLastShapeId();this.canvasTop=ao;au.render()}});m.fn.sparkline.bar=G=K(m.fn.sparkline._base,k,{type:"bar",init:function(ax,az,ad,P,Q){var af=parseInt(ad.get("barWidth"),10),ah=parseInt(ad.get("barSpacing"),10),V=ad.get("chartRangeMin"),am=ad.get("chartRangeMax"),S=ad.get("chartRangeClip"),aq=Infinity,Z=-Infinity,aA,W,ao,ae,an,aw,ap,U,aj,ab,ay,ac,av,aa,ar,T,au,ak,X,ag,R,at,al;G._super.init.call(this,ax,az,ad,P,Q);for(aw=0,ap=az.length;aw<ap;aw++){ag=az[aw];aA=typeof(ag)==="string"&&ag.indexOf(":")>-1;if(aA||m.isArray(ag)){ar=true;if(aA){ag=az[aw]=L(ag.split(":"))}ag=M(ag,null);W=c.min.apply(c,ag);ao=c.max.apply(c,ag);if(W<aq){aq=W}if(ao>Z){Z=ao}}}this.stacked=ar;this.regionShapes={};this.barWidth=af;this.barSpacing=ah;this.totalBarWidth=af+ah;this.width=P=(az.length*af)+((az.length-1)*ah);this.initTarget();if(S){av=V===d?-Infinity:V;aa=am===d?Infinity:am}an=[];ae=ar?[]:an;var ai=[];var Y=[];for(aw=0,ap=az.length;aw<ap;aw++){if(ar){T=az[aw];az[aw]=X=[];ai[aw]=0;ae[aw]=Y[aw]=0;for(au=0,ak=T.length;au<ak;au++){ag=X[au]=S?H(T[au],av,aa):T[au];if(ag!==null){if(ag>0){ai[aw]+=ag}if(aq<0&&Z>0){if(ag<0){Y[aw]+=c.abs(ag)}else{ae[aw]+=ag}}else{ae[aw]+=c.abs(ag-(ag<0?Z:aq))}an.push(ag)}}}else{ag=S?H(az[aw],av,aa):az[aw];ag=az[aw]=o(ag);if(ag!==null){an.push(ag)}}}this.max=ac=c.max.apply(c,an);this.min=ay=c.min.apply(c,an);this.stackMax=Z=ar?c.max.apply(c,ai):ac;this.stackMin=aq=ar?c.min.apply(c,an):ay;if(ad.get("chartRangeMin")!==d&&(ad.get("chartRangeClip")||ad.get("chartRangeMin")<ay)){ay=ad.get("chartRangeMin")}if(ad.get("chartRangeMax")!==d&&(ad.get("chartRangeClip")||ad.get("chartRangeMax")>ac)){ac=ad.get("chartRangeMax")}this.zeroAxis=aj=ad.get("zeroAxis",true);if(ay<=0&&ac>=0&&aj){ab=0}else{if(aj==false){ab=ay}else{if(ay>0){ab=ay}else{ab=ac}}}this.xaxisOffset=ab;U=ar?(c.max.apply(c,ae)+c.max.apply(c,Y)):ac-ay;this.canvasHeightEf=(aj&&ay<0)?this.canvasHeight-2:this.canvasHeight-1;if(ay<ab){at=(ar&&ac>=0)?Z:ac;R=(at-ab)/U*this.canvasHeight;if(R!==c.ceil(R)){this.canvasHeightEf-=2;R=c.ceil(R)}}else{R=this.canvasHeight}this.yoffset=R;if(m.isArray(ad.get("colorMap"))){this.colorMapByIndex=ad.get("colorMap");this.colorMapByValue=null}else{this.colorMapByIndex=null;this.colorMapByValue=ad.get("colorMap");if(this.colorMapByValue&&this.colorMapByValue.get===d){this.colorMapByValue=new w(this.colorMapByValue)}}this.range=U},getRegion:function(R,Q,S){var P=c.floor(Q/this.totalBarWidth);return(P<0||P>=this.values.length)?d:P},getCurrentRegionFields:function(){var T=this.currentRegion,Q=D(this.values[T]),P=[],S,R;for(R=Q.length;R--;){S=Q[R];P.push({isNull:S===null,value:S,color:this.calcColor(R,S,T),offset:T})}return P},calcColor:function(T,U,V){var W=this.colorMapByIndex,S=this.colorMapByValue,R=this.options,P,Q;if(this.stacked){P=R.get("stackedBarColor")}else{P=(U<0)?R.get("negBarColor"):R.get("barColor")}if(U===0&&R.get("zeroColor")!==d){P=R.get("zeroColor")}if(S&&(Q=S.get(U))){P=Q}else{if(W&&W.length>V){P=W[V]}}return m.isArray(P)?P[T%P.length]:P},renderRegion:function(Z,T){var ab=this.values[Z],R=this.options,P=this.xaxisOffset,X=[],ac=this.range,ai=this.stacked,aj=this.target,W=Z*this.totalBarWidth,Q=this.canvasHeightEf,Y=this.yoffset,V,ad,af,ae,U,ag,S,ak,ah,aa;ab=m.isArray(ab)?ab:[ab];S=ab.length;ak=ab[0];ae=g(null,ab);aa=g(P,ab,true);if(ae){if(R.get("nullColor")){af=T?R.get("nullColor"):this.calcHighlightColor(R.get("nullColor"),R);V=(Y>0)?Y-1:Y;return aj.drawRect(W,V,this.barWidth-1,0,af,af)}else{return d}}U=Y;for(ag=0;ag<S;ag++){ak=ab[ag];if(ai&&ak===P){if(!aa||ah){continue}ah=true}if(ac>0){ad=c.floor(Q*((c.abs(ak-P)/ac)))+1}else{ad=1}if(ak<P||(ak===P&&Y===0)){V=U;U+=ad}else{V=Y-ad;Y-=ad}af=this.calcColor(ag,ak,Z);if(T){af=this.calcHighlightColor(af,R)}X.push(aj.drawRect(W,V,this.barWidth-1,ad-1,af,af))}if(X.length===1){return X[0]}return X}});m.fn.sparkline.tristate=i=K(m.fn.sparkline._base,k,{type:"tristate",init:function(U,Q,R,T,P){var S=parseInt(R.get("barWidth"),10),V=parseInt(R.get("barSpacing"),10);i._super.init.call(this,U,Q,R,T,P);this.regionShapes={};this.barWidth=S;this.barSpacing=V;this.totalBarWidth=S+V;this.values=m.map(Q,Number);this.width=T=(Q.length*S)+((Q.length-1)*V);if(m.isArray(R.get("colorMap"))){this.colorMapByIndex=R.get("colorMap");this.colorMapByValue=null}else{this.colorMapByIndex=null;this.colorMapByValue=R.get("colorMap");if(this.colorMapByValue&&this.colorMapByValue.get===d){this.colorMapByValue=new w(this.colorMapByValue)}}this.initTarget()},getRegion:function(Q,P,R){return c.floor(P/this.totalBarWidth)},getCurrentRegionFields:function(){var P=this.currentRegion;return{isNull:this.values[P]===d,value:this.values[P],color:this.calcColor(this.values[P],P),offset:P}},calcColor:function(U,V){var Q=this.values,T=this.options,W=this.colorMapByIndex,S=this.colorMapByValue,P,R;if(S&&(R=S.get(U))){P=R}else{if(W&&W.length>V){P=W[V]}else{if(Q[V]<0){P=T.get("negBarColor")}else{if(Q[V]>0){P=T.get("posBarColor")}else{P=T.get("zeroBarColor")}}}}return P},renderRegion:function(S,P){var X=this.values,Z=this.options,T=this.target,R,Y,U,W,V,Q;R=T.pixelHeight;U=c.round(R/2);W=S*this.totalBarWidth;if(X[S]<0){V=U;Y=U-1}else{if(X[S]>0){V=0;Y=U-1}else{V=U-1;Y=2}}Q=this.calcColor(X[S],S);if(Q===null){return}if(P){Q=this.calcHighlightColor(Q,Z)}return T.drawRect(W,V,this.barWidth-1,Y-1,Q,Q)}});m.fn.sparkline.discrete=e=K(m.fn.sparkline._base,k,{type:"discrete",init:function(T,Q,R,S,P){e._super.init.call(this,T,Q,R,S,P);this.regionShapes={};this.values=Q=m.map(Q,Number);this.min=c.min.apply(c,Q);this.max=c.max.apply(c,Q);this.range=this.max-this.min;this.width=S=R.get("width")==="auto"?Q.length*2:this.width;this.interval=c.floor(S/Q.length);this.itemWidth=S/Q.length;if(R.get("chartRangeMin")!==d&&(R.get("chartRangeClip")||R.get("chartRangeMin")<this.min)){this.min=R.get("chartRangeMin")}if(R.get("chartRangeMax")!==d&&(R.get("chartRangeClip")||R.get("chartRangeMax")>this.max)){this.max=R.get("chartRangeMax")}this.initTarget();if(this.target){this.lineHeight=R.get("lineHeight")==="auto"?c.round(this.canvasHeight*0.3):R.get("lineHeight")}},getRegion:function(Q,P,R){return c.floor(P/this.itemWidth)},getCurrentRegionFields:function(){var P=this.currentRegion;return{isNull:this.values[P]===d,value:this.values[P],offset:P}},renderRegion:function(X,S){var ad=this.values,ae=this.options,U=this.min,aa=this.max,W=this.range,Q=this.interval,Z=this.target,V=this.canvasHeight,ac=this.lineHeight,Y=V-ac,P,R,T,ab;R=H(ad[X],U,aa);ab=X*Q;P=c.round(Y-Y*((R-U)/W));T=(ae.get("thresholdColor")&&R<ae.get("thresholdValue"))?ae.get("thresholdColor"):ae.get("lineColor");if(S){T=this.calcHighlightColor(T,ae)}return Z.drawLine(ab,P,ab,P+ac,T)}});m.fn.sparkline.bullet=I=K(m.fn.sparkline._base,{type:"bullet",init:function(V,R,S,U,Q){var T,P,W;I._super.init.call(this,V,R,S,U,Q);this.values=R=L(R);W=R.slice();W[0]=W[0]===null?W[2]:W[0];W[1]=R[1]===null?W[2]:W[1];T=c.min.apply(c,R);P=c.max.apply(c,R);if(S.get("base")===d){T=T<0?T:0}else{T=S.get("base")}this.min=T;this.max=P;this.range=P-T;this.shapes={};this.valueShapes={};this.regiondata={};this.width=U=S.get("width")==="auto"?"4.0em":U;this.target=this.$el.simpledraw(U,Q,S.get("composite"));if(!R.length){this.disabled=true}this.initTarget()},getRegion:function(Q,P,S){var R=this.target.getShapeAt(Q,P,S);return(R!==d&&this.shapes[R]!==d)?this.shapes[R]:d},getCurrentRegionFields:function(){var P=this.currentRegion;return{fieldkey:P.substr(0,1),value:this.values[P.substr(1)],region:P}},changeHighlight:function(Q){var S=this.currentRegion,R=this.valueShapes[S],P;delete this.shapes[R];switch(S.substr(0,1)){case"r":P=this.renderRange(S.substr(1),Q);break;case"p":P=this.renderPerformance(Q);break;case"t":P=this.renderTarget(Q);break}this.valueShapes[S]=P.id;this.shapes[P.id]=S;this.target.replaceWithShape(R,P)},renderRange:function(S,Q){var T=this.values[S],R=c.round(this.canvasWidth*((T-this.min)/this.range)),P=this.options.get("rangeColors")[S-2];if(Q){P=this.calcHighlightColor(P,this.options)}return this.target.drawRect(0,0,R-1,this.canvasHeight-1,P,P)},renderPerformance:function(Q){var S=this.values[1],R=c.round(this.canvasWidth*((S-this.min)/this.range)),P=this.options.get("performanceColor");if(Q){P=this.calcHighlightColor(P,this.options)}return this.target.drawRect(0,c.round(this.canvasHeight*0.3),R-1,c.round(this.canvasHeight*0.4)-1,P,P)},renderTarget:function(R){var U=this.values[0],P=c.round(this.canvasWidth*((U-this.min)/this.range)-(this.options.get("targetWidth")/2)),T=c.round(this.canvasHeight*0.1),S=this.canvasHeight-(T*2),Q=this.options.get("targetColor");if(R){Q=this.calcHighlightColor(Q,this.options)}return this.target.drawRect(P,T,this.options.get("targetWidth")-1,S-1,Q,Q)},render:function(){var S=this.values.length,R=this.target,Q,P;if(!I._super.render.call(this)){return}for(Q=2;Q<S;Q++){P=this.renderRange(Q).append();this.shapes[P.id]="r"+Q;this.valueShapes["r"+Q]=P.id}if(this.values[1]!==null){P=this.renderPerformance().append();this.shapes[P.id]="p1";this.valueShapes.p1=P.id}if(this.values[0]!==null){P=this.renderTarget().append();this.shapes[P.id]="t0";this.valueShapes.t0=P.id}R.render()}});m.fn.sparkline.pie=z=K(m.fn.sparkline._base,{type:"pie",init:function(U,Q,R,T,P){var V=0,S;z._super.init.call(this,U,Q,R,T,P);this.shapes={};this.valueShapes={};this.values=Q=m.map(Q,Number);if(R.get("width")==="auto"){this.width=this.height}if(Q.length>0){for(S=Q.length;S--;){V+=Q[S]}}this.total=V;this.initTarget();this.radius=c.floor(c.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(Q,P,S){var R=this.target.getShapeAt(Q,P,S);return(R!==d&&this.shapes[R]!==d)?this.shapes[R]:d},getCurrentRegionFields:function(){var P=this.currentRegion;return{isNull:this.values[P]===d,value:this.values[P],percent:this.values[P]/this.total*100,color:this.options.get("sliceColors")[P%this.options.get("sliceColors").length],offset:P}},changeHighlight:function(P){var S=this.currentRegion,Q=this.renderSlice(S,P),R=this.valueShapes[S];delete this.shapes[R];this.target.replaceWithShape(R,Q);this.valueShapes[S]=Q.id;this.shapes[Q.id]=S},renderSlice:function(Y,S){var aa=this.target,ae=this.options,Z=this.radius,P=ae.get("borderWidth"),V=ae.get("offset"),Q=2*c.PI,ad=this.values,ab=this.total,X=V?(2*c.PI)*(V/360):0,R,U,W,ac,T;ac=ad.length;for(W=0;W<ac;W++){R=X;U=X;if(ab>0){U=X+(Q*(ad[W]/ab))}if(Y===W){T=ae.get("sliceColors")[W%ae.get("sliceColors").length];if(S){T=this.calcHighlightColor(T,ae)}return aa.drawPieSlice(Z,Z,Z-P,R,U,d,T)}X=U}},render:function(){var V=this.target,S=this.values,T=this.options,P=this.radius,R=T.get("borderWidth"),Q,U;if(!z._super.render.call(this)){return}if(R){V.drawCircle(P,P,c.floor(P-(R/2)),T.get("borderColor"),d,R).append()}for(U=S.length;U--;){if(S[U]){Q=this.renderSlice(U).append();this.valueShapes[U]=Q.id;this.shapes[Q.id]=U}}V.render()}});m.fn.sparkline.box=t=K(m.fn.sparkline._base,{type:"box",init:function(T,Q,R,S,P){t._super.init.call(this,T,Q,R,S,P);this.values=m.map(Q,Number);this.width=R.get("width")==="auto"?"4.0em":S;this.initTarget();if(!this.values.length){this.disabled=1}},getRegion:function(){return 1},getCurrentRegionFields:function(){var P=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];if(this.loutlier!==d){P.push({field:"lo",value:this.loutlier})}if(this.routlier!==d){P.push({field:"ro",value:this.routlier})}if(this.lwhisker!==d){P.push({field:"lw",value:this.lwhisker})}if(this.rwhisker!==d){P.push({field:"rw",value:this.rwhisker})}return P},render:function(){var ai=this.target,S=this.values,W=S.length,U=this.options,ah=this.canvasWidth,Q=this.canvasHeight,ab=U.get("chartRangeMin")===d?c.min.apply(c,S):U.get("chartRangeMin"),ag=U.get("chartRangeMax")===d?c.max.apply(c,S):U.get("chartRangeMax"),ad=0,aa,af,T,Z,Y,X,P,V,ae,ac,R;if(!t._super.render.call(this)){return}if(U.get("raw")){if(U.get("showOutliers")&&S.length>5){af=S[0];aa=S[1];Z=S[2];Y=S[3];X=S[4];P=S[5];V=S[6]}else{aa=S[0];Z=S[1];Y=S[2];X=S[3];P=S[4]}}else{S.sort(function(ak,aj){return ak-aj});Z=y(S,1);Y=y(S,2);X=y(S,3);T=X-Z;if(U.get("showOutliers")){aa=P=d;for(ae=0;ae<W;ae++){if(aa===d&&S[ae]>Z-(T*U.get("outlierIQR"))){aa=S[ae]}if(S[ae]<X+(T*U.get("outlierIQR"))){P=S[ae]}}af=S[0];V=S[W-1]}else{aa=S[0];P=S[W-1]}}this.quartiles=[Z,Y,X];this.lwhisker=aa;this.rwhisker=P;this.loutlier=af;this.routlier=V;R=ah/(ag-ab+1);if(U.get("showOutliers")){ad=c.ceil(U.get("spotRadius"));ah-=2*c.ceil(U.get("spotRadius"));R=ah/(ag-ab+1);if(af<aa){ai.drawCircle((af-ab)*R+ad,Q/2,U.get("spotRadius"),U.get("outlierLineColor"),U.get("outlierFillColor")).append()}if(V>P){ai.drawCircle((V-ab)*R+ad,Q/2,U.get("spotRadius"),U.get("outlierLineColor"),U.get("outlierFillColor")).append()}}ai.drawRect(c.round((Z-ab)*R+ad),c.round(Q*0.1),c.round((X-Z)*R),c.round(Q*0.8),U.get("boxLineColor"),U.get("boxFillColor")).append();ai.drawLine(c.round((aa-ab)*R+ad),c.round(Q/2),c.round((Z-ab)*R+ad),c.round(Q/2),U.get("lineColor")).append();ai.drawLine(c.round((aa-ab)*R+ad),c.round(Q/4),c.round((aa-ab)*R+ad),c.round(Q-Q/4),U.get("whiskerColor")).append();ai.drawLine(c.round((P-ab)*R+ad),c.round(Q/2),c.round((X-ab)*R+ad),c.round(Q/2),U.get("lineColor")).append();ai.drawLine(c.round((P-ab)*R+ad),c.round(Q/4),c.round((P-ab)*R+ad),c.round(Q-Q/4),U.get("whiskerColor")).append();ai.drawLine(c.round((Y-ab)*R+ad),c.round(Q*0.1),c.round((Y-ab)*R+ad),c.round(Q*0.9),U.get("medianColor")).append();if(U.get("target")){ac=c.ceil(U.get("spotRadius"));ai.drawLine(c.round((U.get("target")-ab)*R+ad),c.round((Q/2)-ac),c.round((U.get("target")-ab)*R+ad),c.round((Q/2)+ac),U.get("targetColor")).append();ai.drawLine(c.round((U.get("target")-ab)*R+ad-ac),c.round(Q/2),c.round((U.get("target")-ab)*R+ad+ac),c.round(Q/2),U.get("targetColor")).append()}ai.render()}});C=K({init:function(R,S,Q,P){this.target=R;this.id=S;this.type=Q;this.args=P},append:function(){this.target.appendShape(this);return this}});n=K({_pxregex:/(\d+)(px)?\s*$/i,init:function(Q,P,R){if(!Q){return}this.width=Q;this.height=P;this.target=R;this.lastShapeId=null;if(R[0]){R=R[0]}m.data(R,"_jqs_vcanvas",this)},drawLine:function(R,T,Q,S,U,P){return this.drawShape([[R,T],[Q,S]],U,P)},drawShape:function(R,Q,S,P){return this._genShape("Shape",[R,Q,S,P])},drawCircle:function(R,U,Q,S,T,P){return this._genShape("Circle",[R,U,Q,S,T,P])},drawPieSlice:function(Q,V,P,S,R,T,U){return this._genShape("PieSlice",[Q,V,P,S,R,T,U])},drawRect:function(Q,U,R,P,S,T){return this._genShape("Rect",[Q,U,R,P,S,T])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(P,Q){m(Q).html(P)},_calculatePixelDims:function(S,P,R){var Q;Q=this._pxregex.exec(P);if(Q){this.pixelHeight=Q[1]}else{this.pixelHeight=m(R).height()}Q=this._pxregex.exec(S);if(Q){this.pixelWidth=Q[1]}else{this.pixelWidth=m(R).width()}},_genShape:function(Q,P){var R=j++;P.unshift(R);return new C(this,R,Q,P)},appendShape:function(P){alert("appendShape not implemented")},replaceWithShape:function(Q,P){alert("replaceWithShape not implemented")},insertAfterShape:function(Q,P){alert("insertAfterShape not implemented")},removeShapeId:function(P){alert("removeShapeId not implemented")},getShapeAt:function(Q,P,R){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}});E=K(n,{init:function(R,P,S,Q){E._super.init.call(this,R,P,S);this.canvas=b.createElement("canvas");if(S[0]){S=S[0]}m.data(S,"_jqs_vcanvas",this);m(this.canvas).css({display:"inline-block",width:R,height:P,verticalAlign:"top"});this._insert(this.canvas,S);this._calculatePixelDims(R,P,this.canvas);this.canvas.width=this.pixelWidth;this.canvas.height=this.pixelHeight;this.interact=Q;this.shapes={};this.shapeseq=[];this.currentTargetShapeId=d;m(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(R,S,P){var Q=this.canvas.getContext("2d");if(R!==d){Q.strokeStyle=R}Q.lineWidth=P===d?1:P;if(S!==d){Q.fillStyle=S}return Q},reset:function(){var P=this._getContext();P.clearRect(0,0,this.pixelWidth,this.pixelHeight);this.shapes={};this.shapeseq=[];this.currentTargetShapeId=d},_drawShape:function(V,U,T,W,P){var R=this._getContext(T,W,P),Q,S;R.beginPath();R.moveTo(U[0][0]+0.5,U[0][1]+0.5);for(Q=1,S=U.length;Q<S;Q++){R.lineTo(U[Q][0]+0.5,U[Q][1]+0.5)}if(T!==d){R.stroke()}if(W!==d){R.fill()}if(this.targetX!==d&&this.targetY!==d&&R.isPointInPath(this.targetX,this.targetY)){this.currentTargetShapeId=V}},_drawCircle:function(U,R,W,Q,T,V,P){var S=this._getContext(T,V,P);S.beginPath();S.arc(R,W,Q,0,2*c.PI,false);if(this.targetX!==d&&this.targetY!==d&&S.isPointInPath(this.targetX,this.targetY)){this.currentTargetShapeId=U}if(T!==d){S.stroke()}if(V!==d){S.fill()}},_drawPieSlice:function(T,X,V,S,U,R,W,Q){var P=this._getContext(W,Q);P.beginPath();P.moveTo(X,V);P.arc(X,V,S,U,R,false);P.lineTo(X,V);P.closePath();if(W!==d){P.stroke()}if(Q){P.fill()}if(this.targetX!==d&&this.targetY!==d&&P.isPointInPath(this.targetX,this.targetY)){this.currentTargetShapeId=T}},_drawRect:function(T,Q,V,R,P,S,U){return this._drawShape(T,[[Q,V],[Q+R,V],[Q+R,V+P],[Q,V+P],[Q,V]],S,U)},appendShape:function(P){this.shapes[P.id]=P;this.shapeseq.push(P.id);this.lastShapeId=P.id;return P.id},replaceWithShape:function(R,P){var S=this.shapeseq,Q;this.shapes[P.id]=P;for(Q=S.length;Q--;){if(S[Q]==R){S[Q]=P.id}}delete this.shapes[R]},replaceWithShapes:function(R,Q){var V=this.shapeseq,T={},P,S,U;for(S=R.length;S--;){T[R[S]]=true}for(S=V.length;S--;){P=V[S];if(T[P]){V.splice(S,1);delete this.shapes[P];U=S}}for(S=Q.length;S--;){V.splice(U,0,Q[S].id);this.shapes[Q[S].id]=Q[S]}},insertAfterShape:function(R,P){var S=this.shapeseq,Q;for(Q=S.length;Q--;){if(S[Q]===R){S.splice(Q+1,0,P.id);this.shapes[P.id]=P;return}}},removeShapeId:function(Q){var R=this.shapeseq,P;for(P=R.length;P--;){if(R[P]===Q){R.splice(P,1);break}}delete this.shapes[Q]},getShapeAt:function(Q,P,R){this.targetX=P;this.targetY=R;this.render();return this.currentTargetShapeId},render:function(){var V=this.shapeseq,P=this.shapes,T=V.length,S=this._getContext(),U,Q,R;S.clearRect(0,0,this.pixelWidth,this.pixelHeight);for(R=0;R<T;R++){U=V[R];Q=P[U];this["_draw"+Q.type].apply(this,Q.args)}if(!this.interact){this.shapes={};this.shapeseq=[]}}});B=K(n,{init:function(Q,P,S){var R;B._super.init.call(this,Q,P,S);if(S[0]){S=S[0]}m.data(S,"_jqs_vcanvas",this);this.canvas=b.createElement("span");m(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:Q,height:P,margin:"0px",padding:"0px",verticalAlign:"top"});this._insert(this.canvas,S);this._calculatePixelDims(Q,P,this.canvas);this.canvas.width=this.pixelWidth;this.canvas.height=this.pixelHeight;R='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>';this.canvas.insertAdjacentHTML("beforeEnd",R);this.group=m(this.canvas).children()[0];this.rendered=false;this.prerender=""},_drawShape:function(U,ab,W,P,S){var X=[],V,aa,Z,T,Y,Q,R;for(R=0,Q=ab.length;R<Q;R++){X[R]=""+(ab[R][0])+","+(ab[R][1])}V=X.splice(0,1);S=S===d?1:S;aa=W===d?' stroked="false" ':' strokeWeight="'+S+'px" strokeColor="'+W+'" ';Z=P===d?' filled="false"':' fillColor="'+P+'" filled="true" ';T=X[0]===X[X.length-1]?"x ":"";Y='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+U+'" '+aa+Z+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+V+" l "+X.join(", ")+" "+T+'e"> </v:shape>';return Y},_drawCircle:function(S,V,T,R,U,P,Q){var Y,X,W;V-=R;T-=R;Y=U===d?' stroked="false" ':' strokeWeight="'+Q+'px" strokeColor="'+U+'" ';X=P===d?' filled="false"':' fillColor="'+P+'" filled="true" ';W='<v:oval  id="jqsshape'+S+'" '+Y+X+' style="position:absolute;top:'+T+"px; left:"+V+"px; width:"+(R*2)+"px; height:"+(R*2)+'px"></v:oval>';return W},_drawPieSlice:function(W,ab,Z,V,X,S,aa,R){var Y,Q,P,U,T,ae,ad,ac;if(X===S){return""}if((S-X)===(2*c.PI)){X=0;S=(2*c.PI)}Q=ab+c.round(c.cos(X)*V);P=Z+c.round(c.sin(X)*V);U=ab+c.round(c.cos(S)*V);T=Z+c.round(c.sin(S)*V);if(Q===U&&P===T){if((S-X)<c.PI){return""}Q=U=ab+V;P=T=Z}if(Q===U&&P===T&&(S-X)<c.PI){return""}Y=[ab-V,Z-V,ab+V,Z+V,Q,P,U,T];ae=aa===d?' stroked="false" ':' strokeWeight="1px" strokeColor="'+aa+'" ';ad=R===d?' filled="false"':' fillColor="'+R+'" filled="true" ';ac='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+W+'" '+ae+ad+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+ab+","+Z+" wa "+Y.join(", ")+' x e"> </v:shape>';return ac},_drawRect:function(T,Q,V,R,P,S,U){return this._drawShape(T,[[Q,V],[Q,V+P],[Q+R,V+P],[Q+R,V],[Q,V]],S,U)},reset:function(){this.group.innerHTML=""},appendShape:function(P){var Q=this["_draw"+P.type].apply(this,P.args);if(this.rendered){this.group.insertAdjacentHTML("beforeEnd",Q)}else{this.prerender+=Q}this.lastShapeId=P.id;return P.id},replaceWithShape:function(S,P){var R=m("#jqsshape"+S),Q=this["_draw"+P.type].apply(this,P.args);R[0].outerHTML=Q},replaceWithShapes:function(Q,P){var T=m("#jqsshape"+Q[0]),S="",U=P.length,R;for(R=0;R<U;R++){S+=this["_draw"+P[R].type].apply(this,P[R].args)}T[0].outerHTML=S;for(R=1;R<Q.length;R++){m("#jqsshape"+Q[R]).remove()}},insertAfterShape:function(S,P){var R=m("#jqsshape"+S),Q=this["_draw"+P.type].apply(this,P.args);R[0].insertAdjacentHTML("afterEnd",Q)},removeShapeId:function(Q){var P=m("#jqsshape"+Q);this.group.removeChild(P[0])},getShapeAt:function(Q,P,S){var R=Q.id.substr(8);return R},render:function(){if(!this.rendered){this.group.innerHTML=this.prerender;this.rendered=true}}})}))}(document,Math));!function(f){var d=function(h,g){this.$ns="bootstrap-markdown";this.$element=f(h);this.$editable={el:null,type:null,attrKeys:[],attrValues:[],content:null};this.$options=f.extend(true,{},f.fn.markdown.defaults,g);this.$oldContent=null;this.$isPreview=false;this.$editor=null;this.$textarea=null;this.$handler=[];this.$callback=[];this.$nextTab=[];this.showEditor()};d.prototype={constructor:d,__alterButtons:function(i,h){var j=this.$handler,g=(i=="all"),k=this;f.each(j,function(m,l){var n=true;if(g){n=false}else{n=l.indexOf(i)<0}if(n==false){h(k.$editor.find('button[data-handler="'+l+'"]'))}})},__buildButtons:function(j,h){var l,v=this.$ns,A=this.$handler,w=this.$callback;for(l=0;l<j.length;l++){var u,s=j[l];for(u=0;u<s.length;u++){var r,o=s[u].data,t=f("<div/>",{"class":"btn-group"});for(r=0;r<o.length;r++){var m=o[r],k="",x=v+"-"+m.name,n=m.btnText?m.btnText:"",g=m.btnClass?m.btnClass:"btn";if(m.toggle==true){k=' data-toggle="button"'}t.append('<button class="'+g+' btn-small" title="'+m.title+'" data-provider="'+v+'" data-handler="'+x+'"'+k+'><i class="'+m.icon+'"></i> '+n+"</button>");A.push(x);w.push(m.callback)}h.append(t)}}return h},__setListener:function(){var h=typeof this.$textarea.attr("rows")!="undefined",g=this.$textarea.val().split("\n").length>5?this.$textarea.val().split("\n").length:"5",i=h?this.$textarea.attr("rows"):g;this.$textarea.attr("rows",i);this.$textarea.css("resize","none");this.$textarea.on("focus",f.proxy(this.focus,this)).on("keypress",f.proxy(this.keypress,this)).on("keyup",f.proxy(this.keyup,this));if(this.eventSupported("keydown")){this.$textarea.on("keydown",f.proxy(this.keydown,this))}this.$textarea.data("markdown",this)},__handle:function(k){var j=f(k.currentTarget),i=this.$handler,m=this.$callback,h=j.attr("data-handler"),l=i.indexOf(h),g=m[l];f(k.currentTarget).focus();g(this);if(h.indexOf("cmdSave")<0){this.$textarea.focus()}k.preventDefault()},showEditor:function(){var u=this,t,r=this.$ns,g=this.$element,s=g.css("height"),i=g.css("width"),k=this.$editable,w=this.$handler,v=this.$callback,x=this.$options,m=f("<div/>",{"class":"md-editor",click:function(){u.focus()}});if(this.$editor==null){var h=f("<div/>",{"class":"md-header"});if(x.buttons.length>0){h=this.__buildButtons(x.buttons,h)}if(x.additionalButtons.length>0){h=this.__buildButtons(x.additionalButtons,h)}m.append(h);if(g.is("textarea")){g.before(m);t=g;t.addClass("md-input");m.append(t)}else{var n=(typeof toMarkdown=="function")?toMarkdown(g.html()):g.html(),o=f.trim(n);t=f("<textarea/>",{"class":"md-input",val:o});m.append(t);k.el=g;k.type=g.prop("tagName").toLowerCase();k.content=g.html();f(g[0].attributes).each(function(){k.attrKeys.push(this.nodeName);k.attrValues.push(this.nodeValue)});g.replaceWith(m)}if(x.savable){var l=f("<div/>",{"class":"md-footer"}),j="cmdSave";w.push(j);v.push(x.onSave);l.append('<button class="btn btn-success" data-provider="'+r+'" data-handler="'+j+'"><i class="icon icon-white icon-ok"></i> Save</button>');m.append(l)}f.each(["height","width"],function(z,y){if(x[y]!="inherit"){if(jQuery.isNumeric(x[y])){m.css(y,x[y]+"px")}else{m.addClass(x[y])}}});this.$editor=m;this.$textarea=t;this.$editable=k;this.$oldContent=this.getContent();this.__setListener();this.$editor.attr("id",(new Date).getTime());this.$editor.on("click",'[data-provider="bootstrap-markdown"]',f.proxy(this.__handle,this))}else{this.$editor.show()}if(x.autofocus){this.$textarea.focus();this.$editor.addClass("active")}x.onShow(this);return this},showPreview:function(){var i=this.$options,j=i.onPreview(this),g=this.$textarea,l=g.next(),h=f("<div/>",{"class":"md-preview","data-provider":"markdown-preview"}),k;this.$isPreview=true;this.disableButtons("all").enableButtons("cmdPreview");if(typeof j=="string"){k=j}else{k=(typeof markdown=="object")?markdown.toHTML(g.val()):g.val()}h.html(k);if(l&&l.attr("class")=="md-footer"){h.insertBefore(l)}else{g.parent().append(h)}g.hide();h.data("markdown",this);return this},hidePreview:function(){this.$isPreview=false;var g=this.$editor.find('div[data-provider="markdown-preview"]');g.remove();this.enableButtons("all");this.$textarea.show();this.__setListener();return this},isDirty:function(){return this.$oldContent!=this.getContent()},getContent:function(){return this.$textarea.val()},setContent:function(g){this.$textarea.val(g);return this},findSelection:function(h){var k=this.getContent(),j;if(j=k.indexOf(h),j>=0&&h.length>0){var g=this.getSelection(),i;this.setSelection(j,j+h.length);i=this.getSelection();this.setSelection(g.start,g.end);return i}else{return null}},getSelection:function(){var g=this.$textarea[0];return(("selectionStart" in g&&function(){var h=g.selectionEnd-g.selectionStart;return{start:g.selectionStart,end:g.selectionEnd,length:h,text:g.value.substr(g.selectionStart,h)}})||function(){return null})()},setSelection:function(i,g){var h=this.$textarea[0];return(("selectionStart" in h&&function(){h.selectionStart=i;h.selectionEnd=g;return})||function(){return null})()},replaceSelection:function(h){var g=this.$textarea[0];return(("selectionStart" in g&&function(){g.value=g.value.substr(0,g.selectionStart)+h+g.value.substr(g.selectionEnd,g.value.length);g.selectionStart=g.value.length;return this})||function(){g.value+=h;return jQuery(g)})()},getNextTab:function(){if(this.$nextTab.length==0){return null}else{var g,h=this.$nextTab.shift();if(typeof h=="function"){g=h()}else{if(typeof h=="object"&&h.length>0){g=h}}return g}},setNextTab:function(j,h){if(typeof j=="string"){var i=this;this.$nextTab.push(function(){return i.findSelection(j)})}else{if(typeof j=="numeric"&&typeof h=="numeric"){var g=this.getSelection();this.setSelection(j,h);this.$nextTab.push(this.getSelection());this.setSelection(g.start,g.end)}}return},enableButtons:function(h){var g=function(i){i.removeAttr("disabled")};this.__alterButtons(h,g);return this},disableButtons:function(h){var g=function(i){i.attr("disabled","disabled")};this.__alterButtons(h,g);return this},eventSupported:function(g){var h=g in this.$element;if(!h){this.$element.setAttribute(g,"return;");h=typeof this.$element[g]==="function"}return h},keydown:function(g){this.suppressKeyPressRepeat=~f.inArray(g.keyCode,[40,38,9,13,27]);this.keyup(g)},keypress:function(g){if(this.suppressKeyPressRepeat){return}this.keyup(g)},keyup:function(j){var h=false;switch(j.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:var g;if(g=this.getNextTab(),g!=null){var i=this;setTimeout(function(){i.setSelection(g.start,g.end)},500)}else{this.setSelection(this.getContent().length,this.getContent().length)}h=true;break;case 13:case 27:h=false;break;default:h=false}if(h){j.stopPropagation();j.preventDefault()}},focus:function(j){var g=this.$options,i=g.hideable,h=this.$editor;h.addClass("active");f(document).find(".md-editor").each(function(){if(f(this).attr("id")!=h.attr("id")){var k;if(k=f(this).find("textarea").data("markdown"),k==null){k=f(this).find('div[data-provider="markdown-preview"]').data("markdown")}if(k){k.blur()}}});return this},blur:function(n){var h=this.$options,m=h.hideable,k=this.$editor,i=this.$editable;if(k.hasClass("active")||this.$element.parent().length==0){k.removeClass("active");if(m){if(i.el!=null){var g=f("<"+i.type+"/>"),l=this.getContent(),j=(typeof markdown=="object")?markdown.toHTML(l):l;f(i.attrKeys).each(function(r,o){g.attr(i.attrKeys[r],i.attrValues[r])});g.html(j);k.replaceWith(g)}else{k.hide()}}h.onBlur(this)}return this}};var b=f.fn.markdown;f.fn.markdown=function(g){return this.each(function(){var j=f(this),i=j.data("markdown"),h=typeof g=="object"&&g;if(!i){j.data("markdown",(i=new d(this,h)))}})};f.fn.markdown.defaults={autofocus:false,hideable:false,savable:false,width:"inherit",height:"inherit",buttons:[[{name:"groupFont",data:[{name:"cmdBold",title:"Bold",icon:"icon icon-bold",callback:function(j){var g,k,h=j.getSelection(),i=j.getContent();if(h.length==0){g="strong text"}else{g=h.text}if(i.substr(h.start-2,2)=="**"&&i.substr(h.end,2)=="**"){j.setSelection(h.start-2,h.end+2);j.replaceSelection(g);k=h.start-2}else{j.replaceSelection("**"+g+"**");k=h.start+2}j.setSelection(k,k+g.length)}},{name:"cmdItalic",title:"Italic",icon:"icon icon-italic",callback:function(j){var g,k,h=j.getSelection(),i=j.getContent();if(h.length==0){g="emphasized text"}else{g=h.text}if(i.substr(h.start-1,1)=="*"&&i.substr(h.end,1)=="*"){j.setSelection(h.start-1,h.end+1);j.replaceSelection(g);k=h.start-1}else{j.replaceSelection("*"+g+"*");k=h.start+1}j.setSelection(k,k+g.length)}},{name:"cmdHeading",title:"Heading",icon:"icon icon-font",callback:function(j){var g,l,h=j.getSelection(),i=j.getContent(),k,m;if(h.length==0){g="heading text"}else{g=h.text}if((k=4,i.substr(h.start-k,k)=="### ")||(k=3,i.substr(h.start-k,k)=="###")){j.setSelection(h.start-k,h.end);j.replaceSelection(g);l=h.start-k}else{if(m=i.substr(h.start-1,1),!!m&&m!="\n"){j.replaceSelection("\n\n### "+g+"\n");l=h.start+6}else{j.replaceSelection("### "+g+"\n");l=h.start+4}}j.setSelection(l,l+g.length)}}]},{name:"groupLink",data:[{name:"cmdUrl",title:"URL/Link",icon:"icon icon-globe",callback:function(k){var g,l,h=k.getSelection(),j=k.getContent(),i;if(h.length==0){g="enter link description here"}else{g=h.text}i=prompt("Insert Hyperlink","https://");if(i!=null){k.replaceSelection("["+g+"]("+i+")");l=h.start+1;k.setSelection(l,l+g.length)}}},{name:"cmdImage",title:"Image",icon:"icon icon-picture",callback:function(k){var g,l,h=k.getSelection(),j=k.getContent(),i;if(h.length==0){g="enter image description here"}else{g=h.text}i=prompt("Insert Image Hyperlink","http://");if(i!=null){k.replaceSelection("!["+g+"]("+i+' "enter image title here")');l=h.start+2;k.setNextTab("enter image title here");k.setSelection(l,l+g.length)}}}]},{name:"groupMisc",data:[{name:"cmdList",title:"List",icon:"icon icon-list",callback:function(k){var g,l,h=k.getSelection(),i=k.getContent();if(h.length==0){g="list text here";k.replaceSelection("- "+g);l=h.start+2}else{if(h.text.indexOf("\n")<0){g=h.text;k.replaceSelection("- "+g);l=h.start+2}else{var j=[];j=h.text.split("\n");g=j[0];f.each(j,function(n,m){j[n]="- "+m});k.replaceSelection("\n\n"+j.join("\n"));l=h.start+4}}k.setSelection(l,l+g.length)}}]},{name:"groupUtil",data:[{name:"cmdPreview",toggle:true,title:"Preview",btnText:"Preview",btnClass:"btn btn-inverse",icon:"icon icon-white icon-search",callback:function(i){var g=i.$isPreview,h;if(g==false){i.showPreview()}else{i.hidePreview()}}}]}]],additionalButtons:[],onShow:function(g){},onPreview:function(g){},onSave:function(g){},onBlur:function(g){}};f.fn.markdown.Constructor=d;f.fn.markdown.noConflict=function(){f.fn.markdown=b;return this};var e=function(g){var h=g;if(h.data("markdown")){h.data("markdown").showEditor();return}h.markdown(h.data())};var c=function(i){var j=false,h,g=f(i.currentTarget);if((i.type=="focusin"||i.type=="click")&&g.length==1&&typeof g[0]=="object"){h=g[0].activeElement;if(!f(h).data("markdown")){if(typeof f(h).parent().parent().parent().attr("class")=="undefined"||f(h).parent().parent().parent().attr("class").indexOf("md-editor")<0){if(typeof f(h).parent().parent().attr("class")=="undefined"||f(h).parent().parent().attr("class").indexOf("md-editor")<0){j=true}}else{j=false}}if(j){f(document).find(".md-editor").each(function(){var l=f(h).parent();if(f(this).attr("id")!=l.attr("id")){var k;if(k=f(this).find("textarea").data("markdown"),k==null){k=f(this).find('div[data-provider="markdown-preview"]').data("markdown")}if(k){k.blur()}}})}i.stopPropagation()}};f(document).on("click.markdown.data-api",'[data-provide="markdown-editable"]',function(g){e(f(this));g.preventDefault()}).on("click",function(g){c(g)}).on("focusin",function(g){c(g)}).ready(function(){f('textarea[data-provide="markdown"]').each(function(){e(f(this))})})}(window.jQuery);var q=null;window.PR_SHOULD_USE_CONTINUATION=!0;(function(){function e(F){function w(J){var K=J.charCodeAt(0);if(K!==92){return K}var I=J.charAt(1);return(K=k[I])?K:"0"<=I&&I<="7"?parseInt(J.substring(1),8):I==="u"||I==="x"?parseInt(J.substring(2),16):J.charCodeAt(1)}function C(I){if(I<32){return(I<16?"\\x0":"\\x")+I.toString(16)}I=String.fromCharCode(I);if(I==="\\"||I==="-"||I==="["||I==="]"){I="\\"+I}return I}function A(J){for(var M=J.substring(1,J.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),J=[],I=[],O=M[0]==="^",R=O?1:0,L=M.length;R<L;++R){var K=M[R];if(/\\[bdsw]/i.test(K)){J.push(K)}else{var K=w(K),N;R+2<L&&"-"===M[R+1]?(N=w(M[R+2]),R+=2):N=K;I.push([K,N]);N<65||K>122||(N<65||K>90||I.push([Math.max(65,K)|32,Math.min(N,90)|32]),N<97||K>122||I.push([Math.max(97,K)&-33,Math.min(N,122)&-33]))}}I.sort(function(S,T){return S[0]-T[0]||T[1]-S[1]});M=[];K=[NaN,NaN];for(R=0;R<I.length;++R){L=I[R],L[0]<=K[1]+1?K[1]=Math.max(K[1],L[1]):M.push(K=L)}I=["["];O&&I.push("^");I.push.apply(I,J);for(R=0;R<M.length;++R){L=M[R],I.push(C(L[0])),L[1]>L[0]&&(L[1]+1>L[0]&&I.push("-"),I.push(C(L[1])))}I.push("]");return I.join("")}function E(J){for(var M=J.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),I=M.length,N=[],O=0,L=0;O<I;++O){var K=M[O];K==="("?++L:"\\"===K.charAt(0)&&(K=+K.substring(1))&&K<=L&&(N[K]=-1)}for(O=1;O<N.length;++O){-1===N[O]&&(N[O]=++G)}for(L=O=0;O<I;++O){K=M[O],K==="("?(++L,N[L]===void 0&&(M[O]="(?:")):"\\"===K.charAt(0)&&(K=+K.substring(1))&&K<=L&&(M[O]="\\"+N[L])}for(L=O=0;O<I;++O){"^"===M[O]&&"^"!==M[O+1]&&(M[O]="")}if(J.ignoreCase&&H){for(O=0;O<I;++O){K=M[O],J=K.charAt(0),K.length>=2&&J==="["?M[O]=A(K):J!=="\\"&&(M[O]=K.replace(/[A-Za-z]/g,function(R){R=R.charCodeAt(0);return"["+String.fromCharCode(R&-33,R|32)+"]"}))}}return M.join("")}for(var G=0,H=!1,x=!1,u=0,D=F.length;u<D;++u){var B=F[u];if(B.ignoreCase){x=!0}else{if(/[a-z]/i.test(B.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){H=!0;x=!1;break}}}for(var k={b:8,t:9,n:10,v:11,f:12,r:13},v=[],u=0,D=F.length;u<D;++u){B=F[u];if(B.global||B.multiline){throw Error(""+B)}v.push("(?:"+E(B)+")")}return RegExp(v.join("|"),x?"gi":"g")}function d(B){function u(E){switch(E.nodeType){case 1:if(x.test(E.className)){break}for(var F=E.firstChild;F;F=F.nextSibling){u(F)}F=E.nodeName;if("BR"===F||"LI"===F){w[D]="\n",C[D<<1]=A++,C[D++<<1|1]=E}break;case 3:case 4:F=E.nodeValue,F.length&&(F=k?F.replace(/\r\n?/g,"\n"):F.replace(/[\t\n\r ]+/g," "),w[D]=F,C[D<<1]=A,A+=F.length,C[D++<<1|1]=E)}}var x=/(?:^|\s)nocode(?:\s|$)/,w=[],A=0,C=[],D=0,v;B.currentStyle?v=B.currentStyle.whiteSpace:window.getComputedStyle&&(v=document.defaultView.getComputedStyle(B,q).getPropertyValue("white-space"));var k=v&&"pre"===v.substring(0,3);u(B);return{a:w.join("").replace(/\n$/,""),c:C}}function z(u,k,w,v){k&&(u={a:k,d:u},w(u),v.push.apply(v,u.e))}function i(u,k){function x(R){for(var F=R.d,C=[F,"pln"],L=0,J=R.a.match(A)||[],B={},E=0,N=J.length;E<N;++E){var K=J[E],O=B[K],D=void 0,M;if(typeof O==="string"){M=!1}else{var I=w[K.charAt(0)];if(I){D=K.match(I[1]),O=I[0]}else{for(M=0;M<v;++M){if(I=k[M],D=K.match(I[1])){O=I[0];break}}D||(O="pln")}if((M=O.length>=5&&"lang-"===O.substring(0,5))&&!(D&&typeof D[1]==="string")){M=!1,O="src"}M||(B[K]=O)}I=L;L+=K.length;if(M){M=D[1];var H=K.indexOf(M),G=H+M.length;D[2]&&(G=K.length-D[2].length,H=G-M.length);O=O.substring(5);z(F+I,K.substring(0,H),x,C);z(F+I+H,M,y(O,M),C);z(F+I+G,K.substring(G),x,C)}else{C.push(F+I,O)}}R.e=C}var w={},A;(function(){for(var G=u.concat(k),B=[],F={},H=0,E=G.length;H<E;++H){var D=G[H],I=D[3];if(I){for(var C=I.length;--C>=0;){w[I.charAt(C)]=D}}D=D[1];I=""+D;F.hasOwnProperty(I)||(B.push(D),F[I]=q)}B.push(/[\S\s]/);A=e(B)})();var v=k.length;return x}function r(u){var k=[],w=[];u.tripleQuotedStrings?k.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]):u.multiLineStrings?k.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,q,"'\"`"]):k.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]);u.verbatimStrings&&w.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]);var v=u.hashComments;v&&(u.cStyleComments?(v>1?k.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]):k.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),w.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,q])):k.push(["com",/^#[^\n\r]*/,q,"#"]));u.cStyleComments&&(w.push(["com",/^\/\/[^\n\r]*/,q]),w.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q]));u.regexLiterals&&w.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]);(v=u.types)&&w.push(["typ",v]);u=(""+u.keywords).replace(/^ | $/g,"");u.length&&w.push(["kwd",RegExp("^(?:"+u.replace(/[\s,]+/g,"|")+")\\b"),q]);k.push(["pln",/^\s+/,q," \r\n\t\xa0"]);w.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,q],["pun",/^.[^\s\w"-$'./@\\`]*/,q]);return i(k,w)}function t(H,x){function E(K){switch(K.nodeType){case 1:if(B.test(K.className)){break}if("BR"===K.nodeName){C(K),K.parentNode&&K.parentNode.removeChild(K)}else{for(K=K.firstChild;K;K=K.nextSibling){E(K)}}break;case 3:case 4:if(v){var k=K.nodeValue,L=k.match(I);if(L){var M=k.substring(0,L.index);K.nodeValue=M;(k=k.substring(L.index+L[0].length))&&K.parentNode.insertBefore(J.createTextNode(k),K.nextSibling);C(K);M||K.parentNode.removeChild(K)}}}}function C(K){function k(M,T){var S=T?M.cloneNode(!1):M,R=M.parentNode;if(R){var R=k(R,1),O=M.nextSibling;R.appendChild(S);for(var N=O;N;N=O){O=N.nextSibling,R.appendChild(N)}}return S}for(;!K.nextSibling;){if(K=K.parentNode,!K){return}}for(var K=k(K.nextSibling,0),L;(L=K.parentNode)&&L.nodeType===1;){K=L}F.push(K)}var B=/(?:^|\s)nocode(?:\s|$)/,I=/\r\n?|\n/,J=H.ownerDocument,A;H.currentStyle?A=H.currentStyle.whiteSpace:window.getComputedStyle&&(A=J.defaultView.getComputedStyle(H,q).getPropertyValue("white-space"));var v=A&&"pre"===A.substring(0,3);for(A=J.createElement("LI");H.firstChild;){A.appendChild(H.firstChild)}for(var F=[A],D=0;D<F.length;++D){E(F[D])}x===(x|0)&&F[0].setAttribute("value",x);var u=J.createElement("OL");u.className="linenums";for(var w=Math.max(0,x-1|0)||0,D=0,G=F.length;D<G;++D){A=F[D],A.className="L"+(D+w)%10,A.firstChild||A.appendChild(J.createTextNode("\xa0")),u.appendChild(A)}H.appendChild(u)}function Q(u,k){for(var w=k.length;--w>=0;){var v=k[w];P.hasOwnProperty(v)?window.console&&console.warn("cannot override language handler %s",v):P[v]=u}}function y(u,k){if(!u||!P.hasOwnProperty(u)){u=/^\s*</.test(k)?"default-markup":"default-code"}return P[u]}function s(Z){var L=Z.g;try{var V=d(Z.h),S=V.a;Z.a=S;Z.c=V.c;Z.d=0;y(L,S)(Z);var N=/\bMSIE\b/.test(navigator.userAgent),L=/\n/g,F=Z.a,G=F.length,V=0,M=Z.c,I=M.length,S=0,W=Z.e,T=W.length,Z=0;W[T]=G;var H,K;for(K=H=0;K<T;){W[K]!==W[K+2]?(W[H++]=W[K++],W[H++]=W[K++]):K+=2}T=H;for(K=H=0;K<T;){for(var A=W[K],U=W[K+1],Y=K+2;Y+2<=T&&W[Y+1]===U;){Y+=2}W[H++]=A;W[H++]=U;K=Y}for(W.length=H;S<I;){var J=M[S+2]||G,X=W[Z+2]||G,Y=Math.min(J,X),R=M[S+1],O;if(R.nodeType!==1&&(O=F.substring(V,Y))){N&&(O=O.replace(L,"\r"));R.nodeValue=O;var E=R.ownerDocument,D=E.createElement("SPAN");D.className=W[Z+1];var B=R.parentNode;B.replaceChild(D,R);D.appendChild(R);V<J&&(M[S+1]=R=E.createTextNode(F.substring(Y,J)),B.insertBefore(R,D.nextSibling))}V=Y;V>=J&&(S+=2);V>=X&&(Z+=2)}}catch(C){"console" in window&&console.log(C&&C.stack?C.stack:C)}}var n=["break,continue,do,else,for,if,return,while"],l=[[n,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],o=[l,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],m=[l,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],j=[m,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],l=[l,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],h=[n,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],g=[n,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],n=[n,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],f=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,c=/\S/,b=r({keywords:[o,j,l,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+h,g,n],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),P={};Q(b,["default-code"]);Q(i([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]);Q(i([["pln",/^\s+/,q," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]);Q(i([],[["atv",/^[\S\s]+/]]),["uq.val"]);Q(r({keywords:o,hashComments:!0,cStyleComments:!0,types:f}),["c","cc","cpp","cxx","cyc","m"]);Q(r({keywords:"null,true,false"}),["json"]);Q(r({keywords:j,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:f}),["cs"]);Q(r({keywords:m,cStyleComments:!0}),["java"]);Q(r({keywords:n,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]);Q(r({keywords:h,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]);Q(r({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]);Q(r({keywords:g,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]);Q(r({keywords:l,cStyleComments:!0,regexLiterals:!0}),["js"]);Q(r({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]);Q(i([],[["str",/^[\S\s]+/]]),["regex"]);window.prettyPrintOne=function(u,k,w){var v=document.createElement("PRE");v.innerHTML=u;w&&t(v,w);s({g:k,i:w,h:v});return v.innerHTML};window.prettyPrint=function(E){function v(){for(var L=window.PR_SHOULD_USE_CONTINUATION?w.now()+250:Infinity;u<A.length&&w.now()<L;u++){var O=A[u],I=O.className;if(I.indexOf("prettyprint")>=0){var I=I.match(B),K,H;if(H=!I){H=O;for(var M=void 0,N=H.firstChild;N;N=N.nextSibling){var J=N.nodeType,M=J===1?M?H:N:J===3?c.test(N.nodeValue)?H:M:M}H=(K=M===H?void 0:M)&&"CODE"===K.tagName}H&&(I=K.className.match(B));I&&(I=I[1]);H=!1;for(M=O.parentNode;M;M=M.parentNode){if((M.tagName==="pre"||M.tagName==="code"||M.tagName==="xmp")&&M.className&&M.className.indexOf("prettyprint")>=0){H=!0;break}}H||((H=(H=O.className.match(/\blinenums\b(?::(\d+))?/))?H[1]&&H[1].length?+H[1]:!0:!1)&&t(O,H),D={g:I,h:O,i:H},s(D))}}u<A.length?setTimeout(v,250):E&&E()}for(var C=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],A=[],x=0;x<C.length;++x){for(var F=0,G=C[x].length;F<G;++F){A.push(C[x][F])}}var C=q,w=Date;w.now||(w={now:function(){return +new Date}});var u=0,D,B=/\blang(?:uage)?-([\w.]+)(?!\S)/;v()};window.PR={createSimpleLexer:i,registerLangHandler:Q,sourceDecorator:r,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}})();(function(M){var e=M.Markdown=function(T){switch(typeof T){case"undefined":this.dialect=e.dialects.Gruber;break;case"object":this.dialect=T;break;default:if(T in e.dialects){this.dialect=e.dialects[T]}else{throw new Error("Unknown Markdown dialect '"+String(T)+"'")}break}this.em_state=[];this.strong_state=[];this.debug_indent=""};M.parse=function(V,T){var U=new e(T);return U.toTree(V)};M.toHTML=function w(W,V,U){var T=M.toHTMLTree(W,V,U);return M.renderJsonML(T)};M.toHTMLTree=function y(U,Y,W){if(typeof U==="string"){U=this.parse(U,Y)}var V=E(U),T={};if(V&&V.references){T=V.references}var X=i(U,T,W);r(X);return X};function f(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function J(){var T=require("util");return"Markdown.mk_block( "+T.inspect(this.toString())+", "+T.inspect(this.trailing)+", "+T.inspect(this.lineNumber)+" )"}var g=e.mk_block=function(W,U,T){if(arguments.length==1){U="\n\n"}var V=new String(W);V.trailing=U;V.inspect=J;V.toSource=f;if(T!=undefined){V.lineNumber=T}return V};function I(U){var V=0,T=-1;while((T=U.indexOf("\n",T+1))!==-1){V++}return V}e.prototype.split_blocks=function B(V,Y){V=V.replace(/(\r\n|\n|\r)/g,"\n");var W=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,X=[],T;var U=1;if((T=/^(\s*\n)/.exec(V))!=null){U+=I(T[0]);W.lastIndex=T[0].length}while((T=W.exec(V))!==null){if(T[2]=="\n#"){T[2]="\n";W.lastIndex--}X.push(g(T[1],T[2],U));U+=I(T[0])}return X};e.prototype.processBlock=function O(Y,X){var U=this.dialect.block,T=U.__order__;if("__call__" in U){return U.__call__.call(this,Y,X)}for(var W=0;W<T.length;W++){var V=U[T[W]].call(this,Y,X);if(V){if(!C(V)||(V.length>0&&!(C(V[0])))){this.debug(T[W],"didn't return a proper array")}return V}}return[]};e.prototype.processInline=function h(T){return this.dialect.inline.__call__.call(this,String(T))};e.prototype.toTree=function K(V,U){var W=V instanceof Array?V:this.split_blocks(V);var X=this.tree;try{this.tree=U||this.tree||["markdown"];W:while(W.length){var T=this.processBlock(W.shift(),W);if(!T.length){continue W}this.tree.push.apply(this.tree,T)}return this.tree}finally{if(U){this.tree=X}}};e.prototype.debug=function(){var T=Array.prototype.slice.call(arguments);T.unshift(this.debug_indent);if(typeof print!=="undefined"){print.apply(print,T)}if(typeof console!=="undefined"&&typeof console.log!=="undefined"){console.log.apply(null,T)}};e.prototype.loop_re_over_block=function(W,X,V){var U,T=X.valueOf();while(T.length&&(U=W.exec(T))!=null){T=T.substr(U[0].length);V.call(this,U)}return T};e.dialects={};e.dialects.Gruber={block:{atxHeader:function t(V,U){var T=V.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(!T){return undefined}var W=["header",{level:T[1].length}];Array.prototype.push.apply(W,this.processInline(T[2]));if(T[0].length<V.length){U.unshift(g(V.substr(T[0].length),V.trailing,V.lineNumber+2))}return[W]},setextHeader:function z(V,U){var T=V.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(!T){return undefined}var X=(T[2]==="=")?1:2;var W=["header",{level:X},T[1]];if(T[0].length<V.length){U.unshift(g(V.substr(T[0].length),V.trailing,V.lineNumber+2))}return[W]},code:function l(Y,X){var V=[],W=/^(?: {0,3}\t| {4})(.*)\n?/,U;if(!Y.match(W)){return undefined}block_search:do{var T=this.loop_re_over_block(W,Y.valueOf(),function(Z){V.push(Z[1])});if(T.length){X.unshift(g(T,Y.trailing));break block_search}else{if(X.length){if(!X[0].match(W)){break block_search}V.push(Y.trailing.replace(/[^\n]/g,"").substring(2));Y=X.shift()}else{break block_search}}}while(true);return[["code_block",V.join("\n")]]},horizRule:function R(V,U){var T=V.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(!T){return undefined}var W=[["hr"]];if(T[1]){W.unshift.apply(W,this.processBlock(T[1],[]))}if(T[3]){U.unshift(g(T[3]))}return W},lists:(function(){var W="[*+-]|\\d+\\.",U=/[*+-]/,ac=/\d+\./,aa=new RegExp("^( {0,3})("+W+")[ \t]+"),V="(?: {0,3}\\t| {4})";function X(ad){return new RegExp("(?:^("+V+"{0,"+ad+"} {0,3})("+W+")\\s+)|(^"+V+"{0,"+(ad-1)+"}[ ]{0,4})")}function T(ad){return ad.replace(/ {0,3}\t/g,"    ")}function ab(ae,ak,aj,af){if(ak){ae.push(["para"].concat(aj));return}var ad=ae[ae.length-1] instanceof Array&&ae[ae.length-1][0]=="para"?ae[ae.length-1]:ae;if(af&&ae.length>1){aj.unshift(af)}for(var ah=0;ah<aj.length;ah++){var ai=aj[ah],ag=typeof ai=="string";if(ag&&ad.length>1&&typeof ad[ad.length-1]=="string"){ad[ad.length-1]+=ai}else{ad.push(ai)}}}function Y(aj,ai){var ah=new RegExp("^("+V+"{"+aj+"}.*?\\n?)*$"),ag=new RegExp("^"+V+"{"+aj+"}","gm"),af=[];while(ai.length>0){if(ah.exec(ai[0])){var ae=ai.shift(),ad=ae.replace(ag,"");af.push(g(ad,ae.trailing,ae.lineNumber))}else{break}}return af}function Z(ag,af,ad){var ai=ag.list;var ah=ai[ai.length-1];if(ah[1] instanceof Array&&ah[1][0]=="para"){return}if(af+1==ad.length){ah.push(["para"].concat(ah.splice(1,ah.length-1)))}else{var ae=ah.pop();ah.push(["para"].concat(ah.splice(1,ah.length-1)),ae)}}return function(ai,ao){var ap=ai.match(aa);if(!ap){return undefined}function ag(az){var aA=U.exec(az[2])?["bulletlist"]:["numberlist"];ah.push({list:aA,indent:az[1]});return aA}var ah=[],au=ag(ap),af,an=false,ay=[ah[0].list],ar;loose_search:while(true){var ad=ai.split(/(?=\n)/);var av="";tight_search:for(var aw=0;aw<ad.length;aw++){var ae="",aq=ad[aw].replace(/^\n/,function(az){ae=az;return""});var al=X(ah.length);ap=aq.match(al);if(ap[1]!==undefined){if(av.length){ab(af,an,this.processInline(av),ae);an=false;av=""}ap[1]=T(ap[1]);var aj=Math.floor(ap[1].length/4)+1;if(aj>ah.length){au=ag(ap);af.push(au);af=au[1]=["listitem"]}else{var am=false;for(ar=0;ar<ah.length;ar++){if(ah[ar].indent!=ap[1]){continue}au=ah[ar].list;ah.splice(ar+1,ah.length-(ar+1));am=true;break}if(!am){aj++;if(aj<=ah.length){ah.splice(aj,ah.length-aj);au=ah[aj-1].list}else{au=ag(ap);af.push(au)}}af=["listitem"];au.push(af)}ae=""}if(aq.length>ap[0].length){av+=ae+aq.substr(ap[0].length)}}if(av.length){ab(af,an,this.processInline(av),ae);an=false;av=""}var at=Y(ah.length,ao);if(at.length>0){c(ah,Z,this);af.push.apply(af,this.toTree(at,[]))}var ak=ao[0]&&ao[0].valueOf()||"";if(ak.match(aa)||ak.match(/^ /)){ai=ao.shift();var ax=this.dialect.block.horizRule(ai,ao);if(ax){ay.push.apply(ay,ax);break}c(ah,Z,this);an=true;continue loose_search}break}return ay}})(),blockquote:function N(W,X){if(!W.match(/^>/m)){return undefined}var ad=[];if(W[0]!=">"){var ae=W.split(/\n/),U=[],Y=W.lineNumber;while(ae.length&&ae[0][0]!=">"){U.push(ae.shift());Y++}var V=g(U.join("\n"),"\n",W.lineNumber);ad.push.apply(ad,this.processBlock(V,[]));W=g(ae.join("\n"),W.trailing,Y)}while(X.length&&X[0][0]==">"){var aa=X.shift();W=g(W+W.trailing+aa,aa.trailing,W.lineNumber)}var ab=W.replace(/^> ?/gm,""),T=this.tree,ac=this.toTree(ab,["blockquote"]),Z=E(ac);if(Z&&Z.references){delete Z.references;if(v(Z)){ac.splice(1,1)}}ad.push(ac);return ad},referenceDefn:function L(X,W){var V=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(!X.match(V)){return undefined}if(!E(this.tree)){this.tree.splice(1,0,{})}var U=E(this.tree);if(U.references===undefined){U.references={}}var T=this.loop_re_over_block(V,X,function(Y){if(Y[2]&&Y[2][0]=="<"&&Y[2][Y[2].length-1]==">"){Y[2]=Y[2].substring(1,Y[2].length-1)}var Z=U.references[Y[1].toLowerCase()]={href:Y[2]};if(Y[4]!==undefined){Z.title=Y[4]}else{if(Y[5]!==undefined){Z.title=Y[5]}}});if(T.length){W.unshift(g(T,X.trailing))}return[]},para:function F(U,T){return[["para"].concat(this.processInline(U))]}}};e.dialects.Gruber.inline={__oneElement__:function d(Y,U,X){var T,V,Z=0;U=U||this.dialect.inline.__patterns__;var W=new RegExp("([\\s\\S]*?)("+(U.source||U)+")");T=W.exec(Y);if(!T){return[Y.length,Y]}else{if(T[1]){return[T[1].length,T[1]]}}var V;if(T[2] in this.dialect.inline){V=this.dialect.inline[T[2]].call(this,Y.substr(T.index),T,X||[])}V=V||[T[2].length,T[2]];return V},__call__:function s(X,V){var T=[],U;function W(Y){if(typeof Y=="string"&&typeof T[T.length-1]=="string"){T[T.length-1]+=Y}else{T.push(Y)}}while(X.length>0){U=this.dialect.inline.__oneElement__.call(this,X,V,T);X=X.substr(U.shift());c(U,W)}return T},"]":function(){},"}":function(){},"\\":function u(T){if(T.match(/^\\[\\`\*_{}\[\]()#\+.!\-]/)){return[2,T.charAt(1)]}else{return[1,"\\"]}},"![":function m(V){var T=V.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(T){if(T[2]&&T[2][0]=="<"&&T[2][T[2].length-1]==">"){T[2]=T[2].substring(1,T[2].length-1)}T[2]=this.dialect.inline.__call__.call(this,T[2],/\\/)[0];var U={alt:T[1],href:T[2]||""};if(T[4]!==undefined){U.title=T[4]}return[T[0].length,["img",U]]}T=V.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/);if(T){return[T[0].length,["img_ref",{alt:T[1],ref:T[2].toLowerCase(),original:T[0]}]]}return[2,"!["]},"[":function n(ad){var aa=String(ad);var Y=e.DialectHelpers.inline_until_char.call(this,ad.substr(1),"]");if(!Y){return[1,"["]}var ab=1+Y[0],U=Y[1],Z,ac;ad=ad.substr(ab);var W=ad.match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(W){var T=W[1];ab+=W[0].length;if(T&&T[0]=="<"&&T[T.length-1]==">"){T=T.substring(1,T.length-1)}if(!W[3]){var V=1;for(var X=0;X<T.length;X++){switch(T[X]){case"(":V++;break;case")":if(--V==0){ab-=T.length-X;T=T.substring(0,X)}break}}}T=this.dialect.inline.__call__.call(this,T,/\\/)[0];ac={href:T||""};if(W[3]!==undefined){ac.title=W[3]}Z=["link",ac].concat(U);return[ab,Z]}W=ad.match(/^\s*\[(.*?)\]/);if(W){ab+=W[0].length;ac={ref:(W[1]||String(U)).toLowerCase(),original:aa.substr(0,ab)};Z=["link_ref",ac].concat(U);return[ab,Z]}if(U.length==1&&typeof U[0]=="string"){ac={ref:U[0].toLowerCase(),original:aa.substr(0,ab)};Z=["link_ref",ac,U[0]];return[ab,Z]}return[1,"["]},"<":function x(U){var T;if((T=U.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))!=null){if(T[3]){return[T[0].length,["link",{href:"mailto:"+T[3]},T[3]]]}else{if(T[2]=="mailto"){return[T[0].length,["link",{href:T[1]},T[1].substr("mailto:".length)]]}else{return[T[0].length,["link",{href:T[1]},T[1]]]}}}return[1,"<"]},"`":function A(U){var T=U.match(/(`+)(([\s\S]*?)\1)/);if(T&&T[2]){return[T[1].length+T[2].length,["inlinecode",T[3]]]}else{return[1,"`"]}},"  \n":function Q(T){return[3,["linebreak"]]}};function H(T,W){var V=T+"_state",X=T=="strong"?"em_state":"strong_state";function U(Y){this.len_after=Y;this.name="close_"+W}return function(af,ae){if(this[V][0]==W){this[V].shift();return[af.length,new U(af.length-W.length)]}else{var Y=this[X].slice(),ad=this[V].slice();this[V].unshift(W);var aa=this.processInline(af.substr(W.length));var ab=aa[aa.length-1];var Z=this[V].shift();if(ab instanceof U){aa.pop();var ac=af.length-ab.len_after;return[ac,[T].concat(aa)]}else{this[X]=Y;this[V]=ad;return[W.length,W]}}}}e.dialects.Gruber.inline["**"]=H("strong","**");e.dialects.Gruber.inline.__=H("strong","__");e.dialects.Gruber.inline["*"]=H("em","*");e.dialects.Gruber.inline._=H("em","_");e.buildBlockOrder=function(V){var T=[];for(var U in V){if(U=="__order__"||U=="__call__"){continue}T.push(U)}V.__order__=T};e.buildInlinePatterns=function(X){var W=[];for(var U in X){if(U.match(/^__.*__$/)){continue}var T=U.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");W.push(U.length==1?T:"(?:"+T+")")}W=W.join("|");X.__patterns__=W;var V=X.__call__;X.__call__=function(Z,Y){if(Y!=undefined){return V.call(this,Z,Y)}else{return V.call(this,Z,W)}}};e.DialectHelpers={};e.DialectHelpers.inline_until_char=function(X,W){var V=0,T=[];while(true){if(X.charAt(V)==W){V++;return[V,T]}if(V>=X.length){return null}var U=this.dialect.inline.__oneElement__.call(this,X.substr(V));V+=U[0];T.push.apply(T,U.slice(1))}};e.subclassDialect=function(V){function T(){}T.prototype=V.block;function U(){}U.prototype=V.inline;return{block:new T(),inline:new U()}};e.buildBlockOrder(e.dialects.Gruber.block);e.buildInlinePatterns(e.dialects.Gruber.inline);e.dialects.Maruku=e.subclassDialect(e.dialects.Gruber);e.dialects.Maruku.processMetaHash=function k(W){var X=o(W),T={};for(var U=0;U<X.length;++U){if(/^#/.test(X[U])){T.id=X[U].substring(1)}else{if(/^\./.test(X[U])){if(T["class"]){T["class"]=T["class"]+X[U].replace(/./," ")}else{T["class"]=X[U].substring(1)}}else{if(/\=/.test(X[U])){var V=X[U].split(/\=/);T[V[0]]=V[1]}}}}return T};function o(V){var X=V.split(""),W=[""],T=false;while(X.length){var U=X.shift();switch(U){case" ":if(T){W[W.length-1]+=U}else{W.push("")}break;case"'":case'"':T=!T;break;case"\\":U=X.shift();default:W[W.length-1]+=U;break}}return W}e.dialects.Maruku.block.document_meta=function j(Y,V){if(Y.lineNumber>1){return undefined}if(!Y.match(/^(?:\w+:.*\n)*\w+:.*$/)){return undefined}if(!E(this.tree)){this.tree.splice(1,0,{})}var X=Y.split(/\n/);for(p in X){var T=X[p].match(/(\w+):\s*(.*)$/),U=T[1].toLowerCase(),W=T[2];this.tree[1][U]=W}return[]};e.dialects.Maruku.block.block_meta=function G(aa,X){var W=aa.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(!W){return undefined}var V=this.dialect.processMetaHash(W[2]);var Z;if(W[1]===""){var Y=this.tree[this.tree.length-1];Z=E(Y);if(typeof Y==="string"){return undefined}if(!Z){Z={};Y.splice(1,0,Z)}for(a in V){Z[a]=V[a]}return[]}var U=aa.replace(/\n.*$/,""),T=this.processBlock(U,[]);Z=E(T[0]);if(!Z){Z={};T[0].splice(1,0,Z)}for(a in V){Z[a]=V[a]}return T};e.dialects.Maruku.block.definition_list=function P(V,Y){var aa=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,Z=["dl"],X;if((U=V.match(aa))){var T=[V];while(Y.length&&aa.exec(Y[0])){T.push(Y.shift())}for(var ab=0;ab<T.length;++ab){var U=T[ab].match(aa),W=U[1].replace(/\n$/,"").split(/\n/),ac=U[2].split(/\n:\s+/);for(X=0;X<W.length;++X){Z.push(["dt",W[X]])}for(X=0;X<ac.length;++X){Z.push(["dd"].concat(this.processInline(ac[X].replace(/(\n)\s+/,"$1"))))}}}else{return undefined}return[Z]};e.dialects.Maruku.inline["{:"]=function D(aa,Y,W){if(!W.length){return[2,"{:"]}var X=W[W.length-1];if(typeof X==="string"){return[2,"{:"]}var U=aa.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!U){return[2,"{:"]}var Z=this.dialect.processMetaHash(U[1]),T=E(X);if(!T){T={};X.splice(1,0,T)}for(var V in Z){T[V]=Z[V]}return[U[0].length,""]};e.buildBlockOrder(e.dialects.Maruku.block);e.buildInlinePatterns(e.dialects.Maruku.inline);var C=Array.isArray||function(T){return Object.prototype.toString.call(T)=="[object Array]"};var c;if(Array.prototype.forEach){c=function(U,T,V){return U.forEach(T,V)}}else{c=function(U,T,W){for(var V=0;V<U.length;V++){T.call(W||U,U[V],V,U)}}}var v=function(U){for(var T in U){if(hasOwnProperty.call(U,T)){return false}}return true};function E(T){return C(T)&&T.length>1&&typeof T[1]==="object"&&!(C(T[1]))?T[1]:undefined}M.renderJsonML=function(V,T){T=T||{};T.root=T.root||false;var U=[];if(T.root){U.push(S(V))}else{V.shift();if(V.length&&typeof V[0]==="object"&&!(V[0] instanceof Array)){V.shift()}while(V.length){U.push(S(V.shift()))}}return U.join("\n\n")};function b(T){return T.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function S(Y){if(typeof Y==="string"){return b(Y)}var T=Y.shift(),V={},W=[];if(Y.length&&typeof Y[0]==="object"&&!(Y[0] instanceof Array)){V=Y.shift()}while(Y.length){W.push(S(Y.shift()))}var X="";for(var U in V){X+=" "+U+'="'+b(V[U])+'"'}if(T=="img"||T=="br"||T=="hr"){return"<"+T+X+"/>"}else{return"<"+T+X+">"+W.join("")+"</"+T+">"}}function i(ab,Y,aa){var V;aa=aa||{};var X=ab.slice(0);if(typeof aa.preprocessTreeNode==="function"){X=aa.preprocessTreeNode(X,Y)}var Z=E(X);if(Z){X[1]={};for(V in Z){X[1][V]=Z[V]}Z=X[1]}if(typeof X==="string"){return X}switch(X[0]){case"header":X[0]="h"+X[1].level;delete X[1].level;break;case"bulletlist":X[0]="ul";break;case"numberlist":X[0]="ol";break;case"listitem":X[0]="li";break;case"para":X[0]="p";break;case"markdown":X[0]="html";if(Z){delete Z.references}break;case"code_block":X[0]="pre";V=Z?2:1;var T=["code"];T.push.apply(T,X.splice(V,X.length-V));X[V]=T;break;case"inlinecode":X[0]="code";break;case"img":X[1].src=X[1].href;delete X[1].href;break;case"linebreak":X[0]="br";break;case"link":X[0]="a";break;case"link_ref":X[0]="a";var U=Y[Z.ref];if(U){delete Z.ref;Z.href=U.href;if(U.title){Z.title=U.title}delete Z.original}else{return Z.original}break;case"img_ref":X[0]="img";var U=Y[Z.ref];if(U){delete Z.ref;Z.src=U.href;if(U.title){Z.title=U.title}delete Z.original}else{return Z.original}break}V=1;if(Z){for(var W in X[1]){V=2}if(V===1){X.splice(V,1)}}for(;V<X.length;++V){X[V]=i(X[V],Y,aa)}return X}function r(U){var T=E(U)?2:1;while(T<U.length){if(typeof U[T]==="string"){if(T+1<U.length&&typeof U[T+1]==="string"){U[T]+=U.splice(T+1,1)[0]}else{++T}}else{r(U[T]);++T}}}})((function(){if(typeof exports==="undefined"){window.markdown={};return window.markdown}else{return exports}})());var wysihtml5={version:"0.3.0",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"\uFEFF",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};window.rangy=(function(){var k="object",h="function",C="undefined";var l=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"];var d=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"];var u=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"];var r=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"];function j(F,E){var D=typeof F[E];return D==h||(!!(D==k&&F[E]))||D=="unknown"}function e(E,D){return !!(typeof E[D]==k&&E[D])}function s(E,D){return typeof E[D]!=C}function m(D){return function(G,F){var E=F.length;while(E--){if(!D(G,F[E])){return false}}return true}}var o=m(j);var t=m(e);var B=m(s);function x(D){return D&&o(D,r)&&B(D,u)}var n={version:"1.2.2",initialized:false,supported:true,util:{isHostMethod:j,isHostObject:e,isHostProperty:s,areHostMethods:o,areHostObjects:t,areHostProperties:B,isTextRange:x},features:{},modules:{},config:{alertOnWarn:false,preferTextRange:false}};function g(D){window.alert("Rangy not supported in your browser. Reason: "+D);n.initialized=true;n.supported=false}n.fail=g;function w(E){var D="Rangy warning: "+E;if(n.config.alertOnWarn){window.alert(D)}else{if(typeof window.console!=C&&typeof window.console.log!=C){window.console.log(D)}}}n.warn=w;if({}.hasOwnProperty){n.util.extend=function(F,E){for(var D in E){if(E.hasOwnProperty(D)){F[D]=E[D]}}}}else{g("hasOwnProperty not supported")}var y=[];var b=[];function v(){if(n.initialized){return}var F;var J=false,K=false;if(j(document,"createRange")){F=document.createRange();if(o(F,d)&&B(F,l)){J=true}F.detach()}var E=e(document,"body")?document.body:document.getElementsByTagName("body")[0];if(E&&j(E,"createTextRange")){F=E.createTextRange();if(x(F)){K=true}}if(!J&&!K){g("Neither Range nor TextRange are implemented")}n.initialized=true;n.features={implementsDomRange:J,implementsTextRange:K};var I=b.concat(y);for(var H=0,D=I.length;H<D;++H){try{I[H](n)}catch(G){if(e(window,"console")&&j(window.console,"log")){window.console.log("Init listener threw an exception. Continuing.",G)}}}}n.init=v;n.addInitListener=function(D){if(n.initialized){D(n)}else{y.push(D)}};var z=[];n.addCreateMissingNativeApiListener=function(D){z.push(D)};function f(F){F=F||window;v();for(var E=0,D=z.length;E<D;++E){z[E](F)}}n.createMissingNativeApi=f;function A(D){this.name=D;this.initialized=false;this.supported=false}A.prototype.fail=function(D){this.initialized=true;this.supported=false;throw new Error("Module '"+this.name+"' failed to load: "+D)};A.prototype.warn=function(D){n.warn("Module "+this.name+": "+D)};A.prototype.createError=function(D){return new Error("Error in Rangy "+this.name+" module: "+D)};n.createModule=function(D,F){var E=new A(D);n.modules[D]=E;b.push(function(G){F(G,E);E.initialized=true;E.supported=true})};n.requireModules=function(F){for(var H=0,D=F.length,G,E;H<D;++H){E=F[H];G=n.modules[E];if(!G||!(G instanceof A)){throw new Error("Module '"+E+"' not found")}if(!G.supported){throw new Error("Module '"+E+"' not supported")}}};var c=false;var i=function(D){if(!c){c=true;if(!n.initialized){v()}}};if(typeof window==C){g("No window found");return}if(typeof document==C){g("No document found");return}if(j(document,"addEventListener")){document.addEventListener("DOMContentLoaded",i,false)}if(j(window,"addEventListener")){window.addEventListener("load",i,false)}else{if(j(window,"attachEvent")){window.attachEvent("onload",i)}else{g("Window does not have required addEventListener or attachEvent method")}}return n})();rangy.createModule("DomUtil",function(s,e){var w="undefined";var c=s.util;if(!c.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])){e.fail("document missing a Node creation method")}if(!c.isHostMethod(document,"getElementsByTagName")){e.fail("document missing getElementsByTagName method")}var f=document.createElement("div");if(!c.areHostMethods(f,["insertBefore","appendChild","cloneNode"]||!c.areHostObjects(f,["previousSibling","nextSibling","childNodes","parentNode"]))){e.fail("Incomplete Element implementation")}if(!c.isHostProperty(f,"innerHTML")){e.fail("Element is missing innerHTML property")}var v=document.createTextNode("test");if(!c.areHostMethods(v,["splitText","deleteData","insertData","appendData","cloneNode"]||!c.areHostObjects(f,["previousSibling","nextSibling","childNodes","parentNode"])||!c.areHostProperties(v,["data"]))){e.fail("Incomplete Text Node implementation")}var B=function(H,J){var I=H.length;while(I--){if(H[I]===J){return true}}return false};function j(I){var H;return typeof I.namespaceURI==w||((H=I.namespaceURI)===null||H=="http://www.w3.org/1999/xhtml")}function k(I){var H=I.parentNode;return(H.nodeType==1)?H:null}function b(I){var H=0;while((I=I.previousSibling)){H++}return H}function h(H){var I;return n(H)?H.length:((I=H.childNodes)?I.length:0)}function A(I,H){var J=[],K;for(K=I;K;K=K.parentNode){J.push(K)}for(K=H;K;K=K.parentNode){if(B(J,K)){return K}}return null}function F(H,I,K){var J=K?I:I.parentNode;while(J){if(J===H){return true}else{J=J.parentNode}}return false}function C(I,H,L){var J,K=L?I:I.parentNode;while(K){J=K.parentNode;if(J===H){return K}K=J}return null}function n(I){var H=I.nodeType;return H==3||H==4||H==8}function y(K,I){var H=I.nextSibling,J=I.parentNode;if(H){J.insertBefore(K,H)}else{J.appendChild(K)}return K}function z(J,H){var I=J.cloneNode(false);I.deleteData(0,H);J.deleteData(H,J.length-H);y(I,J);return I}function t(H){if(H.nodeType==9){return H}else{if(typeof H.ownerDocument!=w){return H.ownerDocument}else{if(typeof H.document!=w){return H.document}else{if(H.parentNode){return t(H.parentNode)}else{throw new Error("getDocument: no document found for node")}}}}}function m(H){var I=t(H);if(typeof I.defaultView!=w){return I.defaultView}else{if(typeof I.parentWindow!=w){return I.parentWindow}else{throw new Error("Cannot get a window object for node")}}}function E(H){if(typeof H.contentDocument!=w){return H.contentDocument}else{if(typeof H.contentWindow!=w){return H.contentWindow.document}else{throw new Error("getIframeWindow: No Document object found for iframe element")}}}function g(H){if(typeof H.contentWindow!=w){return H.contentWindow}else{if(typeof H.contentDocument!=w){return H.contentDocument.defaultView}else{throw new Error("getIframeWindow: No Window object found for iframe element")}}}function G(H){return c.isHostObject(H,"body")?H.body:H.getElementsByTagName("body")[0]}function d(I){var H;while((H=I.parentNode)){I=H}return I}function u(K,M,J,L){var H,N,P,O,I;if(K==J){return M===L?0:(M<L)?-1:1}else{if((H=C(J,K,true))){return M<=b(H)?-1:1}else{if((H=C(K,J,true))){return b(H)<L?-1:1}else{N=A(K,J);P=(K===N)?N:C(K,N,true);O=(J===N)?N:C(J,N,true);if(P===O){throw new Error("comparePoints got to case 4 and childA and childB are the same!")}else{I=N.firstChild;while(I){if(I===P){return -1}else{if(I===O){return 1}}I=I.nextSibling}throw new Error("Should not be here!")}}}}}function D(I){var H=t(I).createDocumentFragment(),J;while((J=I.firstChild)){H.appendChild(J)}return H}function r(H){if(!H){return"[No node]"}if(n(H)){return'"'+H.data+'"'}else{if(H.nodeType==1){var I=H.id?' id="'+H.id+'"':"";return"<"+H.nodeName+I+">["+H.childNodes.length+"]"}else{return H.nodeName}}}function o(H){this.root=H;this._next=H}o.prototype={_current:null,hasNext:function(){return !!this._next},next:function(){var J=this._current=this._next;var I,H;if(this._current){I=J.firstChild;if(I){this._next=I}else{H=null;while((J!==this.root)&&!(H=J.nextSibling)){J=J.parentNode}this._next=H}}return this._current},detach:function(){this._current=this._next=this.root=null}};function i(H){return new o(H)}function l(H,I){this.node=H;this.offset=I}l.prototype={equals:function(H){return this.node===H.node&this.offset==H.offset},inspect:function(){return"[DomPosition("+r(this.node)+":"+this.offset+")]"}};function x(H){this.code=this[H];this.codeName=H;this.message="DOMException: "+this.codeName}x.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11};x.prototype.toString=function(){return this.message};s.dom={arrayContains:B,isHtmlNamespace:j,parentElement:k,getNodeIndex:b,getNodeLength:h,getCommonAncestor:A,isAncestorOf:F,getClosestAncestorIn:C,isCharacterDataNode:n,insertAfter:y,splitDataNode:z,getDocument:t,getWindow:m,getIframeWindow:g,getIframeDocument:E,getBody:G,getRootContainer:d,comparePoints:u,inspectNode:r,fragmentFromNodeChildren:D,createIterator:i,DomPosition:l};s.DOMException=x});rangy.createModule("DomRange",function(j,g){j.requireModules(["DomUtil"]);var c=j.dom;var H=c.DomPosition;var W=j.DOMException;function A(ao,e){return(ao.nodeType!=3)&&(c.isAncestorOf(ao,e.startContainer,true)||c.isAncestorOf(ao,e.endContainer,true))}function n(e){return c.getDocument(e.startContainer)}function x(ao,at,ap){var ar=ao._listeners[at];if(ar){for(var aq=0,e=ar.length;aq<e;++aq){ar[aq].call(ao,{target:ao,args:ap})}}}function D(e){return new H(e.parentNode,c.getNodeIndex(e))}function Z(e){return new H(e.parentNode,c.getNodeIndex(e)+1)}function k(ao,aq,ap){var e=ao.nodeType==11?ao.firstChild:ao;if(c.isCharacterDataNode(aq)){if(ap==aq.length){c.insertAfter(ao,aq)}else{aq.parentNode.insertBefore(ao,ap==0?aq:c.splitDataNode(aq,ap))}}else{if(ap>=aq.childNodes.length){aq.appendChild(ao)}else{aq.insertBefore(ao,aq.childNodes[ap])}}return e}function K(ap){var ao;for(var aq,ar=n(ap.range).createDocumentFragment(),e;aq=ap.next();){ao=ap.isPartiallySelectedSubtree();aq=aq.cloneNode(!ao);if(ao){e=ap.getSubtreeIterator();aq.appendChild(K(e));e.detach(true)}if(aq.nodeType==10){throw new W("HIERARCHY_REQUEST_ERR")}ar.appendChild(aq)}return ar}function Y(ao,ar,e){var ap,au;e=e||{stop:false};for(var aq,at;aq=ao.next();){if(ao.isPartiallySelectedSubtree()){if(ar(aq)===false){e.stop=true;return}else{at=ao.getSubtreeIterator();Y(at,ar,e);at.detach(true);if(e.stop){return}}}else{ap=c.createIterator(aq);while((au=ap.next())){if(ar(au)===false){e.stop=true;return}}}}}function o(ao){var e;while(ao.next()){if(ao.isPartiallySelectedSubtree()){e=ao.getSubtreeIterator();o(e);e.detach(true)}else{ao.remove()}}}function T(ao){for(var ap,aq=n(ao.range).createDocumentFragment(),e;ap=ao.next();){if(ao.isPartiallySelectedSubtree()){ap=ap.cloneNode(false);e=ao.getSubtreeIterator();ap.appendChild(T(e));e.detach(true)}else{ao.remove()}if(ap.nodeType==10){throw new W("HIERARCHY_REQUEST_ERR")}aq.appendChild(ap)}return aq}function s(ap,e,aq){var at=!!(e&&e.length),ar;var au=!!aq;if(at){ar=new RegExp("^("+e.join("|")+")$")}var ao=[];Y(new h(ap,false),function(av){if((!at||ar.test(av.nodeType))&&(!au||aq(av))){ao.push(av)}});return ao}function C(e){var ao=(typeof e.getName=="undefined")?"Range":e.getName();return"["+ao+"("+c.inspectNode(e.startContainer)+":"+e.startOffset+", "+c.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function h(ap,ao){this.range=ap;this.clonePartiallySelectedTextNodes=ao;if(!ap.collapsed){this.sc=ap.startContainer;this.so=ap.startOffset;this.ec=ap.endContainer;this.eo=ap.endOffset;var e=ap.commonAncestorContainer;if(this.sc===this.ec&&c.isCharacterDataNode(this.sc)){this.isSingleCharacterDataNode=true;this._first=this._last=this._next=this.sc}else{this._first=this._next=(this.sc===e&&!c.isCharacterDataNode(this.sc))?this.sc.childNodes[this.so]:c.getClosestAncestorIn(this.sc,e,true);this._last=(this.ec===e&&!c.isCharacterDataNode(this.ec))?this.ec.childNodes[this.eo-1]:c.getClosestAncestorIn(this.ec,e,true)}}}h.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:false,reset:function(){this._current=null;this._next=this._first},hasNext:function(){return !!this._next},next:function(){var e=this._current=this._next;if(e){this._next=(e!==this._last)?e.nextSibling:null;if(c.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes){if(e===this.ec){(e=e.cloneNode(true)).deleteData(this.eo,e.length-this.eo)}if(this._current===this.sc){(e=e.cloneNode(true)).deleteData(0,this.so)}}}return e},remove:function(){var ao=this._current,ap,e;if(c.isCharacterDataNode(ao)&&(ao===this.sc||ao===this.ec)){ap=(ao===this.sc)?this.so:0;e=(ao===this.ec)?this.eo:ao.length;if(ap!=e){ao.deleteData(ap,e-ap)}}else{if(ao.parentNode){ao.parentNode.removeChild(ao)}else{}}},isPartiallySelectedSubtree:function(){var e=this._current;return A(e,this.range)},getSubtreeIterator:function(){var ao;if(this.isSingleCharacterDataNode){ao=this.range.cloneRange();ao.collapse()}else{ao=new am(n(this.range));var at=this._current;var aq=at,e=0,ar=at,ap=c.getNodeLength(at);if(c.isAncestorOf(at,this.sc,true)){aq=this.sc;e=this.so}if(c.isAncestorOf(at,this.ec,true)){ar=this.ec;ap=this.eo}G(ao,aq,e,ar,ap)}return new h(ao,this.clonePartiallySelectedTextNodes)},detach:function(e){if(e){this.range.detach()}this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};function R(e){this.code=this[e];this.codeName=e;this.message="RangeException: "+this.codeName}R.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2};R.prototype.toString=function(){return this.message};function z(ao,e,ap){this.nodes=s(ao,e,ap);this._next=this.nodes[0];this._position=0}z.prototype={_current:null,hasNext:function(){return !!this._next},next:function(){this._current=this._next;this._next=this.nodes[++this._position];return this._current},detach:function(){this._current=this._next=this.nodes=null}};var ah=[1,3,4,5,7,8,10];var af=[2,9,11];var E=[5,6,10,12];var P=[1,3,4,5,7,8,10,11];var I=[1,3,4,5,7,8];function ab(e){return function(ap,ar){var ao,aq=ar?ap:ap.parentNode;while(aq){ao=aq.nodeType;if(c.arrayContains(e,ao)){return aq}aq=aq.parentNode}return null}}var w=c.getRootContainer;var L=ab([9,11]);var N=ab(E);var d=ab([6,10,12]);function u(ao,e){if(d(ao,e)){throw new R("INVALID_NODE_TYPE_ERR")}}function F(e){if(!e.startContainer){throw new W("INVALID_STATE_ERR")}}function X(e,ao){if(!c.arrayContains(ao,e.nodeType)){throw new R("INVALID_NODE_TYPE_ERR")}}function ag(e,ao){if(ao<0||ao>(c.isCharacterDataNode(e)?e.length:e.childNodes.length)){throw new W("INDEX_SIZE_ERR")}}function f(ao,e){if(L(ao,true)!==L(e,true)){throw new W("WRONG_DOCUMENT_ERR")}}function ad(e){if(N(e,true)){throw new W("NO_MODIFICATION_ALLOWED_ERR")}}function ak(ao,e){if(!ao){throw new W(e)}}function r(e){return !c.arrayContains(af,e.nodeType)&&!L(e,true)}function an(e,ao){return ao<=(c.isCharacterDataNode(e)?e.length:e.childNodes.length)}function i(e){F(e);if(r(e.startContainer)||r(e.endContainer)||!an(e.startContainer,e.startOffset)||!an(e.endContainer,e.endOffset)){throw new Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}}var b=document.createElement("style");var S=false;try{b.innerHTML="<b>x</b>";S=(b.firstChild.nodeType==3)}catch(aj){}j.features.htmlParsingConforms=S;var U=S?function(ap){var ao=this.startContainer;var aq=c.getDocument(ao);if(!ao){throw new W("INVALID_STATE_ERR")}var e=null;if(ao.nodeType==1){e=ao}else{if(c.isCharacterDataNode(ao)){e=c.parentElement(ao)}}if(e===null||(e.nodeName=="HTML"&&c.isHtmlNamespace(c.getDocument(e).documentElement)&&c.isHtmlNamespace(e))){e=aq.createElement("body")}else{e=e.cloneNode(false)}e.innerHTML=ap;return c.fragmentFromNodeChildren(e)}:function(ao){F(this);var ap=n(this);var e=ap.createElement("body");e.innerHTML=ao;return c.fragmentFromNodeChildren(e)};var O=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"];var m=0,B=1,ai=2,ac=3;var v=0,y=1,M=2,l=3;function ae(){}ae.prototype={attachListener:function(e,ao){this._listeners[e].push(ao)},compareBoundaryPoints:function(at,ap){i(this);f(this.startContainer,ap.startContainer);var av,ao,au,e;var ar=(at==ac||at==m)?"start":"end";var aq=(at==B||at==m)?"start":"end";av=this[ar+"Container"];ao=this[ar+"Offset"];au=ap[aq+"Container"];e=ap[aq+"Offset"];return c.comparePoints(av,ao,au,e)},insertNode:function(ao){i(this);X(ao,P);ad(this.startContainer);if(c.isAncestorOf(ao,this.startContainer,true)){throw new W("HIERARCHY_REQUEST_ERR")}var e=k(ao,this.startContainer,this.startOffset);this.setStartBefore(e)},cloneContents:function(){i(this);var ap,ao;if(this.collapsed){return n(this).createDocumentFragment()}else{if(this.startContainer===this.endContainer&&c.isCharacterDataNode(this.startContainer)){ap=this.startContainer.cloneNode(true);ap.data=ap.data.slice(this.startOffset,this.endOffset);ao=n(this).createDocumentFragment();ao.appendChild(ap);return ao}else{var e=new h(this,true);ap=K(e);e.detach()}return ap}},canSurroundContents:function(){i(this);ad(this.startContainer);ad(this.endContainer);var e=new h(this,true);var ao=(e._first&&(A(e._first,this))||(e._last&&A(e._last,this)));e.detach();return !ao},surroundContents:function(ao){X(ao,I);if(!this.canSurroundContents()){throw new R("BAD_BOUNDARYPOINTS_ERR")}var e=this.extractContents();if(ao.hasChildNodes()){while(ao.lastChild){ao.removeChild(ao.lastChild)}}k(ao,this.startContainer,this.startOffset);ao.appendChild(e);this.selectNode(ao)},cloneRange:function(){i(this);var e=new am(n(this));var ao=O.length,ap;while(ao--){ap=O[ao];e[ap]=this[ap]}return e},toString:function(){i(this);var ao=this.startContainer;if(ao===this.endContainer&&c.isCharacterDataNode(ao)){return(ao.nodeType==3||ao.nodeType==4)?ao.data.slice(this.startOffset,this.endOffset):""}else{var ap=[],e=new h(this,true);Y(e,function(aq){if(aq.nodeType==3||aq.nodeType==4){ap.push(aq.data)}});e.detach();return ap.join("")}},compareNode:function(ap){i(this);var ao=ap.parentNode;var ar=c.getNodeIndex(ap);if(!ao){throw new W("NOT_FOUND_ERR")}var aq=this.comparePoint(ao,ar),e=this.comparePoint(ao,ar+1);if(aq<0){return(e>0)?M:v}else{return(e>0)?y:l}},comparePoint:function(e,ao){i(this);ak(e,"HIERARCHY_REQUEST_ERR");f(e,this.startContainer);if(c.comparePoints(e,ao,this.startContainer,this.startOffset)<0){return -1}else{if(c.comparePoints(e,ao,this.endContainer,this.endOffset)>0){return 1}}return 0},createContextualFragment:U,toHtml:function(){i(this);var e=n(this).createElement("div");e.appendChild(this.cloneContents());return e.innerHTML},intersectsNode:function(aq,e){i(this);ak(aq,"NOT_FOUND_ERR");if(c.getDocument(aq)!==n(this)){return false}var ap=aq.parentNode,at=c.getNodeIndex(aq);ak(ap,"NOT_FOUND_ERR");var ar=c.comparePoints(ap,at,this.endContainer,this.endOffset),ao=c.comparePoints(ap,at+1,this.startContainer,this.startOffset);return e?ar<=0&&ao>=0:ar<0&&ao>0},isPointInRange:function(e,ao){i(this);ak(e,"HIERARCHY_REQUEST_ERR");f(e,this.startContainer);return(c.comparePoints(e,ao,this.startContainer,this.startOffset)>=0)&&(c.comparePoints(e,ao,this.endContainer,this.endOffset)<=0)},intersectsRange:function(ao,e){i(this);if(n(ao)!=n(this)){throw new W("WRONG_DOCUMENT_ERR")}var aq=c.comparePoints(this.startContainer,this.startOffset,ao.endContainer,ao.endOffset),ap=c.comparePoints(this.endContainer,this.endOffset,ao.startContainer,ao.startOffset);return e?aq<=0&&ap>=0:aq<0&&ap>0},intersection:function(e){if(this.intersectsRange(e)){var aq=c.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),ao=c.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset);var ap=this.cloneRange();if(aq==-1){ap.setStart(e.startContainer,e.startOffset)}if(ao==1){ap.setEnd(e.endContainer,e.endOffset)}return ap}return null},union:function(e){if(this.intersectsRange(e,true)){var ao=this.cloneRange();if(c.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)==-1){ao.setStart(e.startContainer,e.startOffset)}if(c.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)==1){ao.setEnd(e.endContainer,e.endOffset)}return ao}else{throw new R("Ranges do not intersect")}},containsNode:function(ao,e){if(e){return this.intersectsNode(ao,false)}else{return this.compareNode(ao)==l}},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,c.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(aq){var ar=this.cloneRange();ar.selectNode(aq);var ap=ar.getNodes([3]);if(ap.length>0){ar.setStart(ap[0],0);var e=ap.pop();ar.setEnd(e,e.length);var ao=this.containsRange(ar);ar.detach();return ao}else{return this.containsNodeContents(aq)}},createNodeIterator:function(e,ao){i(this);return new z(this,e,ao)},getNodes:function(e,ao){i(this);return s(this,e,ao)},getDocument:function(){return n(this)},collapseBefore:function(e){F(this);this.setEndBefore(e);this.collapse(false)},collapseAfter:function(e){F(this);this.setStartAfter(e);this.collapse(true)},getName:function(){return"DomRange"},equals:function(e){return am.rangesEqual(this,e)},inspect:function(){return C(this)}};function V(e){e.START_TO_START=m;e.START_TO_END=B;e.END_TO_END=ai;e.END_TO_START=ac;e.NODE_BEFORE=v;e.NODE_AFTER=y;e.NODE_BEFORE_AND_AFTER=M;e.NODE_INSIDE=l}function J(e){V(e);V(e.prototype)}function t(e,ao){return function(){i(this);var av=this.startContainer,au=this.startOffset,ap=this.commonAncestorContainer;var ar=new h(this,true);var at,aw;if(av!==ap){at=c.getClosestAncestorIn(av,ap,true);aw=Z(at);av=aw.node;au=aw.offset}Y(ar,ad);ar.reset();var aq=e(ar);ar.detach();ao(this,av,au,av,au);return aq}}function aa(aq,au,e){function at(aw,av){return function(ax){F(this);X(ax,ah);X(w(ax),af);var ay=(aw?D:Z)(ax);(av?ap:ar)(this,ay.node,ay.offset)}}function ap(aw,ay,az){var ax=aw.endContainer,av=aw.endOffset;if(ay!==aw.startContainer||az!==aw.startOffset){if(w(ay)!=w(ax)||c.comparePoints(ay,az,ax,av)==1){ax=ay;av=az}au(aw,ay,az,ax,av)}}function ar(av,aw,az){var ay=av.startContainer,ax=av.startOffset;if(aw!==av.endContainer||az!==av.endOffset){if(w(aw)!=w(ay)||c.comparePoints(aw,az,ay,ax)==-1){ay=aw;ax=az}au(av,ay,ax,aw,az)}}function ao(av,aw,ax){if(aw!==av.startContainer||ax!==av.startOffset||aw!==av.endContainer||ax!==av.endOffset){au(av,aw,ax,aw,ax)}}aq.prototype=new ae();j.util.extend(aq.prototype,{setStart:function(av,aw){F(this);u(av,true);ag(av,aw);ap(this,av,aw)},setEnd:function(av,aw){F(this);u(av,true);ag(av,aw);ar(this,av,aw)},setStartBefore:at(true,true),setStartAfter:at(false,true),setEndBefore:at(true,false),setEndAfter:at(false,false),collapse:function(av){i(this);if(av){au(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset)}else{au(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)}},selectNodeContents:function(av){F(this);u(av,true);au(this,av,0,av,c.getNodeLength(av))},selectNode:function(aw){F(this);u(aw,false);X(aw,ah);var ax=D(aw),av=Z(aw);au(this,ax.node,ax.offset,av.node,av.offset)},extractContents:t(T,au),deleteContents:t(o,au),canSurroundContents:function(){i(this);ad(this.startContainer);ad(this.endContainer);var av=new h(this,true);var aw=(av._first&&(A(av._first,this))||(av._last&&A(av._last,this)));av.detach();return !aw},detach:function(){e(this)},splitBoundaries:function(){i(this);var az=this.startContainer,ay=this.startOffset,aw=this.endContainer,av=this.endOffset;var ax=(az===aw);if(c.isCharacterDataNode(aw)&&av>0&&av<aw.length){c.splitDataNode(aw,av)}if(c.isCharacterDataNode(az)&&ay>0&&ay<az.length){az=c.splitDataNode(az,ay);if(ax){av-=ay;aw=az}else{if(aw==az.parentNode&&av>=c.getNodeIndex(az)){av++}}ay=0}au(this,az,ay,aw,av)},normalizeBoundaries:function(){i(this);var aC=this.startContainer,ax=this.startOffset,aB=this.endContainer,av=this.endOffset;var ay=function(aF){var aE=aF.nextSibling;if(aE&&aE.nodeType==aF.nodeType){aB=aF;av=aF.length;aF.appendData(aE.data);aE.parentNode.removeChild(aE)}};var aD=function(aG){var aF=aG.previousSibling;if(aF&&aF.nodeType==aG.nodeType){aC=aG;var aE=aG.length;ax=aF.length;aG.insertData(0,aF.data);aF.parentNode.removeChild(aF);if(aC==aB){av+=ax;aB=aC}else{if(aB==aG.parentNode){var aH=c.getNodeIndex(aG);if(av==aH){aB=aG;av=aE}else{if(av>aH){av--}}}}}};var aA=true;if(c.isCharacterDataNode(aB)){if(aB.length==av){ay(aB)}}else{if(av>0){var az=aB.childNodes[av-1];if(az&&c.isCharacterDataNode(az)){ay(az)}}aA=!this.collapsed}if(aA){if(c.isCharacterDataNode(aC)){if(ax==0){aD(aC)}}else{if(ax<aC.childNodes.length){var aw=aC.childNodes[ax];if(aw&&c.isCharacterDataNode(aw)){aD(aw)}}}}else{aC=aB;ax=av}au(this,aC,ax,aB,av)},collapseToPoint:function(av,aw){F(this);u(av,true);ag(av,aw);ao(this,av,aw)}});J(aq)}function Q(e){e.collapsed=(e.startContainer===e.endContainer&&e.startOffset===e.endOffset);e.commonAncestorContainer=e.collapsed?e.startContainer:c.getCommonAncestor(e.startContainer,e.endContainer)}function G(ap,ar,ao,at,aq){var e=(ap.startContainer!==ar||ap.startOffset!==ao);var au=(ap.endContainer!==at||ap.endOffset!==aq);ap.startContainer=ar;ap.startOffset=ao;ap.endContainer=at;ap.endOffset=aq;Q(ap);x(ap,"boundarychange",{startMoved:e,endMoved:au})}function al(e){F(e);e.startContainer=e.startOffset=e.endContainer=e.endOffset=null;e.collapsed=e.commonAncestorContainer=null;x(e,"detach",null);e._listeners=null}function am(e){this.startContainer=e;this.startOffset=0;this.endContainer=e;this.endOffset=0;this._listeners={boundarychange:[],detach:[]};Q(this)}aa(am,G,al);j.rangePrototype=ae.prototype;am.rangeProperties=O;am.RangeIterator=h;am.copyComparisonConstants=J;am.createPrototypeRange=aa;am.inspect=C;am.getRangeDocument=n;am.rangesEqual=function(ao,e){return ao.startContainer===e.startContainer&&ao.startOffset===e.startOffset&&ao.endContainer===e.endContainer&&ao.endOffset===e.endOffset};j.DomRange=am;j.RangeException=R});rangy.createModule("WrappedRange",function(j,e){j.requireModules(["DomUtil","DomRange"]);var b;var i=j.dom;var c=i.DomPosition;var k=j.DomRange;function f(t){var r=t.parentElement();var n=t.duplicate();n.collapse(true);var s=n.parentElement();n=t.duplicate();n.collapse(false);var o=n.parentElement();var m=(s==o)?s:i.getCommonAncestor(s,o);return m==r?m:i.getCommonAncestor(r,m)}function d(m){return m.compareEndPoints("StartToEnd",m)==0}function g(C,z,o,v){var D=C.duplicate();D.collapse(o);var B=D.parentElement();if(!i.isAncestorOf(z,B,true)){B=z}if(!B.canHaveHTML){return new c(B.parentNode,i.getNodeIndex(B))}var n=i.getDocument(B).createElement("span");var A,x=o?"StartToStart":"StartToEnd";var y,t,m,r;do{B.insertBefore(n,n.previousSibling);D.moveToElementText(n)}while((A=D.compareEndPoints(x,C))>0&&n.previousSibling);r=n.nextSibling;if(A==-1&&r&&i.isCharacterDataNode(r)){D.setEndPoint(o?"EndToStart":"EndToEnd",C);var u;if(/[\r\n]/.test(r.data)){var w=D.duplicate();var s=w.text.replace(/\r\n/g,"\r").length;u=w.moveStart("character",s);while((A=w.compareEndPoints("StartToEnd",w))==-1){u++;w.moveStart("character",1)}}else{u=D.text.length}m=new c(r,u)}else{y=(v||!o)&&n.previousSibling;t=(v||o)&&n.nextSibling;if(t&&i.isCharacterDataNode(t)){m=new c(t,0)}else{if(y&&i.isCharacterDataNode(y)){m=new c(y,y.length)}else{m=new c(B,i.getNodeIndex(n))}}}n.parentNode.removeChild(n);return m}function l(m,o){var r,u,s=m.offset;var v=i.getDocument(m.node);var n,w,x=v.body.createTextRange();var t=i.isCharacterDataNode(m.node);if(t){r=m.node;u=r.parentNode}else{w=m.node.childNodes;r=(s<w.length)?w[s]:null;u=m.node}n=v.createElement("span");n.innerHTML="&#feff;";if(r){u.insertBefore(n,r)}else{u.appendChild(n)}x.moveToElementText(n);x.collapse(!o);u.removeChild(n);if(t){x[o?"moveStart":"moveEnd"]("character",s)}return x}if(j.features.implementsDomRange&&(!j.features.implementsTextRange||!j.config.preferTextRange)){(function(){var o;var v=k.rangeProperties;var y;function m(z){var A=v.length,B;while(A--){B=v[A];z[B]=z.nativeRange[B]}}function r(B,D,A,E,C){var z=(B.startContainer!==D||B.startOffset!=A);var F=(B.endContainer!==E||B.endOffset!=C);if(z||F){B.setEnd(E,C);B.setStart(D,A)}}function w(z){z.nativeRange.detach();z.detached=true;var A=v.length,B;while(A--){B=v[A];z[B]=null}}var n;b=function(z){if(!z){throw new Error("Range must be specified")}this.nativeRange=z;m(this)};k.createPrototypeRange(b,r,w);o=b.prototype;o.selectNode=function(z){this.nativeRange.selectNode(z);m(this)};o.deleteContents=function(){this.nativeRange.deleteContents();m(this)};o.extractContents=function(){var z=this.nativeRange.extractContents();m(this);return z};o.cloneContents=function(){return this.nativeRange.cloneContents()};o.surroundContents=function(z){this.nativeRange.surroundContents(z);m(this)};o.collapse=function(z){this.nativeRange.collapse(z);m(this)};o.cloneRange=function(){return new b(this.nativeRange.cloneRange())};o.refresh=function(){m(this)};o.toString=function(){return this.nativeRange.toString()};var u=document.createTextNode("test");i.getBody(document).appendChild(u);var s=document.createRange();s.setStart(u,0);s.setEnd(u,0);try{s.setStart(u,1);y=true;o.setStart=function(z,A){this.nativeRange.setStart(z,A);m(this)};o.setEnd=function(z,A){this.nativeRange.setEnd(z,A);m(this)};n=function(z){return function(A){this.nativeRange[z](A);m(this)}}}catch(t){y=false;o.setStart=function(A,B){try{this.nativeRange.setStart(A,B)}catch(z){this.nativeRange.setEnd(A,B);this.nativeRange.setStart(A,B)}m(this)};o.setEnd=function(A,B){try{this.nativeRange.setEnd(A,B)}catch(z){this.nativeRange.setStart(A,B);this.nativeRange.setEnd(A,B)}m(this)};n=function(z,A){return function(C){try{this.nativeRange[z](C)}catch(B){this.nativeRange[A](C);this.nativeRange[z](C)}m(this)}}}o.setStartBefore=n("setStartBefore","setEndBefore");o.setStartAfter=n("setStartAfter","setEndAfter");o.setEndBefore=n("setEndBefore","setStartBefore");o.setEndAfter=n("setEndAfter","setStartAfter");s.selectNodeContents(u);if(s.startContainer==u&&s.endContainer==u&&s.startOffset==0&&s.endOffset==u.length){o.selectNodeContents=function(z){this.nativeRange.selectNodeContents(z);m(this)}}else{o.selectNodeContents=function(z){this.setStart(z,0);this.setEnd(z,k.getEndOffset(z))}}s.selectNodeContents(u);s.setEnd(u,3);var x=document.createRange();x.selectNodeContents(u);x.setEnd(u,4);x.setStart(u,2);if(s.compareBoundaryPoints(s.START_TO_END,x)==-1&s.compareBoundaryPoints(s.END_TO_START,x)==1){o.compareBoundaryPoints=function(A,z){z=z.nativeRange||z;if(A==z.START_TO_END){A=z.END_TO_START}else{if(A==z.END_TO_START){A=z.START_TO_END}}return this.nativeRange.compareBoundaryPoints(A,z)}}else{o.compareBoundaryPoints=function(A,z){return this.nativeRange.compareBoundaryPoints(A,z.nativeRange||z)}}if(j.util.isHostMethod(s,"createContextualFragment")){o.createContextualFragment=function(z){return this.nativeRange.createContextualFragment(z)}}i.getBody(document).removeChild(u);s.detach();x.detach()})();j.createNativeRange=function(m){m=m||document;return m.createRange()}}else{if(j.features.implementsTextRange){b=function(m){this.textRange=m;this.refresh()};b.prototype=new k(document);b.prototype.refresh=function(){var o,m;var n=f(this.textRange);if(d(this.textRange)){m=o=g(this.textRange,n,true,true)}else{o=g(this.textRange,n,true,false);m=g(this.textRange,n,false,false)}this.setStart(o.node,o.offset);this.setEnd(m.node,m.offset)};k.copyComparisonConstants(b);var h=(function(){return this})();if(typeof h.Range=="undefined"){h.Range=b}j.createNativeRange=function(m){m=m||document;return m.body.createTextRange()}}}if(j.features.implementsTextRange){b.rangeToTextRange=function(m){if(m.collapsed){var r=l(new c(m.startContainer,m.startOffset),true);return r}else{var s=l(new c(m.startContainer,m.startOffset),true);var o=l(new c(m.endContainer,m.endOffset),false);var n=i.getDocument(m.startContainer).body.createTextRange();n.setEndPoint("StartToStart",s);n.setEndPoint("EndToEnd",o);return n}}}b.prototype.getName=function(){return"WrappedRange"};j.WrappedRange=b;j.createRange=function(m){m=m||document;return new b(j.createNativeRange(m))};j.createRangyRange=function(m){m=m||document;return new k(m)};j.createIframeRange=function(m){return j.createRange(i.getIframeDocument(m))};j.createIframeRangyRange=function(m){return j.createRangyRange(i.getIframeDocument(m))};j.addCreateMissingNativeApiListener(function(n){var m=n.document;if(typeof m.createRange=="undefined"){m.createRange=function(){return j.createRange(this)}}m=n=null})});rangy.createModule("WrappedSelection",function(h,e){h.requireModules(["DomUtil","DomRange","WrappedRange"]);h.config.checkSelectionRanges=true;var G="boolean",W="_rangySelection",d=h.dom,m=h.util,T=h.DomRange,f=h.WrappedRange,Q=h.DOMException,B=d.DomPosition,z,o,X="Control";function n(Z){return(Z||window).getSelection()}function t(Z){return(Z||window).document.selection}var V=h.util.isHostMethod(window,"getSelection"),P=h.util.isHostObject(document,"selection");var x=P&&(!V||h.config.preferTextRange);if(x){z=t;h.isSelectionValid=function(aa){var ab=(aa||window).document,Z=ab.selection;return(Z.type!="None"||d.getDocument(Z.createRange().parentElement())==ab)}}else{if(V){z=n;h.isSelectionValid=function(){return true}}else{e.fail("Neither document.selection or window.getSelection() detected.")}}h.getNativeSelection=z;var O=z();var E=h.createNativeRange(document);var F=d.getBody(document);var M=m.areHostObjects(O,["anchorNode","focusNode"]&&m.areHostProperties(O,["anchorOffset","focusOffset"]));h.features.selectionHasAnchorAndFocus=M;var s=m.isHostMethod(O,"extend");h.features.selectionHasExtend=s;var Y=(typeof O.rangeCount=="number");h.features.selectionHasRangeCount=Y;var S=false;var R=true;if(m.areHostMethods(O,["addRange","getRangeAt","removeAllRanges"])&&typeof O.rangeCount=="number"&&h.features.implementsDomRange){(function(){var ab=document.createElement("iframe");F.appendChild(ab);var af=d.getIframeDocument(ab);af.open();af.write("<html><head></head><body>12</body></html>");af.close();var ad=d.getIframeWindow(ab).getSelection();var ag=af.documentElement;var ac=ag.lastChild,ae=ac.firstChild;var aa=af.createRange();aa.setStart(ae,1);aa.collapse(true);ad.addRange(aa);R=(ad.rangeCount==1);ad.removeAllRanges();var Z=aa.cloneRange();aa.setStart(ae,0);Z.setEnd(ae,2);ad.addRange(aa);ad.addRange(Z);S=(ad.rangeCount==2);aa.detach();Z.detach();F.removeChild(ab)})()}h.features.selectionSupportsMultipleRanges=S;h.features.collapsedNonEditableSelectionsSupported=R;var g=false,k;if(F&&m.isHostMethod(F,"createControlRange")){k=F.createControlRange();if(m.areHostProperties(k,["item","add"])){g=true}}h.features.implementsControlRange=g;if(M){o=function(Z){return Z.anchorNode===Z.focusNode&&Z.anchorOffset===Z.focusOffset}}else{o=function(Z){return Z.rangeCount?Z.getRangeAt(Z.rangeCount-1).collapsed:false}}function c(ac,aa,Z){var ab=Z?"end":"start",ad=Z?"start":"end";ac.anchorNode=aa[ab+"Container"];ac.anchorOffset=aa[ab+"Offset"];ac.focusNode=aa[ad+"Container"];ac.focusOffset=aa[ad+"Offset"]}function y(aa){var Z=aa.nativeSelection;aa.anchorNode=Z.anchorNode;aa.anchorOffset=Z.anchorOffset;aa.focusNode=Z.focusNode;aa.focusOffset=Z.focusOffset}function J(Z){Z.anchorNode=Z.focusNode=null;Z.anchorOffset=Z.focusOffset=0;Z.rangeCount=0;Z.isCollapsed=true;Z._ranges.length=0}function L(Z){var aa;if(Z instanceof T){aa=Z._selectionNativeRange;if(!aa){aa=h.createNativeRange(d.getDocument(Z.startContainer));aa.setEnd(Z.endContainer,Z.endOffset);aa.setStart(Z.startContainer,Z.startOffset);Z._selectionNativeRange=aa;Z.attachListener("detach",function(){this._selectionNativeRange=null})}}else{if(Z instanceof f){aa=Z.nativeRange}else{if(h.features.implementsDomRange&&(Z instanceof d.getWindow(Z.startContainer).Range)){aa=Z}}}return aa}function l(ab){if(!ab.length||ab[0].nodeType!=1){return false}for(var aa=1,Z=ab.length;aa<Z;++aa){if(!d.isAncestorOf(ab[0],ab[aa])){return false}}return true}function N(aa){var Z=aa.getNodes();if(!l(Z)){throw new Error("getSingleElementFromRange: range "+aa.inspect()+" did not consist of a single element")}return Z[0]}function I(Z){return !!Z&&typeof Z.text!="undefined"}function K(ab,aa){var Z=new f(aa);ab._ranges=[Z];c(ab,Z,false);ab.rangeCount=1;ab.isCollapsed=Z.collapsed}function w(ac){ac._ranges.length=0;if(ac.docSelection.type=="None"){J(ac)}else{var ab=ac.docSelection.createRange();if(I(ab)){K(ac,ab)}else{ac.rangeCount=ab.length;var Z,ad=d.getDocument(ab.item(0));for(var aa=0;aa<ac.rangeCount;++aa){Z=h.createRange(ad);Z.selectNode(ab.item(aa));ac._ranges.push(Z)}ac.isCollapsed=ac.rangeCount==1&&ac._ranges[0].collapsed;c(ac,ac._ranges[ac.rangeCount-1],false)}}}function A(aa,ad){var ab=aa.docSelection.createRange();var Z=N(ad);var ah=d.getDocument(ab.item(0));var ae=d.getBody(ah).createControlRange();for(var ac=0,af=ab.length;ac<af;++ac){ae.add(ab.item(ac))}try{ae.add(Z)}catch(ag){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}ae.select();w(aa)}var r;if(m.isHostMethod(O,"getRangeAt")){r=function(ab,Z){try{return ab.getRangeAt(Z)}catch(aa){return null}}}else{if(M){r=function(aa){var ab=d.getDocument(aa.anchorNode);var Z=h.createRange(ab);Z.setStart(aa.anchorNode,aa.anchorOffset);Z.setEnd(aa.focusNode,aa.focusOffset);if(Z.collapsed!==this.isCollapsed){Z.setStart(aa.focusNode,aa.focusOffset);Z.setEnd(aa.anchorNode,aa.anchorOffset)}return Z}}}function D(Z,ab,aa){this.nativeSelection=Z;this.docSelection=ab;this._ranges=[];this.win=aa;this.refresh()}h.getSelection=function(ab){ab=ab||window;var aa=ab[W];var Z=z(ab),ac=P?t(ab):null;if(aa){aa.nativeSelection=Z;aa.docSelection=ac;aa.refresh(ab)}else{aa=new D(Z,ac,ab);ab[W]=aa}return aa};h.getIframeSelection=function(Z){return h.getSelection(d.getIframeWindow(Z))};var b=D.prototype;function j(ae,Z){var af=d.getDocument(Z[0].startContainer);var ac=d.getBody(af).createControlRange();for(var ab=0,ad;ab<rangeCount;++ab){ad=N(Z[ab]);try{ac.add(ad)}catch(aa){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}ac.select();w(ae)}if(!x&&M&&m.areHostMethods(O,["removeAllRanges","addRange"])){b.removeAllRanges=function(){this.nativeSelection.removeAllRanges();J(this)};var i=function(ab,Z){var ac=T.getRangeDocument(Z);var aa=h.createRange(ac);aa.collapseToPoint(Z.endContainer,Z.endOffset);ab.nativeSelection.addRange(L(aa));ab.nativeSelection.extend(Z.startContainer,Z.startOffset);ab.refresh()};if(Y){b.addRange=function(aa,Z){if(g&&P&&this.docSelection.type==X){A(this,aa)}else{if(Z&&s){i(this,aa)}else{var ab;if(S){ab=this.rangeCount}else{this.removeAllRanges();ab=0}this.nativeSelection.addRange(L(aa));this.rangeCount=this.nativeSelection.rangeCount;if(this.rangeCount==ab+1){if(h.config.checkSelectionRanges){var ac=r(this.nativeSelection,this.rangeCount-1);if(ac&&!T.rangesEqual(ac,aa)){aa=new f(ac)}}this._ranges[this.rangeCount-1]=aa;c(this,aa,u(this.nativeSelection));this.isCollapsed=o(this)}else{this.refresh()}}}}}else{b.addRange=function(aa,Z){if(Z&&s){i(this,aa)}else{this.nativeSelection.addRange(L(aa));this.refresh()}}}b.setRanges=function(aa){if(g&&aa.length>1){j(this,aa)}else{this.removeAllRanges();for(var ab=0,Z=aa.length;ab<Z;++ab){this.addRange(aa[ab])}}}}else{if(m.isHostMethod(O,"empty")&&m.isHostMethod(E,"select")&&g&&x){b.removeAllRanges=function(){try{this.docSelection.empty();if(this.docSelection.type!="None"){var ac;if(this.anchorNode){ac=d.getDocument(this.anchorNode)}else{if(this.docSelection.type==X){var aa=this.docSelection.createRange();if(aa.length){ac=d.getDocument(aa.item(0)).body.createTextRange()}}}if(ac){var ab=ac.body.createTextRange();ab.select();this.docSelection.empty()}}}catch(Z){}J(this)};b.addRange=function(Z){if(this.docSelection.type==X){A(this,Z)}else{f.rangeToTextRange(Z).select();this._ranges[0]=Z;this.rangeCount=1;this.isCollapsed=this._ranges[0].collapsed;c(this,Z,false)}};b.setRanges=function(Z){this.removeAllRanges();var aa=Z.length;if(aa>1){j(this,Z)}else{if(aa){this.addRange(Z[0])}}}}else{e.fail("No means of selecting a Range or TextRange was found");return false}}b.getRangeAt=function(Z){if(Z<0||Z>=this.rangeCount){throw new Q("INDEX_SIZE_ERR")}else{return this._ranges[Z]}};var H;if(x){H=function(aa){var Z;if(h.isSelectionValid(aa.win)){Z=aa.docSelection.createRange()}else{Z=d.getBody(aa.win.document).createTextRange();Z.collapse(true)}if(aa.docSelection.type==X){w(aa)}else{if(I(Z)){K(aa,Z)}else{J(aa)}}}}else{if(m.isHostMethod(O,"getRangeAt")&&typeof O.rangeCount=="number"){H=function(ab){if(g&&P&&ab.docSelection.type==X){w(ab)}else{ab._ranges.length=ab.rangeCount=ab.nativeSelection.rangeCount;if(ab.rangeCount){for(var aa=0,Z=ab.rangeCount;aa<Z;++aa){ab._ranges[aa]=new h.WrappedRange(ab.nativeSelection.getRangeAt(aa))}c(ab,ab._ranges[ab.rangeCount-1],u(ab.nativeSelection));ab.isCollapsed=o(ab)}else{J(ab)}}}}else{if(M&&typeof O.isCollapsed==G&&typeof E.collapsed==G&&h.features.implementsDomRange){H=function(ab){var Z,aa=ab.nativeSelection;if(aa.anchorNode){Z=r(aa,0);ab._ranges=[Z];ab.rangeCount=1;y(ab);ab.isCollapsed=o(ab)}else{J(ab)}}}else{e.fail("No means of obtaining a Range or TextRange from the user's selection was found");return false}}}b.refresh=function(aa){var Z=aa?this._ranges.slice(0):null;H(this);if(aa){var ab=Z.length;if(ab!=this._ranges.length){return false}while(ab--){if(!T.rangesEqual(Z[ab],this._ranges[ab])){return false}}return true}};var C=function(ad,ab){var aa=ad.getAllRanges(),ae=false;ad.removeAllRanges();for(var ac=0,Z=aa.length;ac<Z;++ac){if(ae||ab!==aa[ac]){ad.addRange(aa[ac])}else{ae=true}}if(!ad.rangeCount){J(ad)}};if(g){b.removeRange=function(ad){if(this.docSelection.type==X){var ab=this.docSelection.createRange();var Z=N(ad);var ah=d.getDocument(ab.item(0));var af=d.getBody(ah).createControlRange();var aa,ag=false;for(var ac=0,ae=ab.length;ac<ae;++ac){aa=ab.item(ac);if(aa!==Z||ag){af.add(ab.item(ac))}else{ag=true}}af.select();w(this)}else{C(this,ad)}}}else{b.removeRange=function(Z){C(this,Z)}}var u;if(!x&&M&&h.features.implementsDomRange){u=function(aa){var Z=false;if(aa.anchorNode){Z=(d.comparePoints(aa.anchorNode,aa.anchorOffset,aa.focusNode,aa.focusOffset)==1)}return Z};b.isBackwards=function(){return u(this)}}else{u=b.isBackwards=function(){return false}}b.toString=function(){var ab=[];for(var aa=0,Z=this.rangeCount;aa<Z;++aa){ab[aa]=""+this._ranges[aa]}return ab.join("")};function U(aa,Z){if(aa.anchorNode&&(d.getDocument(aa.anchorNode)!==d.getDocument(Z))){throw new Q("WRONG_DOCUMENT_ERR")}}b.collapse=function(aa,ab){U(this,aa);var Z=h.createRange(d.getDocument(aa));Z.collapseToPoint(aa,ab);this.removeAllRanges();this.addRange(Z);this.isCollapsed=true};b.collapseToStart=function(){if(this.rangeCount){var Z=this._ranges[0];this.collapse(Z.startContainer,Z.startOffset)}else{throw new Q("INVALID_STATE_ERR")}};b.collapseToEnd=function(){if(this.rangeCount){var Z=this._ranges[this.rangeCount-1];this.collapse(Z.endContainer,Z.endOffset)}else{throw new Q("INVALID_STATE_ERR")}};b.selectAllChildren=function(aa){U(this,aa);var Z=h.createRange(d.getDocument(aa));Z.selectNodeContents(aa);this.removeAllRanges();this.addRange(Z)};b.deleteFromDocument=function(){if(g&&P&&this.docSelection.type==X){var ad=this.docSelection.createRange();var ac;while(ad.length){ac=ad.item(0);ad.remove(ac);ac.parentNode.removeChild(ac)}this.refresh()}else{if(this.rangeCount){var aa=this.getAllRanges();this.removeAllRanges();for(var ab=0,Z=aa.length;ab<Z;++ab){aa[ab].deleteContents()}this.addRange(aa[Z-1])}}};b.getAllRanges=function(){return this._ranges.slice(0)};b.setSingleRange=function(Z){this.setRanges([Z])};b.containsNode=function(ac,aa){for(var ab=0,Z=this._ranges.length;ab<Z;++ab){if(this._ranges[ab].containsNode(ac,aa)){return true}}return false};b.toHtml=function(){var ac="";if(this.rangeCount){var aa=T.getRangeDocument(this._ranges[0]).createElement("div");for(var ab=0,Z=this._ranges.length;ab<Z;++ab){aa.appendChild(this._ranges[ab].cloneContents())}ac=aa.innerHTML}return ac};function v(af){var ae=[];var ac=new B(af.anchorNode,af.anchorOffset);var aa=new B(af.focusNode,af.focusOffset);var ab=(typeof af.getName=="function")?af.getName():"Selection";if(typeof af.rangeCount!="undefined"){for(var ad=0,Z=af.rangeCount;ad<Z;++ad){ae[ad]=T.inspect(af.getRangeAt(ad))}}return"["+ab+"(Ranges: "+ae.join(", ")+")(anchor: "+ac.inspect()+", focus: "+aa.inspect()+"]"}b.getName=function(){return"WrappedSelection"};b.inspect=function(){return v(this)};b.detach=function(){this.win[W]=null;this.win=this.anchorNode=this.focusNode=null};D.inspect=v;h.Selection=D;h.selectionPrototype=b;h.addCreateMissingNativeApiListener(function(Z){if(typeof Z.getSelection=="undefined"){Z.getSelection=function(){return h.getSelection(this)}}Z=null})});var Base=function(){};Base.extend=function(c,f){var g=Base.prototype.extend;Base._prototyping=true;var e=new this;g.call(e,c);e.base=function(){};delete Base._prototyping;var d=e.constructor;var b=e.constructor=function(){if(!Base._prototyping){if(this._constructing||this.constructor==b){this._constructing=true;d.apply(this,arguments);delete this._constructing}else{if(arguments[0]!=null){return(arguments[0].extend||g).call(arguments[0],e)}}}};b.ancestor=this;b.extend=this.extend;b.forEach=this.forEach;b.implement=this.implement;b.prototype=e;b.toString=this.toString;b.valueOf=function(h){return(h=="object")?b:d.valueOf()};g.call(b,f);if(typeof b.init=="function"){b.init()}return b};Base.prototype={extend:function(c,j){if(arguments.length>1){var f=this[c];if(f&&(typeof j=="function")&&(!f.valueOf||f.valueOf()!=j.valueOf())&&/\bbase\b/.test(j)){var b=j.valueOf();j=function(){var l=this.base||Base.prototype.base;this.base=f;var i=b.apply(this,arguments);this.base=l;return i};j.valueOf=function(i){return(i=="object")?j:b};j.toString=Base.toString}this[c]=j}else{if(c){var h=Base.prototype.extend;if(!Base._prototyping&&typeof this!="function"){h=this.extend||h}var e={toSource:null};var g=["constructor","toString","valueOf"];var d=Base._prototyping?0:1;while(k=g[d++]){if(c[k]!=e[k]){h.call(this,k,c[k])}}for(var k in c){if(!e[k]){h.call(this,k,c[k])}}}}return this}};Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(b,e,d){for(var c in b){if(this.prototype[c]===undefined){e.call(d,b[c],c,b)}}},implement:function(){for(var b=0;b<arguments.length;b++){if(typeof arguments[b]=="function"){arguments[b](this.prototype)}else{this.prototype.extend(arguments[b])}}return this},toString:function(){return String(this.valueOf())}});wysihtml5.browser=(function(){var g=navigator.userAgent,f=document.createElement("div"),d=g.indexOf("MSIE")!==-1&&g.indexOf("Opera")===-1,b=g.indexOf("Gecko")!==-1&&g.indexOf("KHTML")===-1,e=g.indexOf("AppleWebKit/")!==-1,h=g.indexOf("Chrome/")!==-1,c=g.indexOf("Opera/")!==-1;function i(j){return((/ipad|iphone|ipod/.test(j)&&j.match(/ os (\d+).+? like mac os x/))||[,0])[1]}return{USER_AGENT:g,supported:function(){var l=this.USER_AGENT.toLowerCase(),n="contentEditable" in f,j=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,k=document.querySelector&&document.querySelectorAll,m=(this.isIos()&&i(l)<5)||l.indexOf("opera mobi")!==-1||l.indexOf("hpwos/")!==-1;return n&&j&&k&&!m},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){var j=this.USER_AGENT.toLowerCase();return j.indexOf("webkit")!==-1&&j.indexOf("mobile")!==-1},supportsSandboxedIframes:function(){return d},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return !("querySelector" in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return !b},hasCurrentStyleProperty:function(){return"currentStyle" in f},insertsLineBreaksOnReturn:function(){return b},supportsPlaceholderAttributeOn:function(j){return"placeholder" in j},supportsEvent:function(j){return"on"+j in f||(function(){f.setAttribute("on"+j,"return;");return typeof(f["on"+j])==="function"})()},supportsEventsInIframeCorrectly:function(){return !c},firesOnDropOnlyWhenOnDragOverIsCancelled:function(){return e||b},supportsDataTransfer:function(){try{return e&&(window.Clipboard||window.DataTransfer).prototype.getData}catch(j){return false}},supportsHTML5Tags:function(l){var k=l.createElement("div"),j="<article>foo</article>";k.innerHTML=j;return k.innerHTML.toLowerCase()===j},supportsCommand:(function(){var k={formatBlock:d,insertUnorderedList:d||c||e,insertOrderedList:d||c||e};var j={insertHTML:b};return function(m,o){var r=k[o];if(!r){try{return m.queryCommandSupported(o)}catch(n){}try{return m.queryCommandEnabled(o)}catch(l){return !!j[o]}}return false}})(),doesAutoLinkingInContentEditable:function(){return d},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return b||c||e},supportsGetAttributeCorrectly:function(){var j=document.createElement("td");return j.getAttribute("rowspan")!="1"},canSelectImagesInContentEditable:function(){return b||d||c},clearsListsInContentEditableCorrectly:function(){return b||d||e},autoScrollsToCaret:function(){return !e},autoClosesUnclosedTags:function(){var l=f.cloneNode(false),j,k;l.innerHTML="<p><div></div>";k=l.innerHTML.toLowerCase();j=k==="<p></p><div></div>"||k==="<p><div></div></p>";this.autoClosesUnclosedTags=function(){return j};return j},supportsNativeGetElementsByClassName:function(){return String(document.getElementsByClassName).indexOf("[native code]")!==-1},supportsSelectionModify:function(){return"getSelection" in window&&"modify" in window.getSelection()},supportsClassList:function(){return"classList" in f},needsSpaceAfterLineBreak:function(){return c},supportsSpeechApiOn:function(j){var k=g.match(/Chrome\/(\d+)/)||[,0];return k[1]>=11&&("onwebkitspeechchange" in j||"speech" in j)},crashesWhenDefineProperty:function(j){return d&&(j==="XMLHttpRequest"||j==="XDomainRequest")},doesAsyncFocus:function(){return d},hasProblemsSettingCaretAfterImg:function(){return d},hasUndoInContextMenu:function(){return b||h||c}}})();wysihtml5.lang.array=function(b){return{contains:function(e){if(b.indexOf){return b.indexOf(e)!==-1}else{for(var c=0,d=b.length;c<d;c++){if(b[c]===e){return true}}return false}},without:function(c){c=wysihtml5.lang.array(c);var e=[],d=0,f=b.length;for(;d<f;d++){if(!c.contains(b[d])){e.push(b[d])}}return e},get:function(){var d=0,e=b.length,c=[];for(;d<e;d++){c.push(b[d])}return c}}};wysihtml5.lang.Dispatcher=Base.extend({observe:function(b,c){this.events=this.events||{};this.events[b]=this.events[b]||[];this.events[b].push(c);return this},on:function(){return this.observe.apply(this,wysihtml5.lang.array(arguments).get())},fire:function(c,e){this.events=this.events||{};var b=this.events[c]||[],d=0;for(;d<b.length;d++){b[d].call(this,e)}return this},stopObserving:function(c,e){this.events=this.events||{};var d=0,b,f;if(c){b=this.events[c]||[],f=[];for(;d<b.length;d++){if(b[d]!==e&&e){f.push(b[d])}}this.events[c]=f}else{this.events={}}return this}});wysihtml5.lang.object=function(b){return{merge:function(c){for(var d in c){b[d]=c[d]}return this},get:function(){return b},clone:function(){var c={},d;for(d in b){c[d]=b[d]}return c},isArray:function(){return Object.prototype.toString.call(b)==="[object Array]"}}};(function(){var c=/^\s+/,b=/\s+$/;wysihtml5.lang.string=function(d){d=String(d);return{trim:function(){return d.replace(c,"").replace(b,"")},interpolate:function(f){for(var e in f){d=this.replace("#{"+e+"}").by(f[e])}return d},replace:function(e){return{by:function(f){return d.split(e).join(f)}}}}}})();(function(m){var k=m.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),l=/((https?:\/\/|www\.)[^\s<]{3,})/gi,f=/([^\w\/\-](,?))$/i,d=100,g={")":"(","]":"[","}":"{"};function c(n){if(j(n)){return n}if(n===n.ownerDocument.documentElement){n=n.ownerDocument.body}return b(n)}function h(n){return n.replace(l,function(s,r){var u=(r.match(f)||[])[1]||"",o=g[u];r=r.replace(f,"");if(r.split(o).length>r.split(u).length){r=r+u;u=""}var t=r,v=r;if(r.length>d){v=v.substr(0,d)+"..."}if(t.substr(0,4)==="www."){t="http://"+t}return'<a href="'+t+'">'+v+"</a>"+u})}function e(o){var n=o._wysihtml5_tempElement;if(!n){n=o._wysihtml5_tempElement=o.createElement("div")}return n}function i(r){var o=r.parentNode,n=e(o.ownerDocument);n.innerHTML="<span></span>"+h(r.data);n.removeChild(n.firstChild);while(n.firstChild){o.insertBefore(n.firstChild,r)}o.removeChild(r)}function j(n){var o;while(n.parentNode){n=n.parentNode;o=n.nodeName;if(k.contains(o)){return true}else{if(o==="body"){return false}}}return false}function b(o){if(k.contains(o.nodeName)){return}if(o.nodeType===m.TEXT_NODE&&o.data.match(l)){i(o);return}var s=m.lang.array(o.childNodes).get(),r=s.length,n=0;for(;n<r;n++){b(s[n])}return o}m.dom.autoLink=c;m.dom.autoLink.URL_REG_EXP=l})(wysihtml5);(function(d){var c=d.browser.supportsClassList(),b=d.dom;b.addClass=function(e,f){if(c){return e.classList.add(f)}if(b.hasClass(e,f)){return}e.className+=" "+f};b.removeClass=function(e,f){if(c){return e.classList.remove(f)}e.className=e.className.replace(new RegExp("(^|\\s+)"+f+"(\\s+|$)")," ")};b.hasClass=function(e,f){if(c){return e.classList.contains(f)}var g=e.className;return(g.length>0&&(g==f||new RegExp("(^|\\s)"+f+"(\\s|$)").test(g)))}})(wysihtml5);wysihtml5.dom.contains=(function(){var b=document.documentElement;if(b.contains){return function(c,d){if(d.nodeType!==wysihtml5.ELEMENT_NODE){d=d.parentNode}return c!==d&&c.contains(d)}}else{if(b.compareDocumentPosition){return function(c,d){return !!(c.compareDocumentPosition(d)&16)}}}})();wysihtml5.dom.convertToList=(function(){function c(g,f){var e=g.createElement("li");f.appendChild(e);return e}function d(f,e){return f.createElement(e)}function b(g,o){if(g.nodeName==="UL"||g.nodeName==="OL"||g.nodeName==="MENU"){return g}var s=g.ownerDocument,l=d(s,o),m=g.querySelectorAll("br"),k=m.length,u,t,e,n,j,v,h,r,f;for(f=0;f<k;f++){n=m[f];while((j=n.parentNode)&&j!==g&&j.lastChild===n){if(wysihtml5.dom.getStyle("display").from(j)==="block"){j.removeChild(n);break}wysihtml5.dom.insert(n).after(n.parentNode)}}u=wysihtml5.lang.array(g.childNodes).get();t=u.length;for(f=0;f<t;f++){r=r||c(s,l);e=u[f];v=wysihtml5.dom.getStyle("display").from(e)==="block";h=e.nodeName==="BR";if(v){r=r.firstChild?c(s,l):r;r.appendChild(e);r=null;continue}if(h){r=r.firstChild?null:r;continue}r.appendChild(e)}g.parentNode.replaceChild(l,g);return l}return b})();wysihtml5.dom.copyAttributes=function(b){return{from:function(c){return{to:function(d){var g,e=0,f=b.length;for(;e<f;e++){g=b[e];if(typeof(c[g])!=="undefined"&&c[g]!==""){d[g]=c[g]}}return{andTo:arguments.callee}}}}}};(function(c){var e=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"];var d=function(f){if(b(f)){return parseInt(c.getStyle("width").from(f),10)<f.offsetWidth}return false};var b=function(g){var f=0,h=e.length;for(;f<h;f++){if(c.getStyle(e[f]).from(g)==="border-box"){return e[f]}}};c.copyStyles=function(f){return{from:function(h){if(d(h)){f=wysihtml5.lang.array(f).without(e)}var j="",k=f.length,g=0,l;for(;g<k;g++){l=f[g];j+=l+":"+c.getStyle(l).from(h)+";"}return{to:function(i){c.setStyles(j).on(i);return{andTo:arguments.callee}}}}}}})(wysihtml5.dom);(function(b){b.dom.delegate=function(d,c,e,f){return b.dom.observe(d,e,function(h){var i=h.target,g=b.lang.array(d.querySelectorAll(c));while(i&&i!==d){if(g.contains(i)){f.call(i,h);break}i=i.parentNode}})}})(wysihtml5);wysihtml5.dom.getAsDom=(function(){var b=function(h,g){var f=g.createElement("div");f.style.display="none";g.body.appendChild(f);try{f.innerHTML=h}catch(i){}g.body.removeChild(f);return f};var d=function(f){if(f._wysihtml5_supportsHTML5Tags){return}for(var e=0,g=c.length;e<g;e++){f.createElement(c[e])}f._wysihtml5_supportsHTML5Tags=true};var c=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(g,f){f=f||document;var e;if(typeof(g)==="object"&&g.nodeType){e=f.createElement("div");e.appendChild(g)}else{if(wysihtml5.browser.supportsHTML5Tags(f)){e=f.createElement("div");e.innerHTML=g}else{d(f);e=b(g,f)}}return e}})();wysihtml5.dom.getParentElement=(function(){function b(h,g){if(!g||!g.length){return true}if(typeof(g)==="string"){return h===g}else{return wysihtml5.lang.array(g).contains(h)}}function d(g){return g.nodeType===wysihtml5.ELEMENT_NODE}function c(g,h,i){var j=(g.className||"").match(i)||[];if(!h){return !!j.length}return j[j.length-1]===h}function f(g,i,h){while(h--&&g&&g.nodeName!=="BODY"){if(b(g.nodeName,i)){return g}g=g.parentNode}return null}function e(h,k,g,j,i){while(i--&&h&&h.nodeName!=="BODY"){if(d(h)&&b(h.nodeName,k)&&c(h,g,j)){return h}h=h.parentNode}return null}return function(h,g,i){i=i||50;if(g.className||g.classRegExp){return e(h,g.nodeName,g.className,g.classRegExp,i)}else{return f(h,g.nodeName,i)}}})();wysihtml5.dom.getStyle=(function(){var c={"float":("styleFloat" in document.createElement("div").style)?"styleFloat":"cssFloat"},d=/\-[a-z]/g;function b(e){return e.replace(d,function(f){return f.charAt(1).toUpperCase()})}return function(e){return{from:function(j){if(j.nodeType!==wysihtml5.ELEMENT_NODE){return}var o=j.ownerDocument,k=c[e]||b(e),g=j.style,h=j.currentStyle,r=g[k];if(r){return r}if(h){try{return h[k]}catch(m){}}var l=o.defaultView||o.parentWindow,n=(e==="height"||e==="width")&&j.nodeName==="TEXTAREA",i,f;if(l.getComputedStyle){if(n){i=g.overflow;g.overflow="hidden"}f=l.getComputedStyle(j,null).getPropertyValue(e);if(n){g.overflow=i||""}return f}}}}})();wysihtml5.dom.hasElementWithTagName=(function(){var d={},c=1;function b(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=c++)}return function(g,f){var e=b(g)+":"+f,h=d[e];if(!h){h=d[e]=g.getElementsByTagName(f)}return h.length>0}})();(function(e){var d={},c=1;function b(f){return f._wysihtml5_identifier||(f._wysihtml5_identifier=c++)}e.dom.hasElementWithClassName=function(h,g){if(!e.browser.supportsNativeGetElementsByClassName()){return !!h.querySelector("."+g)}var f=b(h)+":"+g,i=d[f];if(!i){i=d[f]=h.getElementsByClassName(g)}return i.length>0}})(wysihtml5);wysihtml5.dom.insert=function(b){return{after:function(c){c.parentNode.insertBefore(b,c.nextSibling)},before:function(c){c.parentNode.insertBefore(b,c)},into:function(c){c.appendChild(b)}}};wysihtml5.dom.insertCSS=function(b){b=b.join("\n");return{into:function(e){var d=e.head||e.getElementsByTagName("head")[0],c=e.createElement("style");c.type="text/css";if(c.styleSheet){c.styleSheet.cssText=b}else{c.appendChild(e.createTextNode(b))}if(d){d.appendChild(c)}}}};wysihtml5.dom.observe=function(d,h,e){h=typeof(h)==="string"?[h]:h;var g,b,c=0,f=h.length;for(;c<f;c++){b=h[c];if(d.addEventListener){d.addEventListener(b,e,false)}else{g=function(i){if(!("target" in i)){i.target=i.srcElement}i.preventDefault=i.preventDefault||function(){this.returnValue=false};i.stopPropagation=i.stopPropagation||function(){this.cancelBubble=true};e.call(d,i)};d.attachEvent("on"+b,g)}}return{stop:function(){var j,k=0,l=h.length;for(;k<l;k++){j=h[k];if(d.removeEventListener){d.removeEventListener(j,e,false)}else{d.detachEvent("on"+j,g)}}}}};wysihtml5.dom.parse=(function(){var b={"1":f,"3":m},r="span",h=/\s+/,k={tags:{},classes:{}},o={};function e(x,A,s,u){wysihtml5.lang.object(o).merge(k).merge(A).get();s=s||x.ownerDocument||document;var w=s.createDocumentFragment(),t=typeof(x)==="string",v,z,y;if(t){v=wysihtml5.dom.getAsDom(x,s)}else{v=x}while(v.firstChild){y=v.firstChild;v.removeChild(y);z=g(y,u);if(z){w.appendChild(z)}}v.innerHTML="";v.appendChild(w);return t?wysihtml5.quirks.getCorrectInnerHTML(v):v}function g(y,x){var w=y.nodeType,v=y.childNodes,u=v.length,t,z=b[w],s=0;t=z&&z(y);if(!t){return null}for(s=0;s<u;s++){newChild=g(v[s],x);if(newChild){t.appendChild(newChild)}}if(x&&t.childNodes.length<=1&&t.nodeName.toLowerCase()===r&&!t.attributes.length){return t.firstChild}return t}function f(x){var w,v,u,t=o.tags,y=x.nodeName.toLowerCase(),s=x.scopeName;if(x._wysihtml5){return null}x._wysihtml5=1;if(x.className==="wysihtml5-temp"){return null}if(s&&s!="HTML"){y=s+":"+y}if("outerHTML" in x){if(!wysihtml5.browser.autoClosesUnclosedTags()&&x.nodeName==="P"&&x.outerHTML.slice(-4).toLowerCase()!=="</p>"){y="div"}}if(y in t){w=t[y];if(!w||w.remove){return null}w=typeof(w)==="string"?{rename_tag:w}:w}else{if(x.firstChild){w={rename_tag:r}}else{return null}}v=x.ownerDocument.createElement(w.rename_tag||y);c(x,v,w);x=null;return v}function c(F,s,y){var B={},M=y.set_class,D=y.add_class,I=y.set_attributes,x=y.check_attributes,w=o.classes,H=0,K=[],N=[],v=[],G=[],z,C,u,A,E,L,t;if(I){B=wysihtml5.lang.object(I).clone()}if(x){for(E in x){t=i[x[E]];if(!t){continue}L=t(j(F,E));if(typeof(L)==="string"){B[E]=L}}}if(M){K.push(M)}if(D){for(E in D){t=l[D[E]];if(!t){continue}A=t(j(F,E));if(typeof(A)==="string"){K.push(A)}}}w["_wysihtml5-temp-placeholder"]=1;G=F.getAttribute("class");if(G){K=K.concat(G.split(h))}z=K.length;for(;H<z;H++){u=K[H];if(w[u]){N.push(u)}}C=N.length;while(C--){u=N[C];if(!wysihtml5.lang.array(v).contains(u)){v.unshift(u)}}if(v.length){B["class"]=v.join(" ")}for(E in B){try{s.setAttribute(E,B[E])}catch(J){}}if(B.src){if(typeof(B.width)!=="undefined"){s.setAttribute("width",B.width)}if(typeof(B.height)!=="undefined"){s.setAttribute("height",B.height)}}}var n=!wysihtml5.browser.supportsGetAttributeCorrectly();function j(u,t){t=t.toLowerCase();var w=u.nodeName;if(w=="IMG"&&t=="src"&&d(u)===true){return u.src}else{if(n&&"outerHTML" in u){var v=u.outerHTML.toLowerCase(),s=v.indexOf(" "+t+"=")!=-1;return s?u.getAttribute(t):null}else{return u.getAttribute(t)}}}function d(s){try{return s.complete&&!s.mozMatchesSelector(":-moz-broken")}catch(t){if(s.complete&&s.readyState==="complete"){return true}}}function m(s){return s.ownerDocument.createTextNode(s.data)}var i={url:(function(){var s=/^https?:\/\//i;return function(t){if(!t||!t.match(s)){return null}return t.replace(s,function(u){return u.toLowerCase()})}})(),alt:(function(){var s=/[^ a-z0-9_\-]/gi;return function(t){if(!t){return""}return t.replace(s,"")}})(),numbers:(function(){var s=/\D/g;return function(t){t=(t||"").replace(s,"");return t||null}})()};var l={align_img:(function(){var s={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(t){return s[String(t).toLowerCase()]}})(),align_text:(function(){var s={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(t){return s[String(t).toLowerCase()]}})(),clear_br:(function(){var s={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(t){return s[String(t).toLowerCase()]}})(),size_font:(function(){var s={"1":"wysiwyg-font-size-xx-small","2":"wysiwyg-font-size-small","3":"wysiwyg-font-size-medium","4":"wysiwyg-font-size-large","5":"wysiwyg-font-size-x-large","6":"wysiwyg-font-size-xx-large","7":"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(t){return s[String(t).charAt(0)]}})()};return e})();wysihtml5.dom.removeEmptyTextNodes=function(d){var c,f=wysihtml5.lang.array(d.childNodes).get(),e=f.length,b=0;for(;b<e;b++){c=f[b];if(c.nodeType===wysihtml5.TEXT_NODE&&c.data===""){c.parentNode.removeChild(c)}}};wysihtml5.dom.renameElement=function(b,c){var e=b.ownerDocument.createElement(c),d;while(d=b.firstChild){e.appendChild(d)}wysihtml5.dom.copyAttributes(["align","className"]).from(b).to(e);b.parentNode.replaceChild(e,b);return e};wysihtml5.dom.replaceWithChildNodes=function(c){if(!c.parentNode){return}if(!c.firstChild){c.parentNode.removeChild(c);return}var b=c.ownerDocument.createDocumentFragment();while(c.firstChild){b.appendChild(c.firstChild)}c.parentNode.replaceChild(b,c);c=b=null};(function(f){function d(g){return f.getStyle("display").from(g)==="block"}function e(g){return g.nodeName==="BR"}function c(h){var g=h.ownerDocument.createElement("br");h.appendChild(g)}function b(l){if(l.nodeName!=="MENU"&&l.nodeName!=="UL"&&l.nodeName!=="OL"){return}var o=l.ownerDocument,m=o.createDocumentFragment(),h=l.previousElementSibling||l.previousSibling,n,i,j,k,g;if(h&&!d(h)){c(m)}while(g=l.firstChild){i=g.lastChild;while(n=g.firstChild){j=n===i;k=j&&!d(n)&&!e(n);m.appendChild(n);if(k){c(m)}}g.parentNode.removeChild(g)}l.parentNode.replaceChild(m,l)}f.resolveList=b})(wysihtml5.dom);(function(f){var e=document,d=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],c=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],b=["referrer","write","open","close"];f.dom.Sandbox=Base.extend({constructor:function(h,g){this.callback=h||f.EMPTY_FUNCTION;this.config=f.lang.object({}).merge(g).get();this.iframe=this._createIframe()},insertInto:function(g){if(typeof(g)==="string"){g=e.getElementById(g)}g.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var g=this.getIframe();g.parentNode.removeChild(g)},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var h=this,g=e.createElement("iframe");g.className="wysihtml5-sandbox";f.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(g);if(f.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()){g.src="javascript:'<html></html>'"}g.onload=function(){g.onreadystatechange=g.onload=null;h._onLoadIframe(g)};g.onreadystatechange=function(){if(/loaded|complete/.test(g.readyState)){g.onreadystatechange=g.onload=null;h._onLoadIframe(g)}};return g},_onLoadIframe:function(j){if(!f.dom.contains(e.documentElement,j)){return}var m=this,g=j.contentWindow,n=j.contentWindow.document,o=e.characterSet||e.charset||"utf-8",l=this._getHtml({charset:o,stylesheets:this.config.stylesheets});n.open("text/html","replace");n.write(l);n.close();this.getWindow=function(){return j.contentWindow};this.getDocument=function(){return j.contentWindow.document};g.onerror=function(r,s,i){throw new Error("wysihtml5.Sandbox: "+r,s,i)};if(!f.browser.supportsSandboxedIframes()){var h,k;for(h=0,k=d.length;h<k;h++){this._unset(g,d[h])}for(h=0,k=c.length;h<k;h++){this._unset(g,c[h],f.EMPTY_FUNCTION)}for(h=0,k=b.length;h<k;h++){this._unset(n,b[h])}this._unset(n,"cookie","",true)}this.loaded=true;setTimeout(function(){m.callback(m)},0)},_getHtml:function(k){var l=k.stylesheets,h="",g=0,j;l=typeof(l)==="string"?[l]:l;if(l){j=l.length;for(;g<j;g++){h+='<link rel="stylesheet" href="'+l[g]+'">'}}k.stylesheets=h;return f.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(k)},_unset:function(h,j,i,l){try{h[j]=i}catch(k){}try{h.__defineGetter__(j,function(){return i})}catch(k){}if(l){try{h.__defineSetter__(j,function(){})}catch(k){}}if(!f.browser.crashesWhenDefineProperty(j)){try{var g={get:function(){return i}};if(l){g.set=function(){}}Object.defineProperty(h,j,g)}catch(k){}}}})})(wysihtml5);(function(){var b={className:"class"};wysihtml5.dom.setAttributes=function(c){return{on:function(e){for(var d in c){e.setAttribute(b[d]||d,c[d])}}}}})();wysihtml5.dom.setStyles=function(b){return{on:function(d){var e=d.style;if(typeof(b)==="string"){e.cssText+=";"+b;return}for(var c in b){if(c==="float"){e.cssFloat=b[c];e.styleFloat=b[c]}else{e[c]=b[c]}}}}};(function(b){b.simulatePlaceholder=function(e,c,d){var f="placeholder",g=function(){if(c.hasPlaceholderSet()){c.clear()}b.removeClass(c.element,f)},h=function(){if(c.isEmpty()){c.setValue(d);b.addClass(c.element,f)}};e.observe("set_placeholder",h).observe("unset_placeholder",g).observe("focus:composer",g).observe("paste:composer",g).observe("blur:composer",h);h()}})(wysihtml5.dom);(function(c){var b=document.documentElement;if("textContent" in b){c.setTextContent=function(d,e){d.textContent=e};c.getTextContent=function(d){return d.textContent}}else{if("innerText" in b){c.setTextContent=function(d,e){d.innerText=e};c.getTextContent=function(d){return d.innerText}}else{c.setTextContent=function(d,e){d.nodeValue=e};c.getTextContent=function(d){return d.nodeValue}}}})(wysihtml5.dom);wysihtml5.quirks.cleanPastedHTML=(function(){var b={"a u":wysihtml5.dom.replaceWithChildNodes};function c(m,n,e){n=n||b;e=e||m.ownerDocument||document;var k,f=typeof(m)==="string",d,l,o,h,g=0;if(f){k=wysihtml5.dom.getAsDom(m,e)}else{k=m}for(h in n){l=k.querySelectorAll(h);d=n[h];o=l.length;for(;g<o;g++){d(l[g])}}l=m=n=null;return f?k.innerHTML:k}return c})();(function(c){var b=c.dom;c.quirks.ensureProperClearing=(function(){var d=function(f){var e=this;setTimeout(function(){var g=e.innerHTML.toLowerCase();if(g=="<p>&nbsp;</p>"||g=="<p>&nbsp;</p><p>&nbsp;</p>"){e.innerHTML=""}},0)};return function(e){b.observe(e.element,["cut","keydown"],d)}})();c.quirks.ensureProperClearingOfLists=(function(){var e=["OL","UL","MENU"];var d=function(h,f){if(!f.firstChild||!c.lang.array(e).contains(f.firstChild.nodeName)){return}var j=b.getParentElement(h,{nodeName:e});if(!j){return}var i=j==f.firstChild;if(!i){return}var k=j.childNodes.length<=1;if(!k){return}var g=j.firstChild?j.firstChild.innerHTML==="":true;if(!g){return}j.parentNode.removeChild(j)};return function(f){b.observe(f.element,"keydown",function(h){if(h.keyCode!==c.BACKSPACE_KEY){return}var g=f.selection.getSelectedNode();d(g,f.element)})}})()})(wysihtml5);(function(c){var b="%7E";c.quirks.getCorrectInnerHTML=function(f){var k=f.innerHTML;if(k.indexOf(b)===-1){return k}var h=f.querySelectorAll("[href*='~'], [src*='~']"),d,j,g,e;for(e=0,g=h.length;e<g;e++){d=h[e].href||h[e].src;j=c.lang.string(d).replace("~").by(b);k=c.lang.string(k).replace(j).by(d)}return k}})(wysihtml5);(function(e){var d=e.dom,c=["LI","P","H1","H2","H3","H4","H5","H6"],b=["UL","OL","MENU"];e.quirks.insertLineBreakOnReturn=function(h){function f(k){var i=d.getParentElement(k,{nodeName:["P","DIV"]},2);if(!i){return}var j=document.createTextNode(e.INVISIBLE_SPACE);d.insert(j).before(i);d.replaceWithChildNodes(i);h.selection.selectNode(j)}function g(j){var l=j.keyCode;if(j.shiftKey||(l!==e.ENTER_KEY&&l!==e.BACKSPACE_KEY)){return}var i=j.target,k=h.selection.getSelectedNode(),m=d.getParentElement(k,{nodeName:c},4);if(m){if(m.nodeName==="LI"&&(l===e.ENTER_KEY||l===e.BACKSPACE_KEY)){setTimeout(function(){var o=h.selection.getSelectedNode(),n,r;if(!o){return}n=d.getParentElement(o,{nodeName:b},2);if(n){return}f(o)},0)}else{if(m.nodeName.match(/H[1-6]/)&&l===e.ENTER_KEY){setTimeout(function(){f(h.selection.getSelectedNode())},0)}}return}if(l===e.ENTER_KEY&&!e.browser.insertsLineBreaksOnReturn()){h.commands.exec("insertLineBreak");j.preventDefault()}}d.observe(h.element.ownerDocument,"keydown",g)}})(wysihtml5);(function(c){var b="wysihtml5-quirks-redraw";c.quirks.redraw=function(d){c.dom.addClass(d,b);c.dom.removeClass(d,b);try{var g=d.ownerDocument;g.execCommand("italic",false,null);g.execCommand("italic",false,null)}catch(f){}}})(wysihtml5);(function(d){var c=d.dom;function b(e){var f=0;if(e.parentNode){do{f+=e.offsetTop||0;e=e.offsetParent}while(e)}return f}d.Selection=Base.extend({constructor:function(e){window.rangy.init();this.editor=e;this.composer=e.composer;this.doc=this.composer.doc},getBookmark:function(){var e=this.getRange();return e&&e.cloneRange()},setBookmark:function(e){if(!e){return}this.setSelection(e)},setBefore:function(f){var e=rangy.createRange(this.doc);e.setStartBefore(f);e.setEndBefore(f);return this.setSelection(e)},setAfter:function(f){var e=rangy.createRange(this.doc);e.setStartAfter(f);e.setEndAfter(f);return this.setSelection(e)},selectNode:function(f){var h=rangy.createRange(this.doc),k=f.nodeType===d.ELEMENT_NODE,m="canHaveHTML" in f?f.canHaveHTML:(f.nodeName!=="IMG"),j=k?f.innerHTML:f.data,g=(j===""||j===d.INVISIBLE_SPACE),l=c.getStyle("display").from(f),n=(l==="block"||l==="list-item");if(g&&k&&m){try{f.innerHTML=d.INVISIBLE_SPACE}catch(i){}}if(m){h.selectNodeContents(f)}else{h.selectNode(f)}if(m&&g&&k){h.collapse(n)}else{if(m&&g){h.setStartAfter(f);h.setEndAfter(f)}}this.setSelection(h)},getSelectedNode:function(f){var g,e;if(f&&this.doc.selection&&this.doc.selection.type==="Control"){e=this.doc.selection.createRange();if(e&&e.length){return e.item(0)}}g=this.getSelection(this.doc);if(g.focusNode===g.anchorNode){return g.focusNode}else{e=this.getRange(this.doc);return e?e.commonAncestorContainer:this.doc.body}},executeAndRestore:function(e,o){var i=this.doc.body,g=o&&i.scrollTop,j=o&&i.scrollLeft,m="_wysihtml5-temp-placeholder",r='<span class="'+m+'">'+d.INVISIBLE_SPACE+"</span>",h=this.getRange(this.doc),n;if(!h){e(i,i);return}var f=h.createContextualFragment(r);h.insertNode(f);try{e(h.startContainer,h.endContainer)}catch(l){setTimeout(function(){throw l},0)}caretPlaceholder=this.doc.querySelector("."+m);if(caretPlaceholder){n=rangy.createRange(this.doc);n.selectNode(caretPlaceholder);n.deleteContents();this.setSelection(n)}else{i.focus()}if(o){i.scrollTop=g;i.scrollLeft=j}try{caretPlaceholder.parentNode.removeChild(caretPlaceholder)}catch(k){}},executeAndRestoreSimple:function(f){var i=this.getRange(),j=this.doc.body,s,g,h,m,k;if(!i){f(j,j);return}m=i.getNodes([3]);g=m[0]||i.startContainer;h=m[m.length-1]||i.endContainer;k={collapsed:i.collapsed,startContainer:g,startOffset:g===i.startContainer?i.startOffset:0,endContainer:h,endOffset:h===i.endContainer?i.endOffset:h.length};try{f(i.startContainer,i.endContainer)}catch(l){setTimeout(function(){throw l},0)}s=rangy.createRange(this.doc);try{s.setStart(k.startContainer,k.startOffset)}catch(r){}try{s.setEnd(k.endContainer,k.endOffset)}catch(o){}try{this.setSelection(s)}catch(n){}},insertHTML:function(f){var e=rangy.createRange(this.doc),h=e.createContextualFragment(f),g=h.lastChild;this.insertNode(h);if(g){this.setAfter(g)}},insertNode:function(f){var e=this.getRange();if(e){e.insertNode(f)}},surround:function(g){var f=this.getRange();if(!f){return}try{f.surroundContents(g);this.selectNode(g)}catch(h){g.appendChild(f.extractContents());f.insertNode(g)}},scrollIntoView:function(){var h=this.doc,g=h.documentElement.scrollHeight>h.documentElement.offsetHeight,e=h._wysihtml5ScrollIntoViewElement=h._wysihtml5ScrollIntoViewElement||(function(){var i=h.createElement("span");i.innerHTML=d.INVISIBLE_SPACE;return i})(),f;if(g){this.insertNode(e);f=b(e);e.parentNode.removeChild(e);if(f>h.body.scrollTop){h.body.scrollTop=f}}},selectLine:function(){if(d.browser.supportsSelectionModify()){this._selectLine_W3C()}else{if(this.doc.selection){this._selectLine_MSIE()}}},_selectLine_W3C:function(){var f=this.doc.defaultView,e=f.getSelection();e.modify("extend","left","lineboundary");e.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var m=this.doc.selection.createRange(),k=m.boundingTop,s=m.boundingHeight,l=this.doc.body.scrollWidth,f,e,n,h,g;if(!m.moveToPoint){return}if(k===0){n=this.doc.createElement("span");this.insertNode(n);k=n.offsetTop;n.parentNode.removeChild(n)}k+=1;for(h=-10;h<l;h+=2){try{m.moveToPoint(h,k);break}catch(r){}}f=k;e=this.doc.selection.createRange();for(g=l;g>=0;g--){try{e.moveToPoint(g,f);break}catch(o){}}m.setEndPoint("EndToEnd",e);m.select()},getText:function(){var e=this.getSelection();return e?e.toString():""},getNodes:function(e,g){var f=this.getRange();if(f){return f.getNodes([e],g)}else{return[]}},getRange:function(){var e=this.getSelection();return e&&e.rangeCount&&e.getRangeAt(0)},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(e){var g=this.doc.defaultView||this.doc.parentWindow,f=rangy.getSelection(g);return f.setSingleRange(e)}})})(wysihtml5);(function(o,k){var i="span";var g=/\s+/g;function e(t,r,s){if(!t.className){return false}var u=t.className.match(s)||[];return u[u.length-1]===r}function j(t,r,s){if(t.className){m(t,s);t.className+=" "+r}else{t.className=r}}function m(s,r){if(s.className){s.className=s.className.replace(r,"")}}function n(s,r){return s.className.replace(g," ")==r.className.replace(g," ")}function b(s){var r=s.parentNode;while(s.firstChild){r.insertBefore(s.firstChild,s)}r.removeChild(s)}function f(x,v){if(x.attributes.length!=v.attributes.length){return false}for(var w=0,r=x.attributes.length,u,s,t;w<r;++w){u=x.attributes[w];t=u.name;if(t!="class"){s=v.attributes.getNamedItem(t);if(u.specified!=s.specified){return false}if(u.specified&&u.nodeValue!==s.nodeValue){return false}}}return true}function d(r,s){if(k.dom.isCharacterDataNode(r)){if(s==0){return !!r.previousSibling}else{if(s==r.length){return !!r.nextSibling}else{return true}}}return s>0&&s<r.childNodes.length}function c(u,s,t){var r;if(k.dom.isCharacterDataNode(s)){if(t==0){t=k.dom.getNodeIndex(s);s=s.parentNode}else{if(t==s.length){t=k.dom.getNodeIndex(s)+1;s=s.parentNode}else{r=k.dom.splitDataNode(s,t)}}}if(!r){r=s.cloneNode(false);if(r.id){r.removeAttribute("id")}var v;while((v=s.childNodes[t])){r.appendChild(v)}k.dom.insertAfter(r,s)}return(s==u)?r:c(u,r.parentNode,k.dom.getNodeIndex(r))}function h(r){this.isElementMerge=(r.nodeType==o.ELEMENT_NODE);this.firstTextNode=this.isElementMerge?r.lastChild:r;this.textNodes=[this.firstTextNode]}h.prototype={doMerge:function(){var w=[],v,t,u;for(var s=0,r=this.textNodes.length;s<r;++s){v=this.textNodes[s];t=v.parentNode;w[s]=v.data;if(s){t.removeChild(v);if(!t.hasChildNodes()){t.parentNode.removeChild(t)}}}this.firstTextNode.data=u=w.join("");return u},getLength:function(){var s=this.textNodes.length,r=0;while(s--){r+=this.textNodes[s].length}return r},toString:function(){var t=[];for(var s=0,r=this.textNodes.length;s<r;++s){t[s]="'"+this.textNodes[s].data+"'"}return"[Merge("+t.join(",")+")]"}};function l(r,t,s,u){this.tagNames=r||[i];this.cssClass=t||"";this.similarClassRegExp=s;this.normalize=u;this.applyToAnyTagName=false}l.prototype={getAncestorWithClass:function(s){var r;while(s){r=this.cssClass?e(s,this.cssClass,this.similarClassRegExp):true;if(s.nodeType==o.ELEMENT_NODE&&k.dom.arrayContains(this.tagNames,s.tagName.toLowerCase())&&r){return s}s=s.parentNode}return false},postApply:function(D,z){var r=D[0],s=D[D.length-1];var u=[],E;var w=r,t=s;var B=0,F=s.length;var v,y;for(var x=0,A=D.length;x<A;++x){v=D[x];y=this.getAdjacentMergeableTextNode(v.parentNode,false);if(y){if(!E){E=new h(y);u.push(E)}E.textNodes.push(v);if(v===r){w=E.firstTextNode;B=w.length}if(v===s){t=E.firstTextNode;F=E.getLength()}}else{E=null}}var C=this.getAdjacentMergeableTextNode(s.parentNode,true);if(C){if(!E){E=new h(s);u.push(E)}E.textNodes.push(C)}if(u.length){for(x=0,A=u.length;x<A;++x){u[x].doMerge()}z.setStart(w,B);z.setEnd(t,F)}},getAdjacentMergeableTextNode:function(t,r){var v=(t.nodeType==o.TEXT_NODE);var s=v?t.parentNode:t;var w;var u=r?"nextSibling":"previousSibling";if(v){w=t[u];if(w&&w.nodeType==o.TEXT_NODE){return w}}else{w=s[u];if(w&&this.areElementsMergeable(t,w)){return w[r?"firstChild":"lastChild"]}}return null},areElementsMergeable:function(s,r){return k.dom.arrayContains(this.tagNames,(s.tagName||"").toLowerCase())&&k.dom.arrayContains(this.tagNames,(r.tagName||"").toLowerCase())&&n(s,r)&&f(s,r)},createContainer:function(s){var r=s.createElement(this.tagNames[0]);if(this.cssClass){r.className=this.cssClass}return r},applyToTextNode:function(t){var s=t.parentNode;if(s.childNodes.length==1&&k.dom.arrayContains(this.tagNames,s.tagName.toLowerCase())){if(this.cssClass){j(s,this.cssClass,this.similarClassRegExp)}}else{var r=this.createContainer(k.dom.getDocument(t));t.parentNode.insertBefore(r,t);r.appendChild(t)}},isRemovable:function(r){return k.dom.arrayContains(this.tagNames,r.tagName.toLowerCase())&&o.lang.string(r.className).trim()==this.cssClass},undoToTextNode:function(u,s,t){if(!s.containsNode(t)){var r=s.cloneRange();r.selectNode(t);if(r.isPointInRange(s.endContainer,s.endOffset)&&d(s.endContainer,s.endOffset)){c(t,s.endContainer,s.endOffset);s.setEndAfter(t)}if(r.isPointInRange(s.startContainer,s.startOffset)&&d(s.startContainer,s.startOffset)){t=c(t,s.startContainer,s.startOffset)}}if(this.similarClassRegExp){m(t,this.similarClassRegExp)}if(this.isRemovable(t)){b(t)}},applyToRange:function(s){var v=s.getNodes([o.TEXT_NODE]);if(!v.length){try{var u=this.createContainer(s.endContainer.ownerDocument);s.surroundContents(u);this.selectNode(s,u);return}catch(w){}}s.splitBoundaries();v=s.getNodes([o.TEXT_NODE]);if(v.length){var x;for(var t=0,r=v.length;t<r;++t){x=v[t];if(!this.getAncestorWithClass(x)){this.applyToTextNode(x)}}s.setStart(v[0],0);x=v[v.length-1];s.setEnd(x,x.length);if(this.normalize){this.postApply(v,s)}}},undoToRange:function(s){var v=s.getNodes([o.TEXT_NODE]),y,w;if(v.length){s.splitBoundaries();v=s.getNodes([o.TEXT_NODE])}else{var x=s.endContainer.ownerDocument,u=x.createTextNode(o.INVISIBLE_SPACE);s.insertNode(u);s.selectNode(u);v=[u]}for(var t=0,r=v.length;t<r;++t){y=v[t];w=this.getAncestorWithClass(y);if(w){this.undoToTextNode(y,s,w)}}if(r==1){this.selectNode(s,v[0])}else{s.setStart(v[0],0);y=v[v.length-1];s.setEnd(y,y.length);if(this.normalize){this.postApply(v,s)}}},selectNode:function(s,v){var u=v.nodeType===o.ELEMENT_NODE,r="canHaveHTML" in v?v.canHaveHTML:true,t=u?v.innerHTML:v.data,x=(t===""||t===o.INVISIBLE_SPACE);if(x&&u&&r){try{v.innerHTML=o.INVISIBLE_SPACE}catch(w){}}s.selectNodeContents(v);if(x&&u){s.collapse(false)}else{if(x){s.setStartAfter(v);s.setEndAfter(v)}}},getTextSelectedByRange:function(v,r){var s=r.cloneRange();s.selectNodeContents(v);var t=s.intersection(r);var u=t?t.toString():"";s.detach();return u},isAppliedToRange:function(s){var v=[],u,w=s.getNodes([o.TEXT_NODE]);if(!w.length){u=this.getAncestorWithClass(s.startContainer);return u?[u]:false}for(var t=0,r=w.length,x;t<r;++t){x=this.getTextSelectedByRange(w[t],s);u=this.getAncestorWithClass(w[t]);if(x!=""&&!u){return false}else{v.push(u)}}return v},toggleRange:function(r){if(this.isAppliedToRange(r)){this.undoToRange(r)}else{this.applyToRange(r)}}};o.selection.HTMLApplier=l})(wysihtml5,rangy);wysihtml5.Commands=Base.extend({constructor:function(b){this.editor=b;this.composer=b.composer;this.doc=this.composer.doc},support:function(b){return wysihtml5.browser.supportsCommand(this.doc,b)},exec:function(h,d){var g=wysihtml5.commands[h],c=wysihtml5.lang.array(arguments).get(),i=g&&g.exec,b=null;this.editor.fire("beforecommand:composer");if(i){c.unshift(this.composer);b=i.apply(g,c)}else{try{b=this.doc.execCommand(h,false,d)}catch(f){}}this.editor.fire("aftercommand:composer");return b},state:function(g,b){var f=wysihtml5.commands[g],c=wysihtml5.lang.array(arguments).get(),h=f&&f.state;if(h){c.unshift(this.composer);return h.apply(f,c)}else{try{return this.doc.queryCommandState(g)}catch(d){return false}}},value:function(d){var c=wysihtml5.commands[d],f=c&&c.value;if(f){return f.call(c,this.composer,d)}else{try{return this.doc.queryCommandValue(d)}catch(b){return null}}}});(function(c){var b;c.commands.bold={exec:function(d,e){return c.commands.formatInline.exec(d,e,"b")},state:function(e,f,d){return c.commands.formatInline.state(e,f,"b")},value:function(){return b}}})(wysihtml5);(function(g){var e,d="A",f=g.dom;function b(j,o){var n=o.length,k=0,h,m,l;for(;k<n;k++){h=o[k];m=f.getParentElement(h,{nodeName:"code"});l=f.getTextContent(h);if(l.match(f.autoLink.URL_REG_EXP)&&!m){m=f.renameElement(h,"code")}else{f.replaceWithChildNodes(h)}}}function c(h,n){var x=h.doc,u="_wysihtml5-temp-"+(+new Date()),z=/non-matching-class/g,t=0,l,k,s,w,r,o,v,y,m;g.commands.formatInline.exec(h,e,d,u,z);k=x.querySelectorAll(d+"."+u);l=k.length;for(;t<l;t++){s=k[t];s.removeAttribute("class");for(m in n){s.setAttribute(m,n[m])}}o=s;if(l===1){v=f.getTextContent(s);w=!!s.querySelector("*");r=v===""||v===g.INVISIBLE_SPACE;if(!w&&r){f.setTextContent(s,n.text||s.href);y=x.createTextNode(" ");h.selection.setAfter(s);h.selection.insertNode(y);o=y}}h.selection.setAfter(o)}g.commands.createLink={exec:function(h,k,j){var i=this.state(h,k);if(i){h.selection.executeAndRestore(function(){b(h,i)})}else{j=typeof(j)==="object"?j:{href:j};c(h,j)}},state:function(h,i){return g.commands.formatInline.state(h,i,"A")},value:function(){return e}}})(wysihtml5);(function(d){var c,b=/wysiwyg-font-size-[a-z\-]+/g;d.commands.fontSize={exec:function(e,g,f){return d.commands.formatInline.exec(e,g,"span","wysiwyg-font-size-"+f,b)},state:function(e,g,f){return d.commands.formatInline.state(e,g,"span","wysiwyg-font-size-"+f,b)},value:function(){return c}}})(wysihtml5);(function(d){var c,b=/wysiwyg-color-[a-z]+/g;d.commands.foreColor={exec:function(f,g,e){return d.commands.formatInline.exec(f,g,"span","wysiwyg-color-"+e,b)},state:function(f,g,e){return d.commands.formatInline.state(f,g,"span","wysiwyg-color-"+e,b)},value:function(){return c}}})(wysihtml5);(function(i){var c,r=i.dom,b="DIV",s=["H1","H2","H3","H4","H5","H6","P","BLOCKQUOTE",b];function n(v,w,x){if(v.className){h(v,x);v.className+=" "+w}else{v.className=w}}function h(v,w){v.className=v.className.replace(w,"")}function j(v){return v.nodeType===i.TEXT_NODE&&!i.lang.string(v.data).trim()}function k(w){var v=w.previousSibling;while(v&&j(v)){v=v.previousSibling}return v}function l(v){var w=v.nextSibling;while(w&&j(w)){w=w.nextSibling}return w}function g(w){var y=w.ownerDocument,x=l(w),v=k(w);if(x&&!f(x)){w.parentNode.insertBefore(y.createElement("br"),x)}if(v&&!f(v)){w.parentNode.insertBefore(y.createElement("br"),w)}}function d(w){var x=l(w),v=k(w);if(x&&m(x)){x.parentNode.removeChild(x)}if(v&&m(v)){v.parentNode.removeChild(v)}}function o(w){var v=w.lastChild;if(v&&m(v)){v.parentNode.removeChild(v)}}function m(v){return v.nodeName==="BR"}function f(v){if(m(v)){return true}if(r.getStyle("display").from(v)==="block"){return true}return false}function e(x,y,z,w){if(w){var v=r.observe(x,"DOMNodeInserted",function(B){var C=B.target,A;if(C.nodeType!==i.ELEMENT_NODE){return}A=r.getStyle("display").from(C);if(A.substr(0,6)!=="inline"){C.className+=" "+w}})}x.execCommand(y,false,z);if(v){v.stop()}}function t(v,w){v.selection.selectLine();v.selection.surround(w);d(w);o(w);v.selection.selectNode(w)}function u(v){return !!i.lang.string(v.className).trim()}i.commands.formatBlock={exec:function(v,B,C,w,y){var z=v.doc,A=this.state(v,B,C,w,y),x;C=typeof(C)==="string"?C.toUpperCase():C;if(A){v.selection.executeAndRestoreSimple(function(){if(y){h(A,y)}var D=u(A);if(!D&&A.nodeName===(C||b)){g(A);r.replaceWithChildNodes(A)}else{if(D){r.renameElement(A,b)}}});return}if(C===null||i.lang.array(s).contains(C)){x=v.selection.getSelectedNode();A=r.getParentElement(x,{nodeName:s});if(A){v.selection.executeAndRestoreSimple(function(){if(C){A=r.renameElement(A,C)}if(w){n(A,w,y)}});return}}if(v.commands.support(B)){e(z,B,C||b,w);return}A=z.createElement(C||b);if(w){A.className=w}t(v,A)},state:function(v,z,A,w,y){A=typeof(A)==="string"?A.toUpperCase():A;var x=v.selection.getSelectedNode();return r.getParentElement(x,{nodeName:A,className:w,classRegExp:y})},value:function(){return c}}})(wysihtml5);(function(g){var d,e={strong:"b",em:"i",b:"strong",i:"em"},f={};function c(i){var h=e[i];return h?[i.toLowerCase(),h.toLowerCase()]:[i.toLowerCase()]}function b(i,j,k){var h=i+":"+j;if(!f[h]){f[h]=new g.selection.HTMLApplier(c(i),j,k,true)}return f[h]}g.commands.formatInline={exec:function(i,m,j,k,l){var h=i.selection.getRange();if(!h){return false}b(j,k,l).toggleRange(h);i.selection.setSelection(h)},state:function(i,n,j,k,l){var m=i.doc,o=e[j]||j,h;if(!g.dom.hasElementWithTagName(m,j)&&!g.dom.hasElementWithTagName(m,o)){return false}if(k&&!g.dom.hasElementWithClassName(m,k)){return false}h=i.selection.getRange();if(!h){return false}return b(j,k,l).isAppliedToRange(h)},value:function(){return d}}})(wysihtml5);(function(c){var b;c.commands.insertHTML={exec:function(d,f,e){if(d.commands.support(f)){d.doc.execCommand(f,false,e)}else{d.selection.insertHTML(e)}},state:function(){return false},value:function(){return b}}})(wysihtml5);(function(c){var b="IMG";c.commands.insertImage={exec:function(d,l,g){g=typeof(g)==="object"?g:{src:g};var j=d.doc,h=this.state(d),k,e,f;if(h){d.selection.setBefore(h);f=h.parentNode;f.removeChild(h);c.dom.removeEmptyTextNodes(f);if(f.nodeName==="A"&&!f.firstChild){d.selection.setAfter(f);f.parentNode.removeChild(f)}c.quirks.redraw(d.element);return}h=j.createElement(b);for(e in g){h[e]=g[e]}d.selection.insertNode(h);if(c.browser.hasProblemsSettingCaretAfterImg()){k=j.createTextNode(c.INVISIBLE_SPACE);d.selection.insertNode(k);d.selection.setAfter(k)}else{d.selection.setAfter(h)}},state:function(e){var g=e.doc,f,h,d;if(!c.dom.hasElementWithTagName(g,b)){return false}f=e.selection.getSelectedNode();if(!f){return false}if(f.nodeName===b){return f}if(f.nodeType!==c.ELEMENT_NODE){return false}h=e.selection.getText();h=c.lang.string(h).trim();if(h){return false}d=e.selection.getNodes(c.ELEMENT_NODE,function(i){return i.nodeName==="IMG"});if(d.length!==1){return false}return d[0]},value:function(d){var e=this.state(d);return e&&e.src}}})(wysihtml5);(function(d){var c,b="<br>"+(d.browser.needsSpaceAfterLineBreak()?" ":"");d.commands.insertLineBreak={exec:function(e,f){if(e.commands.support(f)){e.doc.execCommand(f,false,null);if(!d.browser.autoScrollsToCaret()){e.selection.scrollIntoView()}}else{e.commands.exec("insertHTML",b)}},state:function(){return false},value:function(){return c}}})(wysihtml5);(function(c){var b;c.commands.insertOrderedList={exec:function(d,g){var l=d.doc,i=d.selection.getSelectedNode(),j=c.dom.getParentElement(i,{nodeName:"OL"}),k=c.dom.getParentElement(i,{nodeName:"UL"}),f="_wysihtml5-temp-"+new Date().getTime(),h,e;if(d.commands.support(g)){l.execCommand(g,false,null);return}if(j){d.selection.executeAndRestoreSimple(function(){c.dom.resolveList(j)})}else{if(k){d.selection.executeAndRestoreSimple(function(){c.dom.renameElement(k,"ol")})}else{d.commands.exec("formatBlock","div",f);e=l.querySelector("."+f);h=e.innerHTML===""||e.innerHTML===c.INVISIBLE_SPACE;d.selection.executeAndRestoreSimple(function(){j=c.dom.convertToList(e,"ol")});if(h){d.selection.selectNode(j.querySelector("li"))}}}},state:function(d){var e=d.selection.getSelectedNode();return c.dom.getParentElement(e,{nodeName:"OL"})},value:function(){return b}}})(wysihtml5);(function(c){var b;c.commands.insertUnorderedList={exec:function(d,g){var l=d.doc,i=d.selection.getSelectedNode(),j=c.dom.getParentElement(i,{nodeName:"UL"}),k=c.dom.getParentElement(i,{nodeName:"OL"}),f="_wysihtml5-temp-"+new Date().getTime(),h,e;if(d.commands.support(g)){l.execCommand(g,false,null);return}if(j){d.selection.executeAndRestoreSimple(function(){c.dom.resolveList(j)})}else{if(k){d.selection.executeAndRestoreSimple(function(){c.dom.renameElement(k,"ul")})}else{d.commands.exec("formatBlock","div",f);e=l.querySelector("."+f);h=e.innerHTML===""||e.innerHTML===c.INVISIBLE_SPACE;d.selection.executeAndRestoreSimple(function(){j=c.dom.convertToList(e,"ul")});if(h){d.selection.selectNode(j.querySelector("li"))}}}},state:function(d){var e=d.selection.getSelectedNode();return c.dom.getParentElement(e,{nodeName:"UL"})},value:function(){return b}}})(wysihtml5);(function(c){var b;c.commands.italic={exec:function(d,e){return c.commands.formatInline.exec(d,e,"i")},state:function(e,f,d){return c.commands.formatInline.state(e,f,"i")},value:function(){return b}}})(wysihtml5);(function(e){var c,d="wysiwyg-text-align-center",b=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyCenter={exec:function(f,g){return e.commands.formatBlock.exec(f,"formatBlock",null,d,b)},state:function(f,g){return e.commands.formatBlock.state(f,"formatBlock",null,d,b)},value:function(){return c}}})(wysihtml5);(function(e){var c,d="wysiwyg-text-align-left",b=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyLeft={exec:function(f,g){return e.commands.formatBlock.exec(f,"formatBlock",null,d,b)},state:function(f,g){return e.commands.formatBlock.state(f,"formatBlock",null,d,b)},value:function(){return c}}})(wysihtml5);(function(e){var c,d="wysiwyg-text-align-right",b=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyRight={exec:function(f,g){return e.commands.formatBlock.exec(f,"formatBlock",null,d,b)},state:function(f,g){return e.commands.formatBlock.state(f,"formatBlock",null,d,b)},value:function(){return c}}})(wysihtml5);(function(c){var b;c.commands.underline={exec:function(d,e){return c.commands.formatInline.exec(d,e,"u")},state:function(d,e){return c.commands.formatInline.state(d,e,"u")},value:function(){return b}}})(wysihtml5);(function(k){var g=90,i=89,j=8,c=46,b=40,h='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+k.INVISIBLE_SPACE+"</span>",f='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+k.INVISIBLE_SPACE+"</span>",e=k.dom;function d(m){var l;while(l=m.querySelector("._wysihtml5-temp")){l.parentNode.removeChild(l)}}k.UndoManager=k.lang.Dispatcher.extend({constructor:function(l){this.editor=l;this.composer=l.composer;this.element=this.composer.element;this.history=[this.composer.getValue()];this.position=1;if(this.composer.commands.support("insertHTML")){this._observe()}},_observe:function(){var o=this,s=this.composer.sandbox.getDocument(),l;e.observe(this.element,"keydown",function(v){if(v.altKey||(!v.ctrlKey&&!v.metaKey)){return}var w=v.keyCode,t=w===g&&!v.shiftKey,u=(w===g&&v.shiftKey)||(w===i);if(t){o.undo();v.preventDefault()}else{if(u){o.redo();v.preventDefault()}}});e.observe(this.element,"keydown",function(t){var u=t.keyCode;if(u===l){return}l=u;if(u===j||u===c){o.transact()}});if(k.browser.hasUndoInContextMenu()){var m,n,r=function(){d(s);clearInterval(m)};e.observe(this.element,"contextmenu",function(){r();o.composer.selection.executeAndRestoreSimple(function(){if(o.element.lastChild){o.composer.selection.setAfter(o.element.lastChild)}s.execCommand("insertHTML",false,h);s.execCommand("insertHTML",false,f);s.execCommand("undo",false,null)});m=setInterval(function(){if(s.getElementById("_wysihtml5-redo")){r();o.redo()}else{if(!s.getElementById("_wysihtml5-undo")){r();o.undo()}}},400);if(!n){n=true;e.observe(document,"mousedown",r);e.observe(s,["mousedown","paste","cut","copy"],r)}})}this.editor.observe("newword:composer",function(){o.transact()}).observe("beforecommand:composer",function(){o.transact()})},transact:function(){var n=this.history[this.position-1],l=this.composer.getValue();if(l==n){return}var m=this.history.length=this.position;if(m>b){this.history.shift();this.position--}this.position++;this.history.push(l)},undo:function(){this.transact();if(this.position<=1){return}this.set(this.history[--this.position-1]);this.editor.fire("undo:composer")},redo:function(){if(this.position>=this.history.length){return}this.set(this.history[++this.position-1]);this.editor.fire("redo:composer")},set:function(l){this.composer.setValue(l);this.editor.focus(true)}})})(wysihtml5);wysihtml5.views.View=Base.extend({constructor:function(c,d,b){this.parent=c;this.element=d;this.config=b;this._observeViewChange()},_observeViewChange:function(){var b=this;this.parent.observe("beforeload",function(){b.parent.observe("change_view",function(c){if(c===b.name){b.parent.currentView=b;b.show();setTimeout(function(){b.focus()},0)}else{b.hide()}})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")===this.element){return}try{this.element.focus()}catch(b){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}});(function(d){var c=d.dom,b=d.browser;d.views.Composer=d.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(f,g,e){this.base(f,g,e);this.textarea=this.parent.textarea;this._initSandbox()},clear:function(){this.element.innerHTML=b.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(f){var e=this.isEmpty()?"":d.quirks.getCorrectInnerHTML(this.element);if(f){e=this.parent.parse(e)}e=d.lang.string(e).replace(d.INVISIBLE_SPACE).by("");return e},setValue:function(e,f){if(f){e=this.parent.parse(e)}this.element.innerHTML=e},show:function(){this.iframe.style.display=this._displayStyle||"";this.disable();this.enable()},hide:function(){this._displayStyle=c.getStyle("display").from(this.iframe);if(this._displayStyle==="none"){this._displayStyle=null}this.iframe.style.display="none"},disable:function(){this.element.removeAttribute("contentEditable");this.base()},enable:function(){this.element.setAttribute("contentEditable","true");this.base()},focus:function(f){if(d.browser.doesAsyncFocus()&&this.hasPlaceholderSet()){this.clear()}this.base();var e=this.element.lastChild;if(f&&e){if(e.nodeName==="BR"){this.selection.setBefore(this.element.lastChild)}else{this.selection.setAfter(this.element.lastChild)}}},getTextContent:function(){return c.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")},isEmpty:function(){var f=this.element.innerHTML,e="blockquote, ul, ol, img, embed, object, table, iframe, svg, video, audio, button, input, select, textarea";return f===""||f===this.CARET_HACK||this.hasPlaceholderSet()||(this.getTextContent()===""&&!this.element.querySelector(e))},_initSandbox:function(){var f=this;this.sandbox=new c.Sandbox(function(){f._create()},{stylesheets:this.config.stylesheets});this.iframe=this.sandbox.getIframe();var e=document.createElement("input");e.type="hidden";e.name="_wysihtml5_mode";e.value=1;var g=this.textarea.element;c.insert(this.iframe).after(g);c.insert(e).after(g)},_create:function(){var g=this;this.doc=this.sandbox.getDocument();this.element=this.doc.body;this.textarea=this.parent.textarea;this.element.innerHTML=this.textarea.getValue(true);this.enable();this.selection=new d.Selection(this.parent);this.commands=new d.Commands(this.parent);c.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element);c.addClass(this.element,this.config.composerClassName);if(this.config.style){this.style()}this.observe();var f=this.config.name;if(f){c.addClass(this.element,f);c.addClass(this.iframe,f)}var e=typeof(this.config.placeholder)==="string"?this.config.placeholder:this.textarea.element.getAttribute("placeholder");if(e){c.simulatePlaceholder(this.parent,this,e)}this.commands.exec("styleWithCSS",false);this._initAutoLinking();this._initObjectResizing();this._initUndoManager();if(this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element){setTimeout(function(){g.focus()},100)}d.quirks.insertLineBreakOnReturn(this);if(!b.clearsContentEditableCorrectly()){d.quirks.ensureProperClearing(this)}if(!b.clearsListsInContentEditableCorrectly()){d.quirks.ensureProperClearingOfLists(this)}if(this.initSync&&this.config.sync){this.initSync()}this.textarea.hide();this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var i=this,f=b.canDisableAutoLinking(),g=b.doesAutoLinkingInContentEditable();if(f){this.commands.exec("autoUrlDetect",false)}if(!this.config.autoLink){return}if(!g||(g&&f)){this.parent.observe("newword:composer",function(){i.selection.executeAndRestore(function(k,l){c.autoLink(l.parentNode)})})}var e=this.sandbox.getDocument().getElementsByTagName("a"),j=c.autoLink.URL_REG_EXP,h=function(k){var l=d.lang.string(c.getTextContent(k)).trim();if(l.substr(0,4)==="www."){l="http://"+l}return l};c.observe(this.element,"keydown",function(m){if(!e.length){return}var n=i.selection.getSelectedNode(m.target.ownerDocument),l=c.getParentElement(n,{nodeName:"A"},4),k;if(!l){return}k=h(l);setTimeout(function(){var o=h(l);if(o===k){return}if(o.match(j)){l.setAttribute("href",o)}},0)})},_initObjectResizing:function(){var g=["width","height"],f=g.length,e=this.element;this.commands.exec("enableObjectResizing",this.config.allowObjectResizing);if(this.config.allowObjectResizing){if(b.supportsEvent("resizeend")){c.observe(e,"resizeend",function(k){var m=k.target||k.srcElement,j=m.style,h=0,l;for(;h<f;h++){l=g[h];if(j[l]){m.setAttribute(l,parseInt(j[l],10));j[l]=""}}d.quirks.redraw(e)})}}else{if(b.supportsEvent("resizestart")){c.observe(e,"resizestart",function(h){h.preventDefault()})}}},_initUndoManager:function(){new d.UndoManager(this.parent)}})})(wysihtml5);(function(k){var b=k.dom,h=document,e=window,f=h.createElement("div"),c=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],i=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],d=["width","height","top","left","right","bottom"],g=["html             { height: 100%; }","body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }","._wysihtml5-temp { display: none; }",k.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }","img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"];var j=function(n){if(n.setActive){try{n.setActive()}catch(r){}}else{var o=n.style,s=h.documentElement.scrollTop||h.body.scrollTop,m=h.documentElement.scrollLeft||h.body.scrollLeft,l={position:o.position,top:o.top,left:o.left,WebkitUserSelect:o.WebkitUserSelect};b.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(n);n.focus();b.setStyles(l).on(n);if(e.scrollTo){e.scrollTo(m,s)}}};k.views.Composer.prototype.style=function(){var r=this,o=h.querySelector(":focus"),t=this.textarea.element,l=t.hasAttribute("placeholder"),s=l&&t.getAttribute("placeholder");this.focusStylesHost=this.focusStylesHost||f.cloneNode(false);this.blurStylesHost=this.blurStylesHost||f.cloneNode(false);if(l){t.removeAttribute("placeholder")}if(t===o){t.blur()}b.copyStyles(i).from(t).to(this.iframe).andTo(this.blurStylesHost);b.copyStyles(c).from(t).to(this.element).andTo(this.blurStylesHost);b.insertCSS(g).into(this.element.ownerDocument);j(t);b.copyStyles(i).from(t).to(this.focusStylesHost);b.copyStyles(c).from(t).to(this.focusStylesHost);var n=k.lang.array(i).without(["display"]);if(o){o.focus()}else{t.blur()}if(l){t.setAttribute("placeholder",s)}if(!k.browser.hasCurrentStyleProperty()){var m=b.observe(e,"resize",function(){if(!b.contains(document.documentElement,r.iframe)){m.stop();return}var v=b.getStyle("display").from(t),u=b.getStyle("display").from(r.iframe);t.style.display="";r.iframe.style.display="none";b.copyStyles(d).from(t).to(r.iframe).andTo(r.focusStylesHost).andTo(r.blurStylesHost);r.iframe.style.display=u;t.style.display=v})}this.parent.observe("focus:composer",function(){b.copyStyles(n).from(r.focusStylesHost).to(r.iframe);b.copyStyles(c).from(r.focusStylesHost).to(r.element)});this.parent.observe("blur:composer",function(){b.copyStyles(n).from(r.blurStylesHost).to(r.iframe);b.copyStyles(c).from(r.blurStylesHost).to(r.element)});return this}})(wysihtml5);(function(e){var d=e.dom,c=e.browser,b={"66":"bold","73":"italic","85":"underline"};e.views.Composer.prototype.observe=function(){var j=this,l=this.getValue(),i=this.sandbox.getIframe(),h=this.element,g=c.supportsEventsInIframeCorrectly()?h:this.sandbox.getWindow(),f=c.supportsEvent("drop")?["drop","paste"]:["dragdrop","paste"];d.observe(i,"DOMNodeRemoved",function(){clearInterval(k);j.parent.fire("destroy:composer")});var k=setInterval(function(){if(!d.contains(document.documentElement,i)){clearInterval(k);j.parent.fire("destroy:composer")}},250);d.observe(g,"focus",function(){j.parent.fire("focus").fire("focus:composer");setTimeout(function(){l=j.getValue()},0)});d.observe(g,"blur",function(){if(l!==j.getValue()){j.parent.fire("change").fire("change:composer")}j.parent.fire("blur").fire("blur:composer")});if(e.browser.isIos()){d.observe(h,"blur",function(){var o=h.ownerDocument.createElement("input"),s=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft;try{j.selection.insertNode(o)}catch(r){h.appendChild(o)}o.focus();o.parentNode.removeChild(o);window.scrollTo(n,s)})}d.observe(h,"dragenter",function(){j.parent.fire("unset_placeholder")});if(c.firesOnDropOnlyWhenOnDragOverIsCancelled()){d.observe(h,["dragover","dragenter"],function(n){n.preventDefault()})}d.observe(h,f,function(n){var r=n.dataTransfer,o;console.log("PASTED",n);if(r&&c.supportsDataTransfer()){o=r.getData("text/html")||r.getData("text/plain")}if(o){h.focus();j.commands.exec("insertHTML",o);j.parent.fire("paste").fire("paste:composer");n.stopPropagation();n.preventDefault()}else{setTimeout(function(){j.parent.fire("paste").fire("paste:composer")},0)}});d.observe(h,"keyup",function(n){var o=n.keyCode;if(o===e.SPACE_KEY||o===e.ENTER_KEY){j.parent.fire("newword:composer")}});this.parent.observe("paste:composer",function(){setTimeout(function(){j.parent.fire("newword:composer")},0)});if(!c.canSelectImagesInContentEditable()){d.observe(h,"mousedown",function(n){var o=n.target;if(o.nodeName==="IMG"){j.selection.selectNode(o);n.preventDefault()}})}d.observe(h,"keydown",function(n){var o=n.keyCode,r=b[o];if((n.ctrlKey||n.metaKey)&&!n.altKey&&r){j.commands.exec(r);n.preventDefault()}});d.observe(h,"keydown",function(o){var s=j.selection.getSelectedNode(true),r=o.keyCode,n;if(s&&s.nodeName==="IMG"&&(r===e.BACKSPACE_KEY||r===e.DELETE_KEY)){n=s.parentNode;n.removeChild(s);if(n.nodeName==="A"&&!n.firstChild){n.parentNode.removeChild(n)}setTimeout(function(){e.quirks.redraw(h)},0);o.preventDefault()}});var m={IMG:"Image: ",A:"Link: "};d.observe(h,"mouseover",function(o){var r=o.target,t=r.nodeName,s;if(t!=="A"&&t!=="IMG"){return}var n=r.hasAttribute("title");if(!n){s=m[t]+(r.getAttribute("href")||r.getAttribute("src"));r.setAttribute("title",s)}})}})(wysihtml5);(function(c){var b=400;c.views.Synchronizer=Base.extend({constructor:function(f,d,e){this.editor=f;this.textarea=d;this.composer=e;this._observe()},fromComposerToTextarea:function(d){this.textarea.setValue(c.lang.string(this.composer.getValue()).trim(),d)},fromTextareaToComposer:function(e){var d=this.textarea.getValue();if(d){this.composer.setValue(d,e)}else{this.composer.clear();this.editor.fire("set_placeholder")}},sync:function(d){if(this.editor.currentView.name==="textarea"){this.fromTextareaToComposer(d)}else{this.fromComposerToTextarea(d)}},_observe:function(){var d,f=this,e=this.textarea.element.form,h=function(){d=setInterval(function(){f.fromComposerToTextarea()},b)},g=function(){clearInterval(d);d=null};h();if(e){c.dom.observe(e,"submit",function(){f.sync(true)});c.dom.observe(e,"reset",function(){setTimeout(function(){f.fromTextareaToComposer()},0)})}this.editor.observe("change_view",function(i){if(i==="composer"&&!d){f.fromTextareaToComposer(true);h()}else{if(i==="textarea"){f.fromComposerToTextarea(true);g()}}});this.editor.observe("destroy:composer",g)}})})(wysihtml5);wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(c,d,b){this.base(c,d,b);this._observe()},clear:function(){this.element.value=""},getValue:function(c){var b=this.isEmpty()?"":this.element.value;if(c){b=this.parent.parse(b)}return b},setValue:function(b,c){if(c){b=this.parent.parse(b)}this.element.value=b},hasPlaceholderSet:function(){var e=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),b=this.element.getAttribute("placeholder")||null,c=this.element.value,d=!c;return(e&&d)||(c===b)},isEmpty:function(){return !wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var d=this.element,e=this.parent,b={focusin:"focus",focusout:"blur"},c=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];e.observe("beforeload",function(){wysihtml5.dom.observe(d,c,function(g){var f=b[g.type]||g.type;e.fire(f).fire(f+":textarea")});wysihtml5.dom.observe(d,["paste","drop"],function(){setTimeout(function(){e.fire("paste").fire("paste:textarea")},0)})})}});(function(g){var f=g.dom,b="wysihtml5-command-dialog-opened",e="input, select, textarea",c="[data-wysihtml5-dialog-field]",d="data-wysihtml5-dialog-field";g.toolbar.Dialog=g.lang.Dispatcher.extend({constructor:function(i,h){this.link=i;this.container=h},_observe:function(){if(this._observed){return}var l=this,m=function(o){var i=l._serialize();if(i==l.elementToChange){l.fire("edit",i)}else{l.fire("save",i)}l.hide();o.preventDefault();o.stopPropagation()};f.observe(l.link,"click",function(i){if(f.hasClass(l.link,b)){setTimeout(function(){l.hide()},0)}});f.observe(this.container,"keydown",function(i){var o=i.keyCode;if(o===g.ENTER_KEY){m(i)}if(o===g.ESCAPE_KEY){l.hide()}});f.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",m);f.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(i){l.fire("cancel");l.hide();i.preventDefault();i.stopPropagation()});var j=this.container.querySelectorAll(e),h=0,k=j.length,n=function(){clearInterval(l.interval)};for(;h<k;h++){f.observe(j[h],"change",n)}this._observed=true},_serialize:function(){var l=this.elementToChange||{},h=this.container.querySelectorAll(c),k=h.length,j=0;for(;j<k;j++){l[h[j].getAttribute(d)]=h[j].value}return l},_interpolate:function(n){var m,r,l,o=document.querySelector(":focus"),h=this.container.querySelectorAll(c),k=h.length,j=0;for(;j<k;j++){m=h[j];if(m===o){continue}if(n&&m.type==="hidden"){continue}r=m.getAttribute(d);l=this.elementToChange?(this.elementToChange[r]||""):m.defaultValue;m.value=l}},show:function(k){var i=this,h=this.container.querySelector(e);this.elementToChange=k;this._observe();this._interpolate();if(k){this.interval=setInterval(function(){i._interpolate(true)},500)}f.addClass(this.link,b);this.container.style.display="";this.fire("show");if(h&&!k){try{h.focus()}catch(j){}}},hide:function(){clearInterval(this.interval);this.elementToChange=null;f.removeClass(this.link,b);this.container.style.display="none";this.fire("hide")}})})(wysihtml5);(function(g){var f=g.dom;var e={position:"relative"};var d={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1};var c={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"};var b={"x-webkit-speech":"",speech:""};g.toolbar.Speech=function(j,k){var i=document.createElement("input");if(!g.browser.supportsSpeechApiOn(i)){k.style.display="none";return}var l=document.createElement("div");g.lang.object(d).merge({width:k.offsetWidth+"px",height:k.offsetHeight+"px"});f.insert(i).into(l);f.insert(l).into(k);f.setStyles(c).on(i);f.setAttributes(b).on(i);f.setStyles(d).on(l);f.setStyles(e).on(k);var h="onwebkitspeechchange" in i?"webkitspeechchange":"speechchange";f.observe(i,h,function(){j.execCommand("insertText",i.value);i.value=""});f.observe(i,"click",function(m){if(f.hasClass(k,"wysihtml5-command-disabled")){m.preventDefault()}m.stopPropagation()})}})(wysihtml5);(function(g){var b="wysihtml5-command-disabled",c="wysihtml5-commands-disabled",d="wysihtml5-command-active",e="wysihtml5-action-active",f=g.dom;g.toolbar.Toolbar=Base.extend({constructor:function(l,h){this.editor=l;this.container=typeof(h)==="string"?document.getElementById(h):h;this.composer=l.composer;this._getLinks("command");this._getLinks("action");this._observe();this.show();var j=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),m=j.length,k=0;for(;k<m;k++){new g.toolbar.Speech(this,j[k])}},_getLinks:function(n){var t=this[n+"Links"]=g.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+n+"]")).get(),k=t.length,l=0,h=this[n+"Mapping"]={},o,s,j,r,m;for(;l<k;l++){o=t[l];j=o.getAttribute("data-wysihtml5-"+n);r=o.getAttribute("data-wysihtml5-"+n+"-value");s=this.container.querySelector("[data-wysihtml5-"+n+"-group='"+j+"']");m=this._getDialog(o,j);h[j+":"+r]={link:o,group:s,name:j,value:r,dialog:m,state:false}}},_getDialog:function(l,m){var k=this,j=this.container.querySelector("[data-wysihtml5-dialog='"+m+"']"),i,h;if(j){i=new g.toolbar.Dialog(l,j);i.observe("show",function(){h=k.composer.selection.getBookmark();k.editor.fire("show:dialog",{command:m,dialogContainer:j,commandLink:l})});i.observe("save",function(n){if(h){k.composer.selection.setBookmark(h)}k._execCommand(m,n);k.editor.fire("save:dialog",{command:m,dialogContainer:j,commandLink:l})});i.observe("cancel",function(){k.editor.focus(false);k.editor.fire("cancel:dialog",{command:m,dialogContainer:j,commandLink:l})})}return i},execCommand:function(j,h){if(this.commandsDisabled){return}var i=this.commandMapping[j+":"+h];if(i&&i.dialog&&!i.state){i.dialog.show()}else{this._execCommand(j,h)}},_execCommand:function(i,h){this.editor.focus(false);this.composer.commands.exec(i,h);this._updateLinkStates()},execAction:function(i){var h=this.editor;switch(i){case"change_view":if(h.currentView===h.textarea){h.fire("change_view","composer")}else{h.fire("change_view","textarea")}break}},_observe:function(){var n=this,l=this.editor,h=this.container,j=this.commandLinks.concat(this.actionLinks),m=j.length,k=0;for(;k<m;k++){f.setAttributes({href:"javascript:;",unselectable:"on"}).on(j[k])}f.delegate(h,"[data-wysihtml5-command]","mousedown",function(i){i.preventDefault()});f.delegate(h,"[data-wysihtml5-command]","click",function(r){var o=this,s=o.getAttribute("data-wysihtml5-command"),i=o.getAttribute("data-wysihtml5-command-value");n.execCommand(s,i);r.preventDefault()});f.delegate(h,"[data-wysihtml5-action]","click",function(i){var o=this.getAttribute("data-wysihtml5-action");n.execAction(o);i.preventDefault()});l.observe("focus:composer",function(){n.bookmark=null;clearInterval(n.interval);n.interval=setInterval(function(){n._updateLinkStates()},500)});l.observe("blur:composer",function(){clearInterval(n.interval)});l.observe("destroy:composer",function(){clearInterval(n.interval)});l.observe("change_view",function(i){setTimeout(function(){n.commandsDisabled=(i!=="composer");n._updateLinkStates();if(n.commandsDisabled){f.addClass(h,c)}else{f.removeClass(h,c)}},0)})},_updateLinkStates:function(){var k=this.composer.element,j=this.commandMapping,n=this.actionMapping,h,m,l,o;for(h in j){o=j[h];if(this.commandsDisabled){m=false;f.removeClass(o.link,d);if(o.group){f.removeClass(o.group,d)}if(o.dialog){o.dialog.hide()}}else{m=this.composer.commands.state(o.name,o.value);if(g.lang.object(m).isArray()){m=m.length===1?m[0]:true}f.removeClass(o.link,b);if(o.group){f.removeClass(o.group,b)}}if(o.state===m){continue}o.state=m;if(m){f.addClass(o.link,d);if(o.group){f.addClass(o.group,d)}if(o.dialog){if(typeof(m)==="object"){o.dialog.show(m)}else{o.dialog.hide()}}}else{f.removeClass(o.link,d);if(o.group){f.removeClass(o.group,d)}if(o.dialog){o.dialog.hide()}}}for(h in n){l=n[h];if(l.name==="change_view"){l.state=this.editor.currentView===this.editor.textarea;if(l.state){f.addClass(l.link,e)}else{f.removeClass(l.link,e)}}}},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})})(wysihtml5);(function(d){var c;var b={name:c,style:true,toolbar:c,autoLink:true,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:d.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",stylesheets:[],placeholderText:c,allowObjectResizing:true,supportTouchDevices:true};d.Editor=d.lang.Dispatcher.extend({constructor:function(i,f){this.textareaElement=typeof(i)==="string"?document.getElementById(i):i;this.config=d.lang.object({}).merge(b).merge(f).get();this.textarea=new d.views.Textarea(this,this.textareaElement,this.config);this.currentView=this.textarea;this._isCompatible=d.browser.supported();if(!this._isCompatible||(!this.config.supportTouchDevices&&d.browser.isTouchDevice())){var g=this;setTimeout(function(){g.fire("beforeload").fire("load")},0);return}d.dom.addClass(document.body,this.config.bodyClassName);this.composer=new d.views.Composer(this,this.textareaElement,this.config);this.currentView=this.composer;if(typeof(this.config.parser)==="function"){this._initParser()}this.observe("beforeload",function(){this.synchronizer=new d.views.Synchronizer(this,this.textarea,this.composer);if(this.config.toolbar){this.toolbar=new d.toolbar.Toolbar(this,this.config.toolbar)}});try{console.log("Heya! This page is using wysihtml5 for rich text editing. Check out https://github.com/xing/wysihtml5")}catch(h){}},isCompatible:function(){return this._isCompatible},clear:function(){this.currentView.clear();return this},getValue:function(e){return this.currentView.getValue(e)},setValue:function(e,f){if(!e){return this.clear()}this.currentView.setValue(e,f);return this},focus:function(e){this.currentView.focus(e);return this},disable:function(){this.currentView.disable();return this},enable:function(){this.currentView.enable();return this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(e){var f=this.config.parser(e,this.config.parserRules,this.composer.sandbox.getDocument(),true);if(typeof(e)==="object"){d.quirks.redraw(e)}return f},_initParser:function(){this.observe("paste:composer",function(){var e=true,f=this;f.composer.selection.executeAndRestore(function(){d.quirks.cleanPastedHTML(f.composer.element);f.parse(f.composer.element)},e)});this.observe("paste:textarea",function(){var e=this.textarea.getValue(),f;f=this.parse(e);this.textarea.setValue(f)})}})})(wysihtml5);!function(g,i){var e={"font-styles":function(j,k){var l=(k&&k.size)?" btn-"+k.size:"";return"<li class='dropdown'><a class='btn dropdown-toggle"+l+"' data-toggle='dropdown' href='#'><i class='icon-font'></i>&nbsp;<span class='current-font'>"+j.font_styles.normal+"</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div'>"+j.font_styles.normal+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1'>"+j.font_styles.h1+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2'>"+j.font_styles.h2+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h3'>"+j.font_styles.h3+"</a></li></ul></li>"},emphasis:function(j,k){var l=(k&&k.size)?" btn-"+k.size:"";return"<li><div class='btn-group'><a class='btn"+l+"' data-wysihtml5-command='bold' title='CTRL+B'>"+j.emphasis.bold+"</a><a class='btn"+l+"' data-wysihtml5-command='italic' title='CTRL+I'>"+j.emphasis.italic+"</a><a class='btn"+l+"' data-wysihtml5-command='underline' title='CTRL+U'>"+j.emphasis.underline+"</a></div></li>"},lists:function(j,k){var l=(k&&k.size)?" btn-"+k.size:"";return"<li><div class='btn-group'><a class='btn"+l+"' data-wysihtml5-command='insertUnorderedList' title='"+j.lists.unordered+"'><i class='icon-list'></i></a><a class='btn"+l+"' data-wysihtml5-command='insertOrderedList' title='"+j.lists.ordered+"'><i class='icon-th-list'></i></a><a class='btn"+l+"' data-wysihtml5-command='Outdent' title='"+j.lists.outdent+"'><i class='icon-indent-right'></i></a><a class='btn"+l+"' data-wysihtml5-command='Indent' title='"+j.lists.indent+"'><i class='icon-indent-left'></i></a></div></li>"},link:function(j,k){var l=(k&&k.size)?" btn-"+k.size:"";return"<li><div class='bootstrap-wysihtml5-insert-link-modal modal hide fade'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3>"+j.link.insert+"</h3></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-link-url input-xlarge'></div><div class='modal-footer'><a href='#' class='btn' data-dismiss='modal'>"+j.link.cancel+"</a><a href='#' class='btn btn-primary' data-dismiss='modal'>"+j.link.insert+"</a></div></div><a class='btn"+l+"' data-wysihtml5-command='createLink' title='"+j.link.insert+"'><i class='icon-share'></i></a></li>"},image:function(j,k){var l=(k&&k.size)?" btn-"+k.size:"";return"<li><div class='bootstrap-wysihtml5-insert-image-modal modal hide fade'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3>"+j.image.insert+"</h3></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-image-url input-xlarge'></div><div class='modal-footer'><a href='#' class='btn' data-dismiss='modal'>"+j.image.cancel+"</a><a href='#' class='btn btn-primary' data-dismiss='modal'>"+j.image.insert+"</a></div></div><a class='btn"+l+"' data-wysihtml5-command='insertImage' title='"+j.image.insert+"'><i class='icon-picture'></i></a></li>"},html:function(j,k){var l=(k&&k.size)?" btn-"+k.size:"";return"<li><div class='btn-group'><a class='btn"+l+"' data-wysihtml5-action='change_view' title='"+j.html.edit+"'><i class='icon-pencil'></i></a></div></li>"},color:function(j,k){var l=(k&&k.size)?" btn-"+k.size:"";return"<li class='dropdown'><a class='btn dropdown-toggle"+l+"' data-toggle='dropdown' href='#'><span class='current-color'>"+j.colours.black+"</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><div class='wysihtml5-colors' data-wysihtml5-command-value='black'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='black'>"+j.colours.black+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='silver'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='silver'>"+j.colours.silver+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='gray'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='gray'>"+j.colours.gray+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='maroon'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='maroon'>"+j.colours.maroon+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='red'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='red'>"+j.colours.red+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='purple'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='purple'>"+j.colours.purple+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='green'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='green'>"+j.colours.green+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='olive'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='olive'>"+j.colours.olive+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='navy'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='navy'>"+j.colours.navy+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='blue'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='blue'>"+j.colours.blue+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='orange'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='orange'>"+j.colours.orange+"</a></li></ul></li>"}};var f=function(l,j,k){return e[l](j,k)};var h=function(l,j){this.el=l;var m=j||c;for(var k in m.customTemplates){e[k]=m.customTemplates[k]}this.toolbar=this.createToolbar(l,m);this.editor=this.createEditor(j);window.editor=this.editor;g("iframe.wysihtml5-sandbox").each(function(n,o){g(o.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){g("li.dropdown").removeClass("open")}})})};h.prototype={constructor:h,createEditor:function(k){k=k||{};k.toolbar=this.toolbar[0];var l=new i.Editor(this.el[0],k);if(k&&k.events){for(var j in k.events){l.on(j,k.events[j])}}return l},createToolbar:function(n,l){var k=this;var o=g("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"});var j=l.locale||c.locale||"en";for(var m in c){var r=false;if(l[m]!==undefined){if(l[m]===true){r=true}}else{r=c[m]}if(r===true){o.append(f(m,b[j],l));if(m==="html"){this.initHtml(o)}if(m==="link"){this.initInsertLink(o)}if(m==="image"){this.initInsertImage(o)}}}if(l.toolbar){for(m in l.toolbar){o.append(l.toolbar[m])}}o.find("a[data-wysihtml5-command='formatBlock']").click(function(u){var t=u.target||u.srcElement;var s=g(t);k.toolbar.find(".current-font").text(s.html())});o.find("a[data-wysihtml5-command='foreColor']").click(function(u){var t=u.target||u.srcElement;var s=g(t);k.toolbar.find(".current-color").text(s.html())});this.el.before(o);return o},initHtml:function(j){var k="a[data-wysihtml5-action='change_view']";j.find(k).click(function(l){j.find("a.btn").not(k).toggleClass("disabled")})},initInsertImage:function(s){var l=this;var r=s.find(".bootstrap-wysihtml5-insert-image-modal");var n=r.find(".bootstrap-wysihtml5-insert-image-url");var k=r.find("a.btn-primary");var j=n.val();var m;var o=function(){var t=n.val();n.val(j);l.editor.currentView.element.focus();if(m){l.editor.composer.selection.setBookmark(m);m=null}l.editor.composer.commands.exec("insertImage",t)};n.keypress(function(t){if(t.which==13){o();r.modal("hide")}});k.click(o);r.on("shown",function(){n.focus()});r.on("hide",function(){l.editor.currentView.element.focus()});s.find("a[data-wysihtml5-command=insertImage]").click(function(){var t=g(this).hasClass("wysihtml5-command-active");if(!t){l.editor.currentView.element.focus(false);m=l.editor.composer.selection.getBookmark();r.modal("show");r.on("click.dismiss.modal",'[data-dismiss="modal"]',function(u){u.stopPropagation()});return false}else{return true}})},initInsertLink:function(o){var t=this;var k=o.find(".bootstrap-wysihtml5-insert-link-modal");var m=k.find(".bootstrap-wysihtml5-insert-link-url");var l=k.find("a.btn-primary");var s=m.val();var j;var r=function(){var u=m.val();m.val(s);t.editor.currentView.element.focus();if(j){t.editor.composer.selection.setBookmark(j);j=null}t.editor.composer.commands.exec("createLink",{href:u,target:"_blank",rel:"nofollow"})};var n=false;m.keypress(function(u){if(u.which==13){r();k.modal("hide")}});l.click(r);k.on("shown",function(){m.focus()});k.on("hide",function(){t.editor.currentView.element.focus()});o.find("a[data-wysihtml5-command=createLink]").click(function(){var u=g(this).hasClass("wysihtml5-command-active");if(!u){t.editor.currentView.element.focus(false);j=t.editor.composer.selection.getBookmark();k.appendTo("body").modal("show");k.on("click.dismiss.modal",'[data-dismiss="modal"]',function(v){v.stopPropagation()});return false}else{return true}})}};var d={resetDefaults:function(){g.fn.wysihtml5.defaultOptions=g.extend(true,{},g.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(j){return this.each(function(){var k=g(this);k.data("wysihtml5",new h(k,j))})},shallowExtend:function(j){var k=g.extend({},g.fn.wysihtml5.defaultOptions,j||{});var l=this;return d.bypassDefaults.apply(l,[k])},deepExtend:function(j){var k=g.extend(true,{},g.fn.wysihtml5.defaultOptions,j||{});var l=this;return d.bypassDefaults.apply(l,[k])},init:function(j){var k=this;return d.shallowExtend.apply(k,[j])}};g.fn.wysihtml5=function(j){if(d[j]){return d[j].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof j==="object"||!j){return d.init.apply(this,arguments)}else{g.error("Method "+j+" does not exist on jQuery.wysihtml5")}}};g.fn.wysihtml5.Constructor=h;var c=g.fn.wysihtml5.defaultOptions={"font-styles":true,color:false,emphasis:true,lists:true,html:false,link:true,image:true,events:{},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{set_attributes:{target:"_blank",rel:"nofollow"},check_attributes:{href:"url"}},span:1,div:1}},stylesheets:["./lib/css/wysiwyg-color.css"],locale:"en"};if(typeof g.fn.wysihtml5.defaultOptionsCache==="undefined"){g.fn.wysihtml5.defaultOptionsCache=g.extend(true,{},g.fn.wysihtml5.defaultOptions)}var b=g.fn.wysihtml5.locale={en:{font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}}(window.jQuery,window.wysihtml5);
/*! X-editable - v1.4.5 
* In-place editing with Twitter Bootstrap, jQuery UI or pure jQuery
* http://github.com/vitalets/x-editable
* Copyright (c) 2013 Vitaliy Potapov; Licensed MIT */
(function(c){var b=function(e,d){this.options=c.extend({},c.fn.editableform.defaults,d);this.$div=c(e);if(!this.options.scope){this.options.scope=this}};b.prototype={constructor:b,initInput:function(){this.input=this.options.input;this.value=this.input.str2value(this.options.value)},initTemplate:function(){this.$form=c(c.fn.editableform.template)},initButtons:function(){var d=this.$form.find(".editable-buttons");d.append(c.fn.editableform.buttons);if(this.options.showbuttons==="bottom"){d.addClass("editable-buttons-bottom")}},render:function(){this.$loading=c(c.fn.editableform.loading);this.$div.empty().append(this.$loading);this.initTemplate();if(this.options.showbuttons){this.initButtons()}else{this.$form.find(".editable-buttons").remove()}this.showLoading();this.isSaving=false;this.$div.triggerHandler("rendering");this.initInput();this.input.prerender();this.$form.find("div.editable-input").append(this.input.$tpl);this.$div.append(this.$form);c.when(this.input.render()).then(c.proxy(function(){if(!this.options.showbuttons){this.input.autosubmit()}this.$form.find(".editable-cancel").click(c.proxy(this.cancel,this));if(this.input.error){this.error(this.input.error);this.$form.find(".editable-submit").attr("disabled",true);this.input.$input.attr("disabled",true);this.$form.submit(function(d){d.preventDefault()})}else{this.error(false);this.input.$input.removeAttr("disabled");this.$form.find(".editable-submit").removeAttr("disabled");this.input.value2input(this.value);this.$form.submit(c.proxy(this.submit,this))}this.$div.triggerHandler("rendered");this.showForm();if(this.input.postrender){this.input.postrender()}},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var d,e;if(this.$form){d=this.$form.outerWidth();e=this.$form.outerHeight();if(d){this.$loading.width(d)}if(e){this.$loading.height(e)}this.$form.hide()}else{d=this.$loading.parent().width();if(d){this.$loading.width(d)}}this.$loading.show()},showForm:function(d){this.$loading.hide();this.$form.show();if(d!==false){this.input.activate()}this.$div.triggerHandler("show")},error:function(h){var f=this.$form.find(".control-group"),g=this.$form.find(".editable-error-block"),d;if(h===false){f.removeClass(c.fn.editableform.errorGroupClass);g.removeClass(c.fn.editableform.errorBlockClass).empty().hide()}else{if(h){d=h.split("\n");for(var e=0;e<d.length;e++){d[e]=c("<div>").text(d[e]).html()}h=d.join("<br>")}f.addClass(c.fn.editableform.errorGroupClass);g.addClass(c.fn.editableform.errorBlockClass).html(h).show()}},submit:function(h){h.stopPropagation();h.preventDefault();var d,g=this.input.input2value();if(d=this.validate(g)){this.error(d);this.showForm();return}if(!this.options.savenochange&&this.input.value2str(g)==this.input.value2str(this.value)){this.$div.triggerHandler("nochange");return}var f=this.input.value2submit(g);this.isSaving=true;c.when(this.save(f)).done(c.proxy(function(e){this.isSaving=false;var i=typeof this.options.success==="function"?this.options.success.call(this.options.scope,e,g):null;if(i===false){this.error(false);this.showForm(false);return}if(typeof i==="string"){this.error(i);this.showForm();return}if(i&&typeof i==="object"&&i.hasOwnProperty("newValue")){g=i.newValue}this.error(false);this.value=g;this.$div.triggerHandler("save",{newValue:g,submitValue:f,response:e})},this)).fail(c.proxy(function(i){this.isSaving=false;var e;if(typeof this.options.error==="function"){e=this.options.error.call(this.options.scope,i,g)}else{e=typeof i==="string"?i:i.responseText||i.statusText||"Unknown error!"}this.error(e);this.showForm()},this))},save:function(e){this.options.pk=c.fn.editableutils.tryParseJson(this.options.pk,true);var d=(typeof this.options.pk==="function")?this.options.pk.call(this.options.scope):this.options.pk,f=!!(typeof this.options.url==="function"||(this.options.url&&((this.options.send==="always")||(this.options.send==="auto"&&d!==null&&d!==undefined)))),g;if(f){this.showLoading();g={name:this.options.name||"",value:e,pk:d};if(typeof this.options.params==="function"){g=this.options.params.call(this.options.scope,g)}else{this.options.params=c.fn.editableutils.tryParseJson(this.options.params,true);c.extend(g,this.options.params)}if(typeof this.options.url==="function"){return this.options.url.call(this.options.scope,g)}else{return c.ajax(c.extend({url:this.options.url,data:g,type:"POST"},this.options.ajaxOptions))}}},validate:function(d){if(d===undefined){d=this.value}if(typeof this.options.validate==="function"){return this.options.validate.call(this.options.scope,d)}},option:function(d,e){if(d in this.options){this.options[d]=e}if(d==="value"){this.setValue(e)}},setValue:function(d,e){if(e){this.value=this.input.str2value(d)}else{this.value=d}if(this.$form&&this.$form.is(":visible")){this.input.value2input(this.value)}}};c.fn.editableform=function(e){var d=arguments;return this.each(function(){var h=c(this),g=h.data("editableform"),f=typeof e==="object"&&e;if(!g){h.data("editableform",(g=new b(this,f)))}if(typeof e==="string"){g[e].apply(g,Array.prototype.slice.call(d,1))}})};c.fn.editableform.Constructor=b;c.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:true,scope:null,savenochange:false};c.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>';c.fn.editableform.loading='<div class="editableform-loading"></div>';c.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>';c.fn.editableform.errorGroupClass=null;c.fn.editableform.errorBlockClass="editable-error"}(window.jQuery));(function(b){b.fn.editableutils={inherit:function(d,c){var e=function(){};e.prototype=c.prototype;d.prototype=new e();d.prototype.constructor=d;d.superclass=c.prototype},setCursorPosition:function(d,e){if(d.setSelectionRange){d.setSelectionRange(e,e)}else{if(d.createTextRange){var c=d.createTextRange();c.collapse(true);c.moveEnd("character",e);c.moveStart("character",e);c.select()}}},tryParseJson:function(c,d){if(typeof c==="string"&&c.length&&c.match(/^[\{\[].*[\}\]]$/)){if(d){try{c=(new Function("return "+c))()}catch(f){}finally{return c}}else{c=(new Function("return "+c))()}}return c},sliceObj:function(j,h,c){var g,f,d={};if(!b.isArray(h)||!h.length){return d}for(var e=0;e<h.length;e++){g=h[e];if(j.hasOwnProperty(g)){d[g]=j[g]}if(c===true){continue}f=g.toLowerCase();if(j.hasOwnProperty(f)){d[g]=j[f]}}return d},getConfigData:function(c){var d={};b.each(c.data(),function(f,e){if(typeof e!=="object"||(e&&typeof e==="object"&&(e.constructor===Object||e.constructor===Array))){d[f]=e}});return d},objectKeys:function(e){if(Object.keys){return Object.keys(e)}else{if(e!==Object(e)){throw new TypeError("Object.keys called on a non-object")}var c=[],d;for(d in e){if(Object.prototype.hasOwnProperty.call(e,d)){c.push(d)}}return c}},escape:function(c){return b("<div>").text(c).html()},itemsByValue:function(h,g,e){if(!g||h===null){return[]}e=e||"value";var d=b.isArray(h),c=[],f=this;b.each(g,function(j,k){if(k.children){c=c.concat(f.itemsByValue(h,k.children,e))}else{if(d){if(b.grep(h,function(i){return i==(k&&typeof k==="object"?k[e]:k)}).length){c.push(k)}}else{if(h==(k&&typeof k==="object"?k[e]:k)){c.push(k)}}}});return c},createInput:function(d){var f,g,c,e=d.type;if(e==="date"){if(d.mode==="inline"){if(b.fn.editabletypes.datefield){e="datefield"}else{if(b.fn.editabletypes.dateuifield){e="dateuifield"}}}else{if(b.fn.editabletypes.date){e="date"}else{if(b.fn.editabletypes.dateui){e="dateui"}}}if(e==="date"&&!b.fn.editabletypes.date){e="combodate"}}if(e==="datetime"&&d.mode==="inline"){e="datetimefield"}if(e==="wysihtml5"&&!b.fn.editabletypes[e]){e="textarea"}if(typeof b.fn.editabletypes[e]==="function"){f=b.fn.editabletypes[e];g=this.sliceObj(d,this.objectKeys(f.defaults));c=new f(g);return c}else{b.error("Unknown type: "+e);return false}},supportsTransitions:function(){var c=document.body||document.documentElement,f=c.style,g="transition",d=["Moz","Webkit","Khtml","O","ms"];if(typeof f[g]==="string"){return true}g=g.charAt(0).toUpperCase()+g.substr(1);for(var e=0;e<d.length;e++){if(typeof f[d[e]+g]==="string"){return true}}return false}}}(window.jQuery));(function(d){var c=function(f,e){this.init(f,e)};var b=function(f,e){this.init(f,e)};c.prototype={containerName:null,innerCss:null,containerClass:"editable-container editable-popup",init:function(f,e){this.$element=d(f);this.options=d.extend({},d.fn.editableContainer.defaults,e);this.splitOptions();this.formOptions.scope=this.$element[0];this.initContainer();this.delayedHide=false;this.$element.on("destroyed",d.proxy(function(){this.destroy()},this));if(!d(document).data("editable-handlers-attached")){d(document).on("keyup.editable",function(g){if(g.which===27){d(".editable-open").editableContainer("hide")}});d(document).on("click.editable",function(k){var g=d(k.target),h,j=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(!d.contains(document.documentElement,k.target)){return}if(g.is(document)){return}for(h=0;h<j.length;h++){if(g.is(j[h])||g.parents(j[h]).length){return}}c.prototype.closeOthers(k.target)});d(document).data("editable-handlers-attached",true)}},splitOptions:function(){this.containerOptions={};this.formOptions={};if(!d.fn[this.containerName]){throw new Error(this.containerName+" not found. Have you included corresponding js file?")}var f=d.fn[this.containerName].defaults;for(var e in this.options){if(e in f){this.containerOptions[e]=this.options[e]}else{this.formOptions[e]=this.options[e]}}},tip:function(){return this.container()?this.container().$tip:null},container:function(){return this.$element.data(this.containerDataName||this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:d.proxy(this.save,this),nochange:d.proxy(function(){this.hide("nochange")},this),cancel:d.proxy(function(){this.hide("cancel")},this),show:d.proxy(function(){if(this.delayedHide){this.hide(this.delayedHide.reason);this.delayedHide=false}else{this.setPosition()}},this),rendering:d.proxy(this.setPosition,this),resize:d.proxy(this.setPosition,this),rendered:d.proxy(function(){this.$element.triggerHandler("shown",this)},this)}).editableform("render")},show:function(e){this.$element.addClass("editable-open");if(e!==false){this.closeOthers(this.$element[0])}this.innerShow();this.tip().addClass(this.containerClass);if(this.$form){}this.$form=d("<div>");if(this.tip().is(this.innerCss)){this.tip().append(this.$form)}else{this.tip().find(this.innerCss).append(this.$form)}this.renderForm()},hide:function(e){if(!this.tip()||!this.tip().is(":visible")||!this.$element.hasClass("editable-open")){return}if(this.$form.data("editableform").isSaving){this.delayedHide={reason:e};return}else{this.delayedHide=false}this.$element.removeClass("editable-open");this.innerHide();this.$element.triggerHandler("hidden",e||"manual")},innerShow:function(){},innerHide:function(){},toggle:function(e){if(this.container()&&this.tip()&&this.tip().is(":visible")){this.hide()}else{this.show(e)}},setPosition:function(){},save:function(f,g){this.$element.triggerHandler("save",g);this.hide("save")},option:function(e,f){this.options[e]=f;if(e in this.containerOptions){this.containerOptions[e]=f;this.setContainerOption(e,f)}else{this.formOptions[e]=f;if(this.$form){this.$form.editableform("option",e,f)}}},setContainerOption:function(e,f){this.call("option",e,f)},destroy:function(){this.hide();this.innerDestroy();this.$element.off("destroyed");this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(e){d(".editable-open").each(function(h,j){if(j===e||d(j).find(e).length){return}var g=d(j),f=g.data("editableContainer");if(!f){return}if(f.options.onblur==="cancel"){g.data("editableContainer").hide("onblur")}else{if(f.options.onblur==="submit"){g.data("editableContainer").tip().find("form").submit()}}})},activate:function(){if(this.tip&&this.tip().is(":visible")&&this.$form){this.$form.data("editableform").input.activate()}}};d.fn.editableContainer=function(f){var e=arguments;return this.each(function(){var i=d(this),k="editableContainer",h=i.data(k),g=typeof f==="object"&&f,j=(g.mode==="inline")?b:c;if(!h){i.data(k,(h=new j(this,g)))}if(typeof f==="string"){h[f].apply(h,Array.prototype.slice.call(e,1))}})};d.fn.editableContainer.Popup=c;d.fn.editableContainer.Inline=b;d.fn.editableContainer.defaults={value:null,placement:"top",autohide:true,onblur:"cancel",anim:false,mode:"popup"};jQuery.event.special.destroyed={remove:function(e){if(e.handler){e.handler()}}}}(window.jQuery));(function(b){b.extend(b.fn.editableContainer.Inline.prototype,b.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=b("<span></span>");if(!this.options.anim){this.options.anim=0}},splitOptions:function(){this.containerOptions={};this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide();this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,b.proxy(function(){this.$element.show();this.innerDestroy()},this))},innerDestroy:function(){if(this.tip()){this.tip().empty().remove()}}})}(window.jQuery));(function(c){var b=function(e,d){this.$element=c(e);this.options=c.extend({},c.fn.editable.defaults,d,c.fn.editableutils.getConfigData(this.$element));if(this.options.selector){this.initLive()}else{this.init()}if(this.options.highlight&&!c.fn.editableutils.supportsTransitions()){this.options.highlight=false}};b.prototype={constructor:b,init:function(){var d=false,e,f;this.options.name=this.options.name||this.$element.attr("id");this.options.scope=this.$element[0];this.input=c.fn.editableutils.createInput(this.options);if(!this.input){return}if(this.options.value===undefined||this.options.value===null){this.value=this.input.html2value(c.trim(this.$element.html()));d=true}else{this.options.value=c.fn.editableutils.tryParseJson(this.options.value,true);if(typeof this.options.value==="string"){this.value=this.input.str2value(this.options.value)}else{this.value=this.options.value}}this.$element.addClass("editable");if(this.options.toggle!=="manual"){this.$element.addClass("editable-click");this.$element.on(this.options.toggle+".editable",c.proxy(function(h){if(!this.options.disabled){h.preventDefault()}if(this.options.toggle==="mouseenter"){this.show()}else{var g=(this.options.toggle!=="click");this.toggle(g)}},this))}else{this.$element.attr("tabindex",-1)}if(typeof this.options.display==="function"){this.options.autotext="always"}switch(this.options.autotext){case"always":e=true;break;case"auto":e=!c.trim(this.$element.text()).length&&this.value!==null&&this.value!==undefined&&!d;break;default:e=false}c.when(e?this.render():true).then(c.proxy(function(){if(this.options.disabled){this.disable()}else{this.enable()}this.$element.triggerHandler("init",this)},this))},initLive:function(){var d=this.options.selector;this.options.selector=false;this.options.autotext="never";this.$element.on(this.options.toggle+".editable",d,c.proxy(function(g){var f=c(g.target);if(!f.data("editable")){if(f.hasClass(this.options.emptyclass)){f.empty()}f.editable(this.options).trigger(g)}},this))},render:function(d){if(this.options.display===false){return}if(this.input.value2htmlFinal){return this.input.value2html(this.value,this.$element[0],this.options.display,d)}else{if(typeof this.options.display==="function"){return this.options.display.call(this.$element[0],this.value,d)}else{return this.input.value2html(this.value,this.$element[0])}}},enable:function(){this.options.disabled=false;this.$element.removeClass("editable-disabled");this.handleEmpty(this.isEmpty);if(this.options.toggle!=="manual"){if(this.$element.attr("tabindex")==="-1"){this.$element.removeAttr("tabindex")}}},disable:function(){this.options.disabled=true;this.hide();this.$element.addClass("editable-disabled");this.handleEmpty(this.isEmpty);this.$element.attr("tabindex",-1)},toggleDisabled:function(){if(this.options.disabled){this.enable()}else{this.disable()}},option:function(d,e){if(d&&typeof d==="object"){c.each(d,c.proxy(function(g,f){this.option(c.trim(g),f)},this));return}this.options[d]=e;if(d==="disabled"){return e?this.disable():this.enable()}if(d==="value"){this.setValue(e)}if(this.container){this.container.option(d,e)}if(this.input.option){this.input.option(d,e)}},handleEmpty:function(d){if(this.options.display===false){return}if(d!==undefined){this.isEmpty=d}else{if(c.trim(this.$element.html())===""){this.isEmpty=true}else{if(c.trim(this.$element.text())!==""){this.isEmpty=false}else{this.isEmpty=!this.$element.height()||!this.$element.width()}}}if(!this.options.disabled){if(this.isEmpty){this.$element.html(this.options.emptytext);if(this.options.emptyclass){this.$element.addClass(this.options.emptyclass)}}else{if(this.options.emptyclass){this.$element.removeClass(this.options.emptyclass)}}}else{if(this.isEmpty){this.$element.empty();if(this.options.emptyclass){this.$element.removeClass(this.options.emptyclass)}}}},show:function(d){if(this.options.disabled){return}if(!this.container){var e=c.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(e);this.$element.on("save.internal",c.proxy(this.save,this));this.container=this.$element.data("editableContainer")}else{if(this.container.tip().is(":visible")){return}}this.container.show(d)},hide:function(){if(this.container){this.container.hide()}},toggle:function(d){if(this.container&&this.container.tip().is(":visible")){this.hide()}else{this.show(d)}},save:function(h,i){if(this.options.unsavedclass){var f=false;f=f||typeof this.options.url==="function";f=f||this.options.display===false;f=f||i.response!==undefined;f=f||(this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(i.newValue));if(f){this.$element.removeClass(this.options.unsavedclass)}else{this.$element.addClass(this.options.unsavedclass)}}if(this.options.highlight){var d=this.$element,g=d.css("background-color");d.css("background-color",this.options.highlight);setTimeout(function(){d.css("background-color",g);d.addClass("editable-bg-transition");setTimeout(function(){d.removeClass("editable-bg-transition")},1700)},0)}this.setValue(i.newValue,false,i.response)},validate:function(){if(typeof this.options.validate==="function"){return this.options.validate.call(this,this.value)}},setValue:function(e,f,d){if(f){this.value=this.input.str2value(e)}else{this.value=e}if(this.container){this.container.option("value",this.value)}c.when(this.render(d)).then(c.proxy(function(){this.handleEmpty()},this))},activate:function(){if(this.container){this.container.activate()}},destroy:function(){this.disable();if(this.container){this.container.destroy()}this.input.destroy();if(this.options.toggle!=="manual"){this.$element.removeClass("editable-click");this.$element.off(this.options.toggle+".editable")}this.$element.off("save.internal");this.$element.removeClass("editable editable-open editable-disabled");this.$element.removeData("editable")}};c.fn.editable=function(i){var d={},h=arguments,f="editable";switch(i){case"validate":this.each(function(){var n=c(this),m=n.data(f),l;if(m&&(l=m.validate())){d[m.options.name]=l}});return d;case"getValue":if(arguments.length===2&&arguments[1]===true){d=this.eq(0).data(f).value}else{this.each(function(){var m=c(this),l=m.data(f);if(l&&l.value!==undefined&&l.value!==null){d[l.options.name]=l.input.value2submit(l.value)}})}return d;case"submit":var g=arguments[1]||{},k=this,j=this.editable("validate"),e;if(c.isEmptyObject(j)){e=this.editable("getValue");if(g.data){c.extend(e,g.data)}c.ajax(c.extend({url:g.url,data:e,type:"POST"},g.ajaxOptions)).success(function(l){if(typeof g.success==="function"){g.success.call(k,l,g)}}).error(function(){if(typeof g.error==="function"){g.error.apply(k,arguments)}})}else{if(typeof g.error==="function"){g.error.call(k,j)}}return this}return this.each(function(){var n=c(this),m=n.data(f),l=typeof i==="object"&&i;if(!m){n.data(f,(m=new b(this,l)))}if(typeof i==="string"){m[i].apply(m,Array.prototype.slice.call(h,1))}})};c.fn.editable.defaults={type:"text",disabled:false,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery));(function(c){c.fn.editabletypes={};var b=function(){};b.prototype={init:function(e,d,f){this.type=e;this.options=c.extend({},f,d)},prerender:function(){this.$tpl=c(this.options.tpl);this.$input=this.$tpl;this.$clear=null;this.error=null},render:function(){},value2html:function(e,d){c(d).text(c.trim(e))},html2value:function(d){return c("<div>").html(d).text()},value2str:function(d){return d},str2value:function(d){return d},value2submit:function(d){return d},value2input:function(d){this.$input.val(d)},input2value:function(){return this.$input.val()},activate:function(){if(this.$input.is(":visible")){this.$input.focus()}},clear:function(){this.$input.val(null)},escape:function(d){return c("<div>").text(d).html()},autosubmit:function(){},destroy:function(){},setClass:function(){if(this.options.inputclass){this.$input.addClass(this.options.inputclass)}},setAttr:function(d){if(this.options[d]!==undefined&&this.options[d]!==null){this.$input.attr(d,this.options[d])}},option:function(d,e){this.options[d]=e}};b.defaults={tpl:"",inputclass:"input-medium",scope:null,showbuttons:true};c.extend(c.fn.editabletypes,{abstractinput:b})}(window.jQuery));(function(c){var b=function(d){};c.fn.editableutils.inherit(b,c.fn.editabletypes.abstractinput);c.extend(b.prototype,{render:function(){var d=c.Deferred();this.error=null;this.onSourceReady(function(){this.renderList();d.resolve()},function(){this.error=this.options.sourceError;d.resolve()});return d.promise()},html2value:function(d){return null},value2html:function(g,f,h,e){var d=c.Deferred(),i=function(){if(typeof h==="function"){h.call(f,g,this.sourceData,e)}else{this.value2htmlFinal(g,f)}d.resolve()};if(g===null){i.call(this)}else{this.onSourceReady(i,function(){d.resolve()})}return d.promise()},onSourceReady:function(j,f){var g;if(c.isFunction(this.options.source)){g=this.options.source.call(this.options.scope);this.sourceData=null}else{g=this.options.source}if(this.options.sourceCache&&c.isArray(this.sourceData)){j.call(this);return}try{g=c.fn.editableutils.tryParseJson(g,false)}catch(i){f.call(this);return}if(typeof g==="string"){if(this.options.sourceCache){var h=g,d;if(!c(document).data(h)){c(document).data(h,{})}d=c(document).data(h);if(d.loading===false&&d.sourceData){this.sourceData=d.sourceData;this.doPrepend();j.call(this);return}else{if(d.loading===true){d.callbacks.push(c.proxy(function(){this.sourceData=d.sourceData;this.doPrepend();j.call(this)},this));d.err_callbacks.push(c.proxy(f,this));return}else{d.loading=true;d.callbacks=[];d.err_callbacks=[]}}}c.ajax({url:g,type:"get",cache:false,dataType:"json",success:c.proxy(function(e){if(d){d.loading=false}this.sourceData=this.makeArray(e);if(c.isArray(this.sourceData)){if(d){d.sourceData=this.sourceData;c.each(d.callbacks,function(){this.call()})}this.doPrepend();j.call(this)}else{f.call(this);if(d){c.each(d.err_callbacks,function(){this.call()})}}},this),error:c.proxy(function(){f.call(this);if(d){d.loading=false;c.each(d.err_callbacks,function(){this.call()})}},this)})}else{this.sourceData=this.makeArray(g);if(c.isArray(this.sourceData)){this.doPrepend();j.call(this)}else{f.call(this)}}},doPrepend:function(){if(this.options.prepend===null||this.options.prepend===undefined){return}if(!c.isArray(this.prependData)){if(c.isFunction(this.options.prepend)){this.options.prepend=this.options.prepend.call(this.options.scope)}this.options.prepend=c.fn.editableutils.tryParseJson(this.options.prepend,true);if(typeof this.options.prepend==="string"){this.options.prepend={"":this.options.prepend}}this.prependData=this.makeArray(this.options.prepend)}if(c.isArray(this.prependData)&&c.isArray(this.sourceData)){this.sourceData=this.prependData.concat(this.sourceData)}},renderList:function(){},value2htmlFinal:function(e,d){},makeArray:function(j){var h,k,d=[],g,e;if(!j||typeof j==="string"){return null}if(c.isArray(j)){e=function(l,i){k={value:l,text:i};if(h++>=2){return false}};for(var f=0;f<j.length;f++){g=j[f];if(typeof g==="object"){h=0;c.each(g,e);if(h===1){d.push(k)}else{if(h>1){if(g.children){g.children=this.makeArray(g.children)}d.push(g)}}}else{d.push({value:g,text:g})}}}else{c.each(j,function(l,i){d.push({value:l,text:i})})}return d},option:function(d,e){this.options[d]=e;if(d==="source"){this.sourceData=null}if(d==="prepend"){this.prependData=null}}});b.defaults=c.extend({},c.fn.editabletypes.abstractinput.defaults,{source:null,prepend:false,sourceError:"Error when loading list",sourceCache:true});c.fn.editabletypes.list=b}(window.jQuery));(function(c){var b=function(d){this.init("text",d,b.defaults)};c.fn.editableutils.inherit(b,c.fn.editabletypes.abstractinput);c.extend(b.prototype,{render:function(){this.renderClear();this.setClass();this.setAttr("placeholder")},activate:function(){if(this.$input.is(":visible")){this.$input.focus();c.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length);if(this.toggleClear){this.toggleClear()}}},renderClear:function(){if(this.options.clear){this.$clear=c('<span class="editable-clear-x"></span>');this.$input.after(this.$clear).css("padding-right",24).keyup(c.proxy(function(f){if(~c.inArray(f.keyCode,[40,38,9,13,27])){return}clearTimeout(this.t);var d=this;this.t=setTimeout(function(){d.toggleClear(f)},100)},this)).parent().css("position","relative");this.$clear.click(c.proxy(this.clear,this))}},postrender:function(){},toggleClear:function(f){if(!this.$clear){return}var d=this.$input.val().length,g=this.$clear.is(":visible");if(d&&!g){this.$clear.show()}if(!d&&g){this.$clear.hide()}},clear:function(){this.$clear.hide();this.$input.val("").focus()}});b.defaults=c.extend({},c.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:true});c.fn.editabletypes.text=b}(window.jQuery));(function(c){var b=function(d){this.init("textarea",d,b.defaults)};c.fn.editableutils.inherit(b,c.fn.editabletypes.abstractinput);c.extend(b.prototype,{render:function(){this.setClass();this.setAttr("placeholder");this.setAttr("rows");this.$input.keydown(function(d){if(d.ctrlKey&&d.which===13){c(this).closest("form").submit()}})},value2html:function(h,g){var f="",d;if(h){d=h.split("\n");for(var e=0;e<d.length;e++){d[e]=c("<div>").text(d[e]).html()}f=d.join("<br>")}c(g).html(f)},html2value:function(f){if(!f){return""}var g=new RegExp(String.fromCharCode(10),"g");var d=f.split(/<br\s*\/?>/i);for(var e=0;e<d.length;e++){var h=c("<div>").html(d[e]).text();h=h.replace(g,"");d[e]=h}return d.join("\n")},activate:function(){c.fn.editabletypes.text.prototype.activate.call(this)}});b.defaults=c.extend({},c.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7});c.fn.editabletypes.textarea=b}(window.jQuery));(function(b){var c=function(d){this.init("select",d,c.defaults)};b.fn.editableutils.inherit(c,b.fn.editabletypes.list);b.extend(c.prototype,{renderList:function(){this.$input.empty();var d=function(f,g){if(b.isArray(g)){for(var e=0;e<g.length;e++){if(g[e].children){f.append(d(b("<optgroup>",{label:g[e].text}),g[e].children))}else{f.append(b("<option>",{value:g[e].value}).text(g[e].text))}}}return f};d(this.$input,this.sourceData);this.setClass();this.$input.on("keydown.editable",function(f){if(f.which===13){b(this).closest("form").submit()}})},value2htmlFinal:function(f,e){var g="",d=b.fn.editableutils.itemsByValue(f,this.sourceData);if(d.length){g=d[0].text}b(e).text(g)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){b(this).closest("form").submit()})}});c.defaults=b.extend({},b.fn.editabletypes.list.defaults,{tpl:"<select></select>"});b.fn.editabletypes.select=c}(window.jQuery));(function(c){var b=function(d){this.init("checklist",d,b.defaults)};c.fn.editableutils.inherit(b,c.fn.editabletypes.list);c.extend(b.prototype,{renderList:function(){var d,e;this.$tpl.empty();if(!c.isArray(this.sourceData)){return}for(var f=0;f<this.sourceData.length;f++){d=c("<label>").append(c("<input>",{type:"checkbox",value:this.sourceData[f].value})).append(c("<span>").text(" "+this.sourceData[f].text));c("<div>").append(d).appendTo(this.$tpl)}this.$input=this.$tpl.find('input[type="checkbox"]');this.setClass()},value2str:function(d){return c.isArray(d)?d.sort().join(c.trim(this.options.separator)):""},str2value:function(f){var d,e=null;if(typeof f==="string"&&f.length){d=new RegExp("\\s*"+c.trim(this.options.separator)+"\\s*");e=f.split(d)}else{if(c.isArray(f)){e=f}else{e=[f]}}return e},value2input:function(d){this.$input.prop("checked",false);if(c.isArray(d)&&d.length){this.$input.each(function(f,g){var e=c(g);c.each(d,function(h,i){if(e.val()==i){e.prop("checked",true)}})})}},input2value:function(){var d=[];this.$input.filter(":checked").each(function(e,f){d.push(c(f).val())});return d},value2htmlFinal:function(g,e){var d=[],f=c.fn.editableutils.itemsByValue(g,this.sourceData);if(f.length){c.each(f,function(j,h){d.push(c.fn.editableutils.escape(h.text))});c(e).html(d.join("<br>"))}else{c(e).empty()}},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(d){if(d.which===13){c(this).closest("form").submit()}})}});b.defaults=c.extend({},c.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","});c.fn.editabletypes.checklist=b}(window.jQuery));(function(c){var b=function(d){this.init("password",d,b.defaults)};c.fn.editableutils.inherit(b,c.fn.editabletypes.text);c.extend(b.prototype,{value2html:function(e,d){if(e){c(d).text("[hidden]")}else{c(d).empty()}},html2value:function(d){return null}});b.defaults=c.extend({},c.fn.editabletypes.text.defaults,{tpl:'<input type="password">'});c.fn.editabletypes.password=b}(window.jQuery));(function(b){var c=function(d){this.init("email",d,c.defaults)};b.fn.editableutils.inherit(c,b.fn.editabletypes.text);c.defaults=b.extend({},b.fn.editabletypes.text.defaults,{tpl:'<input type="email">'});b.fn.editabletypes.email=c}(window.jQuery));(function(b){var c=function(d){this.init("url",d,c.defaults)};b.fn.editableutils.inherit(c,b.fn.editabletypes.text);c.defaults=b.extend({},b.fn.editabletypes.text.defaults,{tpl:'<input type="url">'});b.fn.editabletypes.url=c}(window.jQuery));(function(b){var c=function(d){this.init("tel",d,c.defaults)};b.fn.editableutils.inherit(c,b.fn.editabletypes.text);c.defaults=b.extend({},b.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'});b.fn.editabletypes.tel=c}(window.jQuery));(function(b){var c=function(d){this.init("number",d,c.defaults)};b.fn.editableutils.inherit(c,b.fn.editabletypes.text);b.extend(c.prototype,{render:function(){c.superclass.render.call(this);this.setAttr("min");this.setAttr("max");this.setAttr("step")},postrender:function(){if(this.$clear){this.$clear.css({right:24})}}});c.defaults=b.extend({},b.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null});b.fn.editabletypes.number=c}(window.jQuery));(function(b){var c=function(d){this.init("range",d,c.defaults)};b.fn.editableutils.inherit(c,b.fn.editabletypes.number);b.extend(c.prototype,{render:function(){this.$input=this.$tpl.filter("input");this.setClass();this.setAttr("min");this.setAttr("max");this.setAttr("step");this.$input.on("input",function(){b(this).siblings("output").text(b(this).val())})},activate:function(){this.$input.focus()}});c.defaults=b.extend({},b.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"});b.fn.editabletypes.range=c}(window.jQuery));(function(b){var c=function(d){this.init("select2",d,c.defaults);d.select2=d.select2||{};this.sourceData=null;if(d.placeholder){d.select2.placeholder=d.placeholder}if(!d.select2.tags&&d.source){var e=d.source;if(b.isFunction(d.source)){e=d.source.call(d.scope)}if(typeof e==="string"){d.select2.ajax=d.select2.ajax||{};if(!d.select2.ajax.data){d.select2.ajax.data=function(f){return{query:f}}}if(!d.select2.ajax.results){d.select2.ajax.results=function(f){return{results:f}}}d.select2.ajax.url=e}else{this.sourceData=this.convertSource(e);d.select2.data=this.sourceData}}this.options.select2=b.extend({},c.defaults.select2,d.select2);this.isMultiple=this.options.select2.tags||this.options.select2.multiple;this.isRemote=("ajax" in this.options.select2)};b.fn.editableutils.inherit(c,b.fn.editabletypes.abstractinput);b.extend(c.prototype,{render:function(){this.setClass();this.$input.select2(this.options.select2);if(this.isRemote){this.$input.on("select2-loaded",b.proxy(function(d){this.sourceData=d.items.results},this))}if(this.isMultiple){this.$input.on("change",function(){b(this).closest("form").parent().triggerHandler("resize")})}},value2html:function(f,d){var g="",e;if(this.options.select2.tags){e=f}else{if(this.sourceData){e=b.fn.editableutils.itemsByValue(f,this.sourceData,"id")}else{}}if(b.isArray(e)){g=[];b.each(e,function(i,h){g.push(h&&typeof h==="object"?h.text:h)})}else{if(e){g=e.text}}g=b.isArray(g)?g.join(this.options.viewseparator):g;b(d).text(g)},html2value:function(d){return this.options.select2.tags?this.str2value(d,this.options.viewseparator):null},value2input:function(f){if(this.isRemote){var e,d;if(this.sourceData){d=b.fn.editableutils.itemsByValue(f,this.sourceData,"id");if(d.length){e=d[0]}}if(!e){e={id:f,text:b(this.options.scope).text()}}this.$input.select2("data",e).trigger("change",true)}else{this.$input.val(f).trigger("change",true)}},input2value:function(){return this.$input.select2("val")},str2value:function(h,f){if(typeof h!=="string"||!this.isMultiple){return h}f=f||this.options.select2.separator||b.fn.select2.defaults.separator;var g,e,d;if(h===null||h.length<1){return null}g=h.split(f);for(e=0,d=g.length;e<d;e=e+1){g[e]=b.trim(g[e])}return g},autosubmit:function(){this.$input.on("change",function(f,d){if(!d){b(this).closest("form").submit()}})},convertSource:function(e){if(b.isArray(e)&&e.length&&e[0].value!==undefined){for(var d=0;d<e.length;d++){if(e[d].value!==undefined){e[d].id=e[d].value;delete e[d].value}}}return e}});c.defaults=b.extend({},b.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "});b.fn.editabletypes.select2=c}(window.jQuery));(function(c){var b=function(e,d){this.$element=c(e);if(!this.$element.is("input")){c.error("Combodate should be applied to INPUT element");return}this.options=c.extend({},c.fn.combodate.defaults,d,this.$element.data());this.init()};b.prototype={constructor:b,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]};this.$widget=c('<span class="combodate"></span>').html(this.getTemplate());this.initCombos();this.$widget.on("change","select",c.proxy(function(){this.$element.val(this.getValue())},this));this.$widget.find("select").css("width","auto");this.$element.hide().after(this.$widget);this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var d=this.options.template;c.each(this.map,function(f,e){e=e[0];var h=new RegExp(e+"+"),g=e.length>1?e.substring(1,2):e;d=d.replace(h,"{"+g+"}")});d=d.replace(/ /g,"&nbsp;");c.each(this.map,function(f,e){e=e[0];var g=e.length>1?e.substring(1,2):e;d=d.replace("{"+g+"}",'<select class="'+f+'"></select>')});return d},initCombos:function(){var d=this;c.each(this.map,function(h,g){var i=d.$widget.find("."+h),j,e;if(i.length){d["$"+h]=i;j="fill"+h.charAt(0).toUpperCase()+h.slice(1);e=d[j]();d["$"+h].html(d.renderItems(e))}})},initItems:function(e){var d=[],f;if(this.options.firstItem==="name"){f=moment.relativeTime||moment.langData()._relativeTime;var g=typeof f[e]==="function"?f[e](1,true,e,false):f[e];g=g.split(" ").reverse()[0];d.push(["",g])}else{if(this.options.firstItem==="empty"){d.push(["",""])}}return d},renderItems:function(d){var f=[];for(var e=0;e<d.length;e++){f.push('<option value="'+d[e][0]+'">'+d[e][1]+"</option>")}return f.join("\n")},fillDay:function(){var e=this.initItems("d"),f,g,d=this.options.template.indexOf("DD")!==-1;for(g=1;g<=31;g++){f=d?this.leadZero(g):g;e.push([g,f])}return e},fillMonth:function(){var e=this.initItems("M"),f,g,j=this.options.template.indexOf("MMMM")!==-1,h=this.options.template.indexOf("MMM")!==-1,d=this.options.template.indexOf("MM")!==-1;for(g=0;g<=11;g++){if(j){f=moment().date(1).month(g).format("MMMM")}else{if(h){f=moment().date(1).month(g).format("MMM")}else{if(d){f=this.leadZero(g+1)}else{f=g+1}}}e.push([g,f])}return e},fillYear:function(){var d=[],e,f,g=this.options.template.indexOf("YYYY")!==-1;for(f=this.options.maxYear;f>=this.options.minYear;f--){e=g?f:(f+"").substring(2);d[this.options.yearDescending?"push":"unshift"]([f,e])}d=this.initItems("y").concat(d);return d},fillHour:function(){var f=this.initItems("h"),g,j,l=this.options.template.indexOf("h")!==-1,k=this.options.template.indexOf("H")!==-1,e=this.options.template.toLowerCase().indexOf("hh")!==-1,h=l?1:0,d=l?12:23;for(j=h;j<=d;j++){g=e?this.leadZero(j):j;f.push([j,g])}return f},fillMinute:function(){var e=this.initItems("m"),f,g,d=this.options.template.indexOf("mm")!==-1;for(g=0;g<=59;g+=this.options.minuteStep){f=d?this.leadZero(g):g;e.push([g,f])}return e},fillSecond:function(){var e=this.initItems("s"),f,g,d=this.options.template.indexOf("ss")!==-1;for(g=0;g<=59;g+=this.options.secondStep){f=d?this.leadZero(g):g;e.push([g,f])}return e},fillAmpm:function(){var e=this.options.template.indexOf("a")!==-1,f=this.options.template.indexOf("A")!==-1,d=[["am",e?"am":"AM"],["pm",e?"pm":"PM"]];return d},getValue:function(g){var f,d={},e=this,h=false;c.each(this.map,function(j,i){if(j==="ampm"){return}var l=j==="day"?1:0;d[j]=e["$"+j]?parseInt(e["$"+j].val(),10):l;if(isNaN(d[j])){h=true;return false}});if(h){return""}if(this.$ampm){if(d.hour===12){d.hour=this.$ampm.val()==="am"?0:12}else{d.hour=this.$ampm.val()==="am"?d.hour:d.hour+12}}f=moment([d.year,d.month,d.day,d.hour,d.minute,d.second]);this.highlight(f);g=g===undefined?this.options.format:g;if(g===null){return f.isValid()?f:null}else{return f.isValid()?f.format(g):""}},setValue:function(g){if(!g){return}var f=typeof g==="string"?moment(g,this.options.format):moment(g),e=this,d={};function h(i,j){var k={};i.children("option").each(function(m,l){var n=c(l).attr("value"),o;if(n===""){return}o=Math.abs(n-j);if(typeof k.distance==="undefined"||o<k.distance){k={value:n,distance:o}}});return k.value}if(f.isValid()){c.each(this.map,function(j,i){if(j==="ampm"){return}d[j]=f[i[1]]()});if(this.$ampm){if(d.hour>=12){d.ampm="pm";if(d.hour>12){d.hour-=12}}else{d.ampm="am";if(d.hour===0){d.hour=12}}}c.each(d,function(j,i){if(e["$"+j]){if(j==="minute"&&e.options.minuteStep>1&&e.options.roundTime){i=h(e["$"+j],i)}if(j==="second"&&e.options.secondStep>1&&e.options.roundTime){i=h(e["$"+j],i)}e["$"+j].val(i)}});this.$element.val(f.format(this.options.format))}},highlight:function(d){if(!d.isValid()){if(this.options.errorClass){this.$widget.addClass(this.options.errorClass)}else{if(!this.borderColor){this.borderColor=this.$widget.find("select").css("border-color")}this.$widget.find("select").css("border-color","red")}}else{if(this.options.errorClass){this.$widget.removeClass(this.options.errorClass)}else{this.$widget.find("select").css("border-color",this.borderColor)}}},leadZero:function(d){return d<=9?"0"+d:d},destroy:function(){this.$widget.remove();this.$element.removeData("combodate").show()}};c.fn.combodate=function(f){var g,e=Array.apply(null,arguments);e.shift();if(f==="getValue"&&this.length&&(g=this.eq(0).data("combodate"))){return g.getValue.apply(g,e)}return this.each(function(){var i=c(this),h=i.data("combodate"),d=typeof f=="object"&&f;if(!h){i.data("combodate",(h=new b(this,d)))}if(typeof f=="string"&&typeof h[f]=="function"){h[f].apply(h,e)}})};c.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:true,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:true}}(window.jQuery));(function(b){var c=function(d){this.init("combodate",d,c.defaults);if(!this.options.viewformat){this.options.viewformat=this.options.format}d.combodate=b.fn.editableutils.tryParseJson(d.combodate,true);this.options.combodate=b.extend({},c.defaults.combodate,d.combodate,{format:this.options.format,template:this.options.template})};b.fn.editableutils.inherit(c,b.fn.editabletypes.abstractinput);b.extend(c.prototype,{render:function(){this.$input.combodate(this.options.combodate)},value2html:function(e,d){var f=e?e.format(this.options.viewformat):"";b(d).text(f)},html2value:function(d){return d?moment(d,this.options.viewformat):null},value2str:function(d){return d?d.format(this.options.format):""},str2value:function(d){return d?moment(d,this.options.format):null},value2submit:function(d){return this.value2str(d)},value2input:function(d){this.$input.combodate("setValue",d)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}});c.defaults=b.extend({},b.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null});b.fn.editabletypes.combodate=c}(window.jQuery));(function(b){b.extend(b.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=b(b.fn.editableform.template);this.$form.find(".editable-error-block").addClass("help-block")}});b.fn.editableform.buttons='<button type="submit" class="btn btn-primary editable-submit"><i class="icon-ok icon-white"></i></button><button type="button" class="btn editable-cancel"><i class="icon-remove"></i></button>';b.fn.editableform.errorGroupClass="error";b.fn.editableform.errorBlockClass=null}(window.jQuery));(function(b){b.extend(b.fn.editableContainer.Popup.prototype,{containerName:"popover",innerCss:b.fn.popover&&b(b.fn.popover.defaults.template).find("p").length?".popover-content p":".popover-content",initContainer:function(){b.extend(this.containerOptions,{trigger:"manual",selector:false,content:" ",template:b.fn.popover.defaults.template});var c;if(this.$element.data("template")){c=this.$element.data("template");this.$element.removeData("template")}this.call(this.containerOptions);if(c){this.$element.data("template",c)}},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(c,d){this.container().options[c]=d},setPosition:function(){(function(){var g=this.tip(),c,i,e,h,d,f;d=typeof this.options.placement==="function"?this.options.placement.call(this,g[0],this.$element[0]):this.options.placement;c=/in/.test(d);g.removeClass("top right bottom left").css({top:0,left:0,display:"block"});i=this.getPosition(c);e=g[0].offsetWidth;h=g[0].offsetHeight;switch(c?d.split(" ")[1]:d){case"bottom":f={top:i.top+i.height,left:i.left+i.width/2-e/2};break;case"top":f={top:i.top-h,left:i.left+i.width/2-e/2};break;case"left":f={top:i.top+i.height/2-h/2,left:i.left-e};break;case"right":f={top:i.top+i.height/2-h/2,left:i.left+i.width};break}g.offset(f).addClass(d).addClass("in")}).call(this.container())}})}(window.jQuery));(function(h){function l(){return new Date(Date.UTC.apply(Date,arguments))}function e(){var o=new Date();return l(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate())}var i=function(r,o){var s=this;this._process_options(o);this.element=h(r);this.isInline=false;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0){this.component=false}this.picker=h(j.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass("datepicker-inline").appendTo(this.element)}else{this.picker.addClass("datepicker-dropdown dropdown-menu")}if(this.o.rtl){this.picker.addClass("datepicker-rtl");this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")}this.viewMode=this.o.startView;if(this.o.calendarWeeks){this.picker.find("tfoot th.today").attr("colspan",function(t,u){return parseInt(u)+1})}this._allow_update=false;this.setStartDate(this.o.startDate);this.setEndDate(this.o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show()}};i.prototype={constructor:i,_process_options:function(r){this._o=h.extend({},this._o,r);var u=this.o=h.extend({},this._o);var t=u.language;if(!c[t]){t=t.split("-")[0];if(!c[t]){t=f.language}}u.language=t;switch(u.startView){case 2:case"decade":u.startView=2;break;case 1:case"year":u.startView=1;break;default:u.startView=0}switch(u.minViewMode){case 1:case"months":u.minViewMode=1;break;case 2:case"years":u.minViewMode=2;break;default:u.minViewMode=0}u.startView=Math.max(u.startView,u.minViewMode);u.weekStart%=7;u.weekEnd=((u.weekStart+6)%7);var s=j.parseFormat(u.format);if(u.startDate!==-Infinity){u.startDate=j.parseDate(u.startDate,s,u.language)}if(u.endDate!==Infinity){u.endDate=j.parseDate(u.endDate,s,u.language)}u.daysOfWeekDisabled=u.daysOfWeekDisabled||[];if(!h.isArray(u.daysOfWeekDisabled)){u.daysOfWeekDisabled=u.daysOfWeekDisabled.split(/[,\s]*/)}u.daysOfWeekDisabled=h.map(u.daysOfWeekDisabled,function(o){return parseInt(o,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(o){for(var r=0,s,t;r<o.length;r++){s=o[r][0];t=o[r][1];s.on(t)}},_unapplyEvents:function(o){for(var r=0,s,t;r<o.length;r++){s=o[r][0];t=o[r][1];s.off(t)}},_buildEvents:function(){if(this.isInput){this._events=[[this.element,{focus:h.proxy(this.show,this),keyup:h.proxy(this.update,this),keydown:h.proxy(this.keydown,this)}]]}else{if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:h.proxy(this.show,this),keyup:h.proxy(this.update,this),keydown:h.proxy(this.keydown,this)}],[this.component,{click:h.proxy(this.show,this)}]]}else{if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:h.proxy(this.show,this)}]]}}}this._secondaryEvents=[[this.picker,{click:h.proxy(this.click,this)}],[h(window),{resize:h.proxy(this.place,this)}],[h(document),{mousedown:h.proxy(function(o){if(!(this.element.is(o.target)||this.element.find(o.target).size()||this.picker.is(o.target)||this.picker.find(o.target).size())){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(s,t){var r=t||this.date,o=new Date(r.getTime()+(r.getTimezoneOffset()*60000));this.element.trigger({type:s,date:o,format:h.proxy(function(v){var u=v||this.o.format;return j.formatDate(r,u,this.o.language)},this)})},show:function(o){if(!this.isInline){this.picker.appendTo("body")}this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();if(o){o.preventDefault()}this._trigger("show")},hide:function(o){if(this.isInline){return}if(!this.picker.is(":visible")){return}this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())){this.setValue()}this._trigger("hide")},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}},getDate:function(){var o=this.getUTCDate();return new Date(o.getTime()+(o.getTimezoneOffset()*60000))},getUTCDate:function(){return this.date},setDate:function(o){this.setUTCDate(new Date(o.getTime()-(o.getTimezoneOffset()*60000)))},setUTCDate:function(o){this.date=o;this.setValue()},setValue:function(){var o=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(o)}}else{this.element.val(o)}},getFormattedDate:function(o){if(o===undefined){o=this.o.format}return j.formatDate(this.date,o,this.o.language)},setStartDate:function(o){this._process_options({startDate:o});this.update();this.updateNavArrows()},setEndDate:function(o){this._process_options({endDate:o});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(o){this._process_options({daysOfWeekDisabled:o});this.update();this.updateNavArrows()},place:function(){if(this.isInline){return}var s=parseInt(this.element.parents().filter(function(){return h(this).css("z-index")!="auto"}).first().css("z-index"))+10;var r=this.component?this.component.parent().offset():this.element.offset();var o=this.component?this.component.outerHeight(true):this.element.outerHeight(true);this.picker.css({top:r.top+o,left:r.left,zIndex:s})},_allow_update:true,update:function(){if(!this._allow_update){return}var o,r=false;if(arguments&&arguments.length&&(typeof arguments[0]==="string"||arguments[0] instanceof Date)){o=arguments[0];r=true}else{o=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();delete this.element.data().date}this.date=j.parseDate(o,this.o.format,this.o.language);if(r){this.setValue()}if(this.date<this.o.startDate){this.viewDate=new Date(this.o.startDate)}else{if(this.date>this.o.endDate){this.viewDate=new Date(this.o.endDate)}else{this.viewDate=new Date(this.date)}}this.fill()},fillDow:function(){var r=this.o.weekStart,s="<tr>";if(this.o.calendarWeeks){var o='<th class="cw">&nbsp;</th>';s+=o;this.picker.find(".datepicker-days thead tr:first-child").prepend(o)}while(r<this.o.weekStart+7){s+='<th class="dow">'+c[this.o.language].daysMin[(r++)%7]+"</th>"}s+="</tr>";this.picker.find(".datepicker-days thead").append(s)},fillMonths:function(){var r="",o=0;while(o<12){r+='<span class="month">'+c[this.o.language].monthsShort[o++]+"</span>"}this.picker.find(".datepicker-months td").html(r)},setRange:function(o){if(!o||!o.length){delete this.range}else{this.range=h.map(o,function(r){return r.valueOf()})}this.fill()},getClassNames:function(t){var r=[],u=this.viewDate.getUTCFullYear(),v=this.viewDate.getUTCMonth(),o=this.date.valueOf(),s=new Date();if(t.getUTCFullYear()<u||(t.getUTCFullYear()==u&&t.getUTCMonth()<v)){r.push("old")}else{if(t.getUTCFullYear()>u||(t.getUTCFullYear()==u&&t.getUTCMonth()>v)){r.push("new")}}if(this.o.todayHighlight&&t.getUTCFullYear()==s.getFullYear()&&t.getUTCMonth()==s.getMonth()&&t.getUTCDate()==s.getDate()){r.push("today")}if(o&&t.valueOf()==o){r.push("active")}if(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||h.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){r.push("disabled")}if(this.range){if(t>this.range[0]&&t<this.range[this.range.length-1]){r.push("range")}if(h.inArray(t.valueOf(),this.range)!=-1){r.push("selected")}}return r},fill:function(){var I=new Date(this.viewDate),z=I.getUTCFullYear(),J=I.getUTCMonth(),D=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,H=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,w=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,E=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,x=this.date&&this.date.valueOf(),t;this.picker.find(".datepicker-days thead th.datepicker-switch").text(c[this.o.language].months[J]+" "+z);this.picker.find("tfoot th.today").text(c[this.o.language].today).toggle(this.o.todayBtn!==false);this.picker.find("tfoot th.clear").text(c[this.o.language].clear).toggle(this.o.clearBtn!==false);this.updateNavArrows();this.fillMonths();var L=l(z,J-1,28,0,0,0,0),G=j.getDaysInMonth(L.getUTCFullYear(),L.getUTCMonth());L.setUTCDate(G);L.setUTCDate(G-(L.getUTCDay()-this.o.weekStart+7)%7);var o=new Date(L);o.setUTCDate(o.getUTCDate()+42);o=o.valueOf();var y=[];var C;while(L.valueOf()<o){if(L.getUTCDay()==this.o.weekStart){y.push("<tr>");if(this.o.calendarWeeks){var r=new Date(+L+(this.o.weekStart-L.getUTCDay()-7)%7*86400000),u=new Date(+r+(7+4-r.getUTCDay())%7*86400000),s=new Date(+(s=l(u.getUTCFullYear(),0,1))+(7+4-s.getUTCDay())%7*86400000),A=(u-s)/86400000/7+1;y.push('<td class="cw">'+A+"</td>")}}C=this.getClassNames(L);C.push("day");var B=this.o.beforeShowDay(L);if(B===undefined){B={}}else{if(typeof(B)==="boolean"){B={enabled:B}}else{if(typeof(B)==="string"){B={classes:B}}}}if(B.enabled===false){C.push("disabled")}if(B.classes){C=C.concat(B.classes.split(/\s+/))}if(B.tooltip){t=B.tooltip}C=h.unique(C);y.push('<td class="'+C.join(" ")+'"'+(t?' title="'+t+'"':"")+">"+L.getUTCDate()+"</td>");if(L.getUTCDay()==this.o.weekEnd){y.push("</tr>")}L.setUTCDate(L.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(y.join(""));var M=this.date&&this.date.getUTCFullYear();var v=this.picker.find(".datepicker-months").find("th:eq(1)").text(z).end().find("span").removeClass("active");if(M&&M==z){v.eq(this.date.getUTCMonth()).addClass("active")}if(z<D||z>w){v.addClass("disabled")}if(z==D){v.slice(0,H).addClass("disabled")}if(z==w){v.slice(E+1).addClass("disabled")}y="";z=parseInt(z/10,10)*10;var K=this.picker.find(".datepicker-years").find("th:eq(1)").text(z+"-"+(z+9)).end().find("td");z-=1;for(var F=-1;F<11;F++){y+='<span class="year'+(F==-1?" old":F==10?" new":"")+(M==z?" active":"")+(z<D||z>w?" disabled":"")+'">'+z+"</span>";z+=1}K.html(y)},updateNavArrows:function(){if(!this._allow_update){return}var s=new Date(this.viewDate),o=s.getUTCFullYear(),r=s.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&o<=this.o.startDate.getUTCFullYear()&&r<=this.o.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&o>=this.o.endDate.getUTCFullYear()&&r>=this.o.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:case 2:if(this.o.startDate!==-Infinity&&o<=this.o.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&o>=this.o.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},click:function(u){u.preventDefault();var v=h(u.target).closest("span, td, th");if(v.length==1){switch(v[0].nodeName.toLowerCase()){case"th":switch(v[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var o=j.modes[this.viewMode].navStep*(v[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,o);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,o);break}this.fill();break;case"today":var r=new Date();r=l(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0);this.showMode(-2);var s=this.o.todayBtn=="linked"?null:"view";this._setDate(r,s);break;case"clear":var t;if(this.isInput){t=this.element}else{if(this.component){t=this.element.find("input")}}if(t){t.val("").change()}this._trigger("changeDate");this.update();if(this.o.autoclose){this.hide()}break}break;case"span":if(!v.is(".disabled")){this.viewDate.setUTCDate(1);if(v.is(".month")){var y=1;var w=v.parent().find("span").index(v);var x=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(w);this._trigger("changeMonth",this.viewDate);if(this.o.minViewMode===1){this._setDate(l(x,w,y,0,0,0,0))}}else{var x=parseInt(v.text(),10)||0;var y=1;var w=0;this.viewDate.setUTCFullYear(x);this._trigger("changeYear",this.viewDate);if(this.o.minViewMode===2){this._setDate(l(x,w,y,0,0,0,0))}}this.showMode(-1);this.fill()}break;case"td":if(v.is(".day")&&!v.is(".disabled")){var y=parseInt(v.text(),10)||1;var x=this.viewDate.getUTCFullYear(),w=this.viewDate.getUTCMonth();if(v.is(".old")){if(w===0){w=11;x-=1}else{w-=1}}else{if(v.is(".new")){if(w==11){w=0;x+=1}else{w+=1}}}this._setDate(l(x,w,y,0,0,0,0))}break}}},_setDate:function(o,s){if(!s||s=="date"){this.date=new Date(o)}if(!s||s=="view"){this.viewDate=new Date(o)}this.fill();this.setValue();this._trigger("changeDate");var r;if(this.isInput){r=this.element}else{if(this.component){r=this.element.find("input")}}if(r){r.change();if(this.o.autoclose&&(!s||s=="date")){this.hide()}}},moveMonth:function(o,r){if(!r){return o}var u=new Date(o.valueOf()),y=u.getUTCDate(),v=u.getUTCMonth(),t=Math.abs(r),x,w;r=r>0?1:-1;if(t==1){w=r==-1?function(){return u.getUTCMonth()==v}:function(){return u.getUTCMonth()!=x};x=v+r;u.setUTCMonth(x);if(x<0||x>11){x=(x+12)%12}}else{for(var s=0;s<t;s++){u=this.moveMonth(u,r)}x=u.getUTCMonth();u.setUTCDate(y);w=function(){return x!=u.getUTCMonth()}}while(w()){u.setUTCDate(--y);u.setUTCMonth(x)}return u},moveYear:function(r,o){return this.moveMonth(r,o*12)},dateWithinRange:function(o){return o>=this.o.startDate&&o<=this.o.endDate},keydown:function(x){if(this.picker.is(":not(:visible)")){if(x.keyCode==27){this.show()}return}var t=false,s,r,w,o,v;switch(x.keyCode){case 27:this.hide();x.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation){break}s=x.keyCode==37?-1:1;if(x.ctrlKey){o=this.moveYear(this.date,s);v=this.moveYear(this.viewDate,s)}else{if(x.shiftKey){o=this.moveMonth(this.date,s);v=this.moveMonth(this.viewDate,s)}else{o=new Date(this.date);o.setUTCDate(this.date.getUTCDate()+s);v=new Date(this.viewDate);v.setUTCDate(this.viewDate.getUTCDate()+s)}}if(this.dateWithinRange(o)){this.date=o;this.viewDate=v;this.setValue();this.update();x.preventDefault();t=true}break;case 38:case 40:if(!this.o.keyboardNavigation){break}s=x.keyCode==38?-1:1;if(x.ctrlKey){o=this.moveYear(this.date,s);v=this.moveYear(this.viewDate,s)}else{if(x.shiftKey){o=this.moveMonth(this.date,s);v=this.moveMonth(this.viewDate,s)}else{o=new Date(this.date);o.setUTCDate(this.date.getUTCDate()+s*7);v=new Date(this.viewDate);v.setUTCDate(this.viewDate.getUTCDate()+s*7)}}if(this.dateWithinRange(o)){this.date=o;this.viewDate=v;this.setValue();this.update();x.preventDefault();t=true}break;case 13:this.hide();x.preventDefault();break;case 9:this.hide();break}if(t){this._trigger("changeDate");var u;if(this.isInput){u=this.element}else{if(this.component){u=this.element.find("input")}}if(u){u.change()}}},showMode:function(o){if(o){this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+o))}this.picker.find(">div").hide().filter(".datepicker-"+j.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};var n=function(r,o){this.element=h(r);this.inputs=h.map(o.inputs,function(s){return s.jquery?s[0]:s});delete o.inputs;h(this.inputs).datepicker(o).bind("changeDate",h.proxy(this.dateUpdated,this));this.pickers=h.map(this.inputs,function(s){return h(s).data("datepicker")});this.updateDates()};n.prototype={updateDates:function(){this.dates=h.map(this.pickers,function(o){return o.date});this.updateRanges()},updateRanges:function(){var o=h.map(this.dates,function(r){return r.valueOf()});h.each(this.pickers,function(r,s){s.setRange(o)})},dateUpdated:function(t){var u=h(t.target).data("datepicker"),s=u.getUTCDate(),r=h.inArray(t.target,this.inputs),o=this.inputs.length;if(r==-1){return}if(s<this.dates[r]){while(r>=0&&s<this.dates[r]){this.pickers[r--].setUTCDate(s)}}else{if(s>this.dates[r]){while(r<o&&s>this.dates[r]){this.pickers[r++].setUTCDate(s)}}}this.updateDates()},remove:function(){h.map(this.pickers,function(o){o.remove()});delete this.element.data().datepicker}};function g(t,w){var v=h(t).data(),o={},u,s=new RegExp("^"+w.toLowerCase()+"([A-Z])"),w=new RegExp("^"+w.toLowerCase());for(var r in v){if(w.test(r)){u=r.replace(s,function(y,x){return x.toLowerCase()});o[u]=v[r]}}return o}function b(s){var o={};if(!c[s]){s=s.split("-")[0];if(!c[s]){return}}var r=c[s];h.each(m,function(u,t){if(t in r){o[t]=r[t]}});return o}var d=h.fn.datepicker;var k=h.fn.datepicker=function(t){var r=Array.apply(null,arguments);r.shift();var s,o;this.each(function(){var B=h(this),z=B.data("datepicker"),v=typeof t=="object"&&t;if(!z){var x=g(this,"date"),u=h.extend({},f,x,v),w=b(u.language),y=h.extend({},f,w,x,v);if(B.is(".input-daterange")||y.inputs){var A={inputs:y.inputs||B.find("input").toArray()};B.data("datepicker",(z=new n(this,h.extend(y,A))))}else{B.data("datepicker",(z=new i(this,y)))}}if(typeof t=="string"&&typeof z[t]=="function"){s=z[t].apply(z,r);if(s!==undefined){return false}}});if(s!==undefined){return s}else{return this}};var f=h.fn.datepicker.defaults={autoclose:false,beforeShowDay:h.noop,calendarWeeks:false,clearBtn:false,daysOfWeekDisabled:[],endDate:Infinity,forceParse:true,format:"mm/dd/yyyy",keyboardNavigation:true,language:"en",minViewMode:0,rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0};var m=h.fn.datepicker.locale_opts=["format","rtl","weekStart"];h.fn.datepicker.Constructor=i;var c=h.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};var j={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(o){return(((o%4===0)&&(o%100!==0))||(o%400===0))},getDaysInMonth:function(o,r){return[31,(j.isLeapYear(o)?29:28),31,30,31,30,31,31,30,31,30,31][r]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(s){var o=s.replace(this.validParts,"\0").split("\0"),r=s.match(this.validParts);if(!o||!o.length||!r||r.length===0){throw new Error("Invalid date format.")}return{separators:o,parts:r}},parseDate:function(u,D,x){if(u instanceof Date){return u}if(typeof D==="string"){D=j.parseFormat(D)}if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(u)){var F=/([\-+]\d+)([dmwy])/,w=u.match(/([\-+]\d+)([dmwy])/g),o,v;u=new Date();for(var y=0;y<w.length;y++){o=F.exec(w[y]);v=parseInt(o[1]);switch(o[2]){case"d":u.setUTCDate(u.getUTCDate()+v);break;case"m":u=i.prototype.moveMonth.call(i.prototype,u,v);break;case"w":u.setUTCDate(u.getUTCDate()+v*7);break;case"y":u=i.prototype.moveYear.call(i.prototype,u,v);break}}return l(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),0,0,0)}var w=u&&u.match(this.nonpunctuation)||[],u=new Date(),B={},C=["yyyy","yy","M","MM","m","mm","d","dd"],E={yyyy:function(H,s){return H.setUTCFullYear(s)},yy:function(H,s){return H.setUTCFullYear(2000+s)},m:function(H,s){s-=1;while(s<0){s+=12}s%=12;H.setUTCMonth(s);while(H.getUTCMonth()!=s){H.setUTCDate(H.getUTCDate()-1)}return H},d:function(H,s){return H.setUTCDate(s)}},t,z,o;E.M=E.MM=E.mm=E.m;E.dd=E.d;u=l(u.getFullYear(),u.getMonth(),u.getDate(),0,0,0);var A=D.parts.slice();if(w.length!=A.length){A=h(A).filter(function(s,H){return h.inArray(H,C)!==-1}).toArray()}if(w.length==A.length){for(var y=0,r=A.length;y<r;y++){t=parseInt(w[y],10);o=A[y];if(isNaN(t)){switch(o){case"MM":z=h(c[x].months).filter(function(){var s=this.slice(0,w[y].length),H=w[y].slice(0,s.length);return s==H});t=h.inArray(z[0],c[x].months)+1;break;case"M":z=h(c[x].monthsShort).filter(function(){var s=this.slice(0,w[y].length),H=w[y].slice(0,s.length);return s==H});t=h.inArray(z[0],c[x].monthsShort)+1;break}}B[o]=t}for(var y=0,G;y<C.length;y++){G=C[y];if(G in B&&!isNaN(B[G])){E[G](u,B[G])}}}return u},formatDate:function(o,u,w){if(typeof u==="string"){u=j.parseFormat(u)}var v={d:o.getUTCDate(),D:c[w].daysShort[o.getUTCDay()],DD:c[w].days[o.getUTCDay()],m:o.getUTCMonth()+1,M:c[w].monthsShort[o.getUTCMonth()],MM:c[w].months[o.getUTCMonth()],yy:o.getUTCFullYear().toString().substring(2),yyyy:o.getUTCFullYear()};v.dd=(v.d<10?"0":"")+v.d;v.mm=(v.m<10?"0":"")+v.m;var o=[],t=h.extend([],u.separators);for(var s=0,r=u.parts.length;s<=r;s++){if(t.length){o.push(t.shift())}o.push(v[u.parts[s]])}return o.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};j.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+j.headTemplate+"<tbody></tbody>"+j.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+j.headTemplate+j.contTemplate+j.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+j.headTemplate+j.contTemplate+j.footTemplate+"</table></div></div>";h.fn.datepicker.DPGlobal=j;h.fn.datepicker.noConflict=function(){h.fn.datepicker=d;return this};h(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(r){var o=h(this);if(o.data("datepicker")){return}r.preventDefault();k.call(o,"show")});h(function(){k.call(h('[data-provide="datepicker-inline"]'))})}(window.jQuery));(function(c){c.fn.bdatepicker=c.fn.datepicker.noConflict();if(!c.fn.datepicker){c.fn.datepicker=c.fn.bdatepicker}var b=function(d){this.init("date",d,b.defaults);this.initPicker(d,b.defaults)};c.fn.editableutils.inherit(b,c.fn.editabletypes.abstractinput);c.extend(b.prototype,{initPicker:function(d,e){if(!this.options.viewformat){this.options.viewformat=this.options.format}this.options.datepicker=c.extend({},e.datepicker,d.datepicker,{format:this.options.viewformat});this.options.datepicker.language=this.options.datepicker.language||"en";this.dpg=c.fn.bdatepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker);if(this.options.clear){this.$clear=c('<a href="#"></a>').html(this.options.clear).click(c.proxy(function(d){d.preventDefault();d.stopPropagation();this.clear()},this));this.$tpl.parent().append(c('<div class="editable-clear">').append(this.$clear))}},value2html:function(e,d){var f=e?this.dpg.formatDate(e,this.parsedViewFormat,this.options.datepicker.language):"";b.superclass.value2html(f,d)},html2value:function(d){return this.parseDate(d,this.parsedViewFormat)},value2str:function(d){return d?this.dpg.formatDate(d,this.parsedFormat,this.options.datepicker.language):""},str2value:function(d){return this.parseDate(d,this.parsedFormat)},value2submit:function(d){return this.value2str(d)},value2input:function(d){this.$input.bdatepicker("update",d)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null;this.$input.find(".active").removeClass("active");if(!this.options.showbuttons){this.$input.closest("form").submit()}},autosubmit:function(){this.$input.on("mouseup",".day",function(f){if(c(f.currentTarget).is(".old")||c(f.currentTarget).is(".new")){return}var d=c(this).closest("form");setTimeout(function(){d.submit()},200)})},parseDate:function(g,e){var d=null,f;if(g){d=this.dpg.parseDate(g,e,this.options.datepicker.language);if(typeof g==="string"){f=this.dpg.formatDate(d,e,this.options.datepicker.language);if(g!==f){d=null}}}return d}});b.defaults=c.extend({},c.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:false},clear:"&times; clear"});c.fn.editabletypes.date=b}(window.jQuery));(function(c){var b=function(d){this.init("datefield",d,b.defaults);this.initPicker(d,b.defaults)};c.fn.editableutils.inherit(b,c.fn.editabletypes.date);c.extend(b.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.bdatepicker(this.options.datepicker);this.$input.off("focus keydown");this.$input.keyup(c.proxy(function(){this.$tpl.removeData("date");this.$tpl.bdatepicker("update")},this))},value2input:function(d){this.$input.val(d?this.dpg.formatDate(d,this.parsedViewFormat,this.options.datepicker.language):"");this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){c.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});b.defaults=c.extend({},c.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:true}});c.fn.editabletypes.datefield=b}(window.jQuery));(function(b){var c=function(d){this.init("datetime",d,c.defaults);this.initPicker(d,c.defaults)};b.fn.editableutils.inherit(c,b.fn.editabletypes.abstractinput);b.extend(c.prototype,{initPicker:function(d,e){if(!this.options.viewformat){this.options.viewformat=this.options.format}this.options.datetimepicker=b.extend({},e.datetimepicker,d.datetimepicker,{format:this.options.viewformat});this.options.datetimepicker.language=this.options.datetimepicker.language||"en";this.dpg=b.fn.datetimepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker);this.$input.on("changeMode",function(g){var d=b(this).closest("form").parent();setTimeout(function(){d.triggerHandler("resize")},0)});if(this.options.clear){this.$clear=b('<a href="#"></a>').html(this.options.clear).click(b.proxy(function(d){d.preventDefault();d.stopPropagation();this.clear()},this));this.$tpl.parent().append(b('<div class="editable-clear">').append(this.$clear))}},value2html:function(e,d){var f=e?this.dpg.formatDate(this.toUTC(e),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";if(d){c.superclass.value2html(f,d)}else{return f}},html2value:function(d){var e=this.parseDate(d,this.parsedViewFormat);return e?this.fromUTC(e):null},value2str:function(d){return d?this.dpg.formatDate(this.toUTC(d),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(e){var d=this.parseDate(e,this.parsedFormat);return d?this.fromUTC(d):null},value2submit:function(d){return this.value2str(d)},value2input:function(d){if(d){this.$input.data("datetimepicker").setDate(d)}},input2value:function(){var d=this.$input.data("datetimepicker");return d.date?d.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null;this.$input.find(".active").removeClass("active");if(!this.options.showbuttons){this.$input.closest("form").submit()}},autosubmit:function(){this.$input.on("mouseup",".minute",function(f){var d=b(this).closest("form");setTimeout(function(){d.submit()},200)})},toUTC:function(d){return d?new Date(d.valueOf()-d.getTimezoneOffset()*60000):d},fromUTC:function(d){return d?new Date(d.valueOf()+d.getTimezoneOffset()*60000):d},parseDate:function(g,e){var d=null,f;if(g){d=this.dpg.parseDate(g,e,this.options.datetimepicker.language,this.options.formatType);if(typeof g==="string"){f=this.dpg.formatDate(d,e,this.options.datetimepicker.language,this.options.formatType);if(g!==f){d=null}}}return d}});c.defaults=b.extend({},b.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:false,autoclose:false},clear:"&times; clear"});b.fn.editabletypes.datetime=c}(window.jQuery));(function(c){var b=function(d){this.init("datetimefield",d,b.defaults);this.initPicker(d,b.defaults)};c.fn.editableutils.inherit(b,c.fn.editabletypes.datetime);c.extend(b.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.datetimepicker(this.options.datetimepicker);this.$input.off("focus keydown");this.$input.keyup(c.proxy(function(){this.$tpl.removeData("date");this.$tpl.datetimepicker("update")},this))},value2input:function(d){this.$input.val(this.value2html(d));this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){c.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});b.defaults=c.extend({},c.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:false,autoclose:true}});c.fn.editabletypes.datetimefield=b}(window.jQuery));(function(b){var c=function(d){this.init("typeahead",d,c.defaults);this.options.typeahead=b.extend({},c.defaults.typeahead,{matcher:this.matcher,sorter:this.sorter,highlighter:this.highlighter,updater:this.updater},d.typeahead)};b.fn.editableutils.inherit(c,b.fn.editabletypes.list);b.extend(c.prototype,{renderList:function(){this.$input=this.$tpl.is("input")?this.$tpl:this.$tpl.find('input[type="text"]');this.options.typeahead.source=this.sourceData;this.$input.typeahead(this.options.typeahead);var d=this.$input.data("typeahead");d.render=b.proxy(this.typeaheadRender,d);d.select=b.proxy(this.typeaheadSelect,d);d.move=b.proxy(this.typeaheadMove,d);this.renderClear();this.setClass();this.setAttr("placeholder")},value2htmlFinal:function(f,e){if(this.getIsObjects()){var d=b.fn.editableutils.itemsByValue(f,this.sourceData);b(e).text(d.length?d[0].text:"")}else{b(e).text(f)}},html2value:function(d){return d?d:null},value2input:function(e){if(this.getIsObjects()){var d=b.fn.editableutils.itemsByValue(e,this.sourceData);this.$input.data("value",e).val(d.length?d[0].text:"")}else{this.$input.val(e)}},input2value:function(){if(this.getIsObjects()){var e=this.$input.data("value"),d=b.fn.editableutils.itemsByValue(e,this.sourceData);if(d.length&&d[0].text.toLowerCase()===this.$input.val().toLowerCase()){return e}else{return null}}else{return this.$input.val()}},getIsObjects:function(){if(this.isObjects===undefined){this.isObjects=false;for(var d=0;d<this.sourceData.length;d++){if(this.sourceData[d].value!==this.sourceData[d].text){this.isObjects=true;break}}}return this.isObjects},activate:b.fn.editabletypes.text.prototype.activate,renderClear:b.fn.editabletypes.text.prototype.renderClear,postrender:b.fn.editabletypes.text.prototype.postrender,toggleClear:b.fn.editabletypes.text.prototype.toggleClear,clear:function(){b.fn.editabletypes.text.prototype.clear.call(this);this.$input.data("value","")},matcher:function(d){return b.fn.typeahead.Constructor.prototype.matcher.call(this,d.text)},sorter:function(f){var g=[],e=[],d=[],h,i;while(h=f.shift()){i=h.text;if(!i.toLowerCase().indexOf(this.query.toLowerCase())){g.push(h)}else{if(~i.indexOf(this.query)){e.push(h)}else{d.push(h)}}}return g.concat(e,d)},highlighter:function(d){return b.fn.typeahead.Constructor.prototype.highlighter.call(this,d.text)},updater:function(d){this.$element.data("value",d.value);return d.text},typeaheadRender:function(d){var e=this;d=b(d).map(function(f,g){f=b(e.options.item).data("item",g);f.find("a").html(e.highlighter(g));return f[0]});if(this.options.autoSelect){d.first().addClass("active")}this.$menu.html(d);return this},typeaheadSelect:function(){var d=this.$menu.find(".active").data("item");if(this.options.autoSelect||d){this.$element.val(this.updater(d)).change()}return this.hide()},typeaheadMove:function(d){if(!this.shown){return}switch(d.keyCode){case 9:case 13:case 27:if(!this.$menu.find(".active").length){return}d.preventDefault();break;case 38:d.preventDefault();this.prev();break;case 40:d.preventDefault();this.next();break}d.stopPropagation()}});c.defaults=b.extend({},b.fn.editabletypes.list.defaults,{tpl:'<input type="text">',typeahead:null,clear:true});b.fn.editabletypes.typeahead=c}(window.jQuery));(function(b){var c=function(d){this.init("address",d,c.defaults)};b.fn.editableutils.inherit(c,b.fn.editabletypes.abstractinput);b.extend(c.prototype,{render:function(){this.$input=this.$tpl.find("input")},value2html:function(f,e){if(!f){b(e).empty();return}var d=b("<div>").text(f.city).html()+", "+b("<div>").text(f.street).html()+" st., bld. "+b("<div>").text(f.building).html();b(e).html(d)},html2value:function(d){return null},value2str:function(e){var f="";if(e){for(var d in e){f=f+d+":"+e[d]+";"}}return f},str2value:function(d){return d},value2input:function(d){if(!d){return}this.$input.filter('[name="city"]').val(d.city);this.$input.filter('[name="street"]').val(d.street);this.$input.filter('[name="building"]').val(d.building)},input2value:function(){return{city:this.$input.filter('[name="city"]').val(),street:this.$input.filter('[name="street"]').val(),building:this.$input.filter('[name="building"]').val()}},activate:function(){this.$input.filter('[name="city"]').focus()},autosubmit:function(){this.$input.keydown(function(d){if(d.which===13){b(this).closest("form").submit()}})}});c.defaults=b.extend({},b.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-address"><label><span>City: </span><input type="text" name="city" class="input-small"></label></div><div class="editable-address"><label><span>Street: </span><input type="text" name="street" class="input-small"></label></div><div class="editable-address"><label><span>Building: </span><input type="text" name="building" class="input-mini"></label></div>',inputclass:""});b.fn.editabletypes.address=c}(window.jQuery));(function(c){c.color={};c.color.make=function(e,f,h,g){var d={};d.r=e||0;d.g=f||0;d.b=h||0;d.a=g!=null?g:1;d.add=function(i,j){for(var k=0;k<i.length;++k){d[i.charAt(k)]+=j}return d.normalize()};d.scale=function(i,j){for(var k=0;k<i.length;++k){d[i.charAt(k)]*=j}return d.normalize()};d.toString=function(){if(d.a>=1){return"rgb("+[d.r,d.g,d.b].join(",")+")"}else{return"rgba("+[d.r,d.g,d.b,d.a].join(",")+")"}};d.normalize=function(){function i(k,j,l){return j<k?k:(j>l?l:j)}d.r=i(0,parseInt(d.r),255);d.g=i(0,parseInt(d.g),255);d.b=i(0,parseInt(d.b),255);d.a=i(0,d.a,1);return d};d.clone=function(){return c.color.make(d.r,d.b,d.g,d.a)};return d.normalize()};c.color.extract=function(e,f){var d;do{d=e.css(f).toLowerCase();if(d!=""&&d!="transparent"){break}e=e.parent()}while(!c.nodeName(e.get(0),"body"));if(d=="rgba(0, 0, 0, 0)"){d="transparent"}return c.color.parse(d)};c.color.parse=function(d){var e,g=c.color.make;if(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(d)){return g(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10))}if(e=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(d)){return g(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),parseFloat(e[4]))}if(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(d)){return g(parseFloat(e[1])*2.55,parseFloat(e[2])*2.55,parseFloat(e[3])*2.55)}if(e=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(d)){return g(parseFloat(e[1])*2.55,parseFloat(e[2])*2.55,parseFloat(e[3])*2.55,parseFloat(e[4]))}if(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(d)){return g(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16))}if(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(d)){return g(parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16))}var f=c.trim(d).toLowerCase();if(f=="transparent"){return g(255,255,255,0)}else{e=b[f]||[0,0,0];return g(e[0],e[1],e[2])}};var b={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);(function(f){var e=Object.prototype.hasOwnProperty;function b(i,h){var k=h.children("."+i)[0];if(k==null){k=document.createElement("canvas");k.className=i;f(k).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(h);if(!k.getContext){if(window.G_vmlCanvasManager){k=window.G_vmlCanvasManager.initElement(k)}else{throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.")}}}this.element=k;var j=this.context=k.getContext("2d");var g=window.devicePixelRatio||1,l=j.webkitBackingStorePixelRatio||j.mozBackingStorePixelRatio||j.msBackingStorePixelRatio||j.oBackingStorePixelRatio||j.backingStorePixelRatio||1;this.pixelRatio=g/l;this.resize(h.width(),h.height());this.textContainer=null;this.text={};this._textCache={}}b.prototype.resize=function(j,g){if(j<=0||g<=0){throw new Error("Invalid dimensions for plot, width = "+j+", height = "+g)}var i=this.element,h=this.context,k=this.pixelRatio;if(this.width!=j){i.width=j*k;i.style.width=j+"px";this.width=j}if(this.height!=g){i.height=g*k;i.style.height=g+"px";this.height=g}h.restore();h.save();h.scale(k,k)};b.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};b.prototype.render=function(){var g=this._textCache;for(var r in g){if(e.call(g,r)){var o=this.getTextLayer(r),h=g[r];o.hide();for(var n in h){if(e.call(h,n)){var j=h[n];for(var s in j){if(e.call(j,s)){var l=j[s].positions;for(var k=0,m;m=l[k];k++){if(m.active){if(!m.rendered){o.append(m.element);m.rendered=true}}else{l.splice(k--,1);if(m.rendered){m.element.detach()}}}if(l.length==0){delete j[s]}}}}}o.show()}}};b.prototype.getTextLayer=function(h){var g=this.text[h];if(g==null){if(this.textContainer==null){this.textContainer=f("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)}g=this.text[h]=f("<div></div>").addClass(h).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)}return g};b.prototype.getTextInfo=function(n,r,k,l,h){var o,g,j,i;r=""+r;if(typeof k==="object"){o=k.style+" "+k.variant+" "+k.weight+" "+k.size+"px/"+k.lineHeight+"px "+k.family}else{o=k}g=this._textCache[n];if(g==null){g=this._textCache[n]={}}j=g[o];if(j==null){j=g[o]={}}i=j[r];if(i==null){var m=f("<div></div>").html(r).css({position:"absolute","max-width":h,top:-9999}).appendTo(this.getTextLayer(n));if(typeof k==="object"){m.css({font:o,color:k.color})}else{if(typeof k==="string"){m.addClass(k)}}i=j[r]={width:m.outerWidth(true),height:m.outerHeight(true),element:m,positions:[]};m.detach()}return i};b.prototype.addText=function(r,u,s,v,j,k,g,o,t){var h=this.getTextInfo(r,v,j,k,g),m=h.positions;if(o=="center"){u-=h.width/2}else{if(o=="right"){u-=h.width}}if(t=="middle"){s-=h.height/2}else{if(t=="bottom"){s-=h.height}}for(var l=0,n;n=m[l];l++){if(n.x==u&&n.y==s){n.active=true;return}}n={active:true,rendered:false,element:m.length?h.element.clone():h.element,x:u,y:s};m.push(n);n.element.css({top:Math.round(s),left:Math.round(u),"text-align":o})};b.prototype.removeText=function(r,t,s,v,j,k){if(v==null){var g=this._textCache[r];if(g!=null){for(var o in g){if(e.call(g,o)){var h=g[o];for(var u in h){if(e.call(h,u)){var m=h[u].positions;for(var l=0,n;n=m[l];l++){n.active=false}}}}}}}else{var m=this.getTextInfo(r,v,j,k).positions;for(var l=0,n;n=m[l];l++){if(n.x==t&&n.y==s){n.active=false}}}};function d(T,D,F,h){var w=[],O={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false,zero:true},shadowSize:3,highlightColor:null},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1000/60},hooks:{}},af=null,ao=null,ap=null,G=null,az=null,ar=[],Z=[],M={left:0,right:0,top:0,bottom:0},l=0,ag=0,s={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},i=this;i.setData=N;i.setupGrid=R;i.draw=ax;i.getPlaceholder=function(){return T};i.getCanvas=function(){return af.element};i.getPlotOffset=function(){return M};i.width=function(){return l};i.height=function(){return ag};i.offset=function(){var aB=ap.offset();aB.left+=M.left;aB.top+=M.top;return aB};i.getData=function(){return w};i.getAxes=function(){var aC={},aB;f.each(ar.concat(Z),function(aD,aE){if(aE){aC[aE.direction+(aE.n!=1?aE.n:"")+"axis"]=aE}});return aC};i.getXAxes=function(){return ar};i.getYAxes=function(){return Z};i.c2p=ab;i.p2c=U;i.getOptions=function(){return O};i.highlight=aq;i.unhighlight=ak;i.triggerRedrawOverlay=aa;i.pointOffset=function(aB){return{left:parseInt(ar[A(aB,"x")-1].p2c(+aB.x)+M.left,10),top:parseInt(Z[A(aB,"y")-1].p2c(+aB.y)+M.top,10)}};i.shutdown=r;i.resize=function(){var aC=T.width(),aB=T.height();af.resize(aC,aB);ao.resize(aC,aB)};i.hooks=s;K(i);ad(F);aA();N(D);R();ax();av();function I(aD,aB){aB=[i].concat(aB);for(var aC=0;aC<aD.length;++aC){aD[aC].apply(this,aB)}}function K(){var aC={Canvas:b};for(var aB=0;aB<h.length;++aB){var aD=h[aB];aD.init(i,aC);if(aD.options){f.extend(true,O,aD.options)}}}function ad(aD){f.extend(true,O,aD);if(aD&&aD.colors){O.colors=aD.colors}if(O.xaxis.color==null){O.xaxis.color=f.color.parse(O.grid.color).scale("a",0.22).toString()}if(O.yaxis.color==null){O.yaxis.color=f.color.parse(O.grid.color).scale("a",0.22).toString()}if(O.xaxis.tickColor==null){O.xaxis.tickColor=O.grid.tickColor||O.xaxis.color}if(O.yaxis.tickColor==null){O.yaxis.tickColor=O.grid.tickColor||O.yaxis.color}if(O.grid.borderColor==null){O.grid.borderColor=O.grid.color}if(O.grid.tickColor==null){O.grid.tickColor=f.color.parse(O.grid.color).scale("a",0.22).toString()}var aB,aG,aE,aC={style:T.css("font-style"),size:Math.round(0.8*(+T.css("font-size").replace("px","")||13)),variant:T.css("font-variant"),weight:T.css("font-weight"),family:T.css("font-family")};aC.lineHeight=aC.size*1.15;aE=O.xaxes.length||1;for(aB=0;aB<aE;++aB){aG=O.xaxes[aB];if(aG&&!aG.tickColor){aG.tickColor=aG.color}aG=f.extend(true,{},O.xaxis,aG);O.xaxes[aB]=aG;if(aG.font){aG.font=f.extend({},aC,aG.font);if(!aG.font.color){aG.font.color=aG.color}}}aE=O.yaxes.length||1;for(aB=0;aB<aE;++aB){aG=O.yaxes[aB];if(aG&&!aG.tickColor){aG.tickColor=aG.color}aG=f.extend(true,{},O.yaxis,aG);O.yaxes[aB]=aG;if(aG.font){aG.font=f.extend({},aC,aG.font);if(!aG.font.color){aG.font.color=aG.color}}}if(O.xaxis.noTicks&&O.xaxis.ticks==null){O.xaxis.ticks=O.xaxis.noTicks}if(O.yaxis.noTicks&&O.yaxis.ticks==null){O.yaxis.ticks=O.yaxis.noTicks}if(O.x2axis){O.xaxes[1]=f.extend(true,{},O.xaxis,O.x2axis);O.xaxes[1].position="top"}if(O.y2axis){O.yaxes[1]=f.extend(true,{},O.yaxis,O.y2axis);O.yaxes[1].position="right"}if(O.grid.coloredAreas){O.grid.markings=O.grid.coloredAreas}if(O.grid.coloredAreasColor){O.grid.markingsColor=O.grid.coloredAreasColor}if(O.lines){f.extend(true,O.series.lines,O.lines)}if(O.points){f.extend(true,O.series.points,O.points)}if(O.bars){f.extend(true,O.series.bars,O.bars)}if(O.shadowSize!=null){O.series.shadowSize=O.shadowSize}if(O.highlightColor!=null){O.series.highlightColor=O.highlightColor}for(aB=0;aB<O.xaxes.length;++aB){P(ar,aB+1).options=O.xaxes[aB]}for(aB=0;aB<O.yaxes.length;++aB){P(Z,aB+1).options=O.yaxes[aB]}for(var aF in s){if(O.hooks[aF]&&O.hooks[aF].length){s[aF]=s[aF].concat(O.hooks[aF])}}I(s.processOptions,[O])}function N(aB){w=t(aB);B();V()}function t(aE){var aC=[];for(var aB=0;aB<aE.length;++aB){var aD=f.extend(true,{},O.series);if(aE[aB].data!=null){aD.data=aE[aB].data;delete aE[aB].data;f.extend(true,aD,aE[aB]);aE[aB].data=aD.data}else{aD.data=aE[aB]}aC.push(aD)}return aC}function A(aC,aD){var aB=aC[aD+"axis"];if(typeof aB=="object"){aB=aB.n}if(typeof aB!="number"){aB=1}return aB}function k(){return f.grep(ar.concat(Z),function(aB){return aB})}function ab(aE){var aC={},aB,aD;for(aB=0;aB<ar.length;++aB){aD=ar[aB];if(aD&&aD.used){aC["x"+aD.n]=aD.c2p(aE.left)}}for(aB=0;aB<Z.length;++aB){aD=Z[aB];if(aD&&aD.used){aC["y"+aD.n]=aD.c2p(aE.top)}}if(aC.x1!==undefined){aC.x=aC.x1}if(aC.y1!==undefined){aC.y=aC.y1}return aC}function U(aF){var aD={},aC,aE,aB;for(aC=0;aC<ar.length;++aC){aE=ar[aC];if(aE&&aE.used){aB="x"+aE.n;if(aF[aB]==null&&aE.n==1){aB="x"}if(aF[aB]!=null){aD.left=aE.p2c(aF[aB]);break}}}for(aC=0;aC<Z.length;++aC){aE=Z[aC];if(aE&&aE.used){aB="y"+aE.n;if(aF[aB]==null&&aE.n==1){aB="y"}if(aF[aB]!=null){aD.top=aE.p2c(aF[aB]);break}}}return aD}function P(aC,aB){if(!aC[aB-1]){aC[aB-1]={n:aB,direction:aC==ar?"x":"y",options:f.extend(true,{},aC==ar?O.xaxis:O.yaxis)}}return aC[aB-1]}function B(){var aM=w.length,aD=-1,aE;for(aE=0;aE<w.length;++aE){var aJ=w[aE].color;if(aJ!=null){aM--;if(typeof aJ=="number"&&aJ>aD){aD=aJ}}}if(aM<=aD){aM=aD+1}var aI,aB=[],aH=O.colors,aG=aH.length,aC=0;for(aE=0;aE<aM;aE++){aI=f.color.parse(aH[aE%aG]||"#666");if(aE%aG==0&&aE){if(aC>=0){if(aC<0.5){aC=-aC-0.2}else{aC=0}}else{aC=-aC}}aB[aE]=aI.scale("rgb",1+aC)}var aF=0,aN;for(aE=0;aE<w.length;++aE){aN=w[aE];if(aN.color==null){aN.color=aB[aF].toString();++aF}else{if(typeof aN.color=="number"){aN.color=aB[aN.color].toString()}}if(aN.lines.show==null){var aL,aK=true;for(aL in aN){if(aN[aL]&&aN[aL].show){aK=false;break}}if(aK){aN.lines.show=true}}if(aN.lines.zero==null){aN.lines.zero=!!aN.lines.fill}aN.xaxis=P(ar,A(aN,"x"));aN.yaxis=P(Z,A(aN,"y"))}}function V(){var aP=Number.POSITIVE_INFINITY,aJ=Number.NEGATIVE_INFINITY,aB=Number.MAX_VALUE,aW,aU,aT,aO,aD,aK,aV,aQ,aI,aH,aC,a2,aZ,aM,a1,aY;function aF(a5,a4,a3){if(a4<a5.datamin&&a4!=-aB){a5.datamin=a4}if(a3>a5.datamax&&a3!=aB){a5.datamax=a3}}f.each(k(),function(a3,a4){a4.datamin=aP;a4.datamax=aJ;a4.used=false});for(aW=0;aW<w.length;++aW){aK=w[aW];aK.datapoints={points:[]};I(s.processRawData,[aK,aK.data,aK.datapoints])}for(aW=0;aW<w.length;++aW){aK=w[aW];a1=aK.data;aY=aK.datapoints.format;if(!aY){aY=[];aY.push({x:true,number:true,required:true});aY.push({y:true,number:true,required:true});if(aK.bars.show||(aK.lines.show&&aK.lines.fill)){var aR=!!((aK.bars.show&&aK.bars.zero)||(aK.lines.show&&aK.lines.zero));aY.push({y:true,number:true,required:false,defaultValue:0,autoscale:aR});if(aK.bars.horizontal){delete aY[aY.length-1].y;aY[aY.length-1].x=true}}aK.datapoints.format=aY}if(aK.datapoints.pointsize!=null){continue}aK.datapoints.pointsize=aY.length;aQ=aK.datapoints.pointsize;aV=aK.datapoints.points;var aG=aK.lines.show&&aK.lines.steps;aK.xaxis.used=aK.yaxis.used=true;for(aU=aT=0;aU<a1.length;++aU,aT+=aQ){aM=a1[aU];var aE=aM==null;if(!aE){for(aO=0;aO<aQ;++aO){a2=aM[aO];aZ=aY[aO];if(aZ){if(aZ.number&&a2!=null){a2=+a2;if(isNaN(a2)){a2=null}else{if(a2==Infinity){a2=aB}else{if(a2==-Infinity){a2=-aB}}}}if(a2==null){if(aZ.required){aE=true}if(aZ.defaultValue!=null){a2=aZ.defaultValue}}}aV[aT+aO]=a2}}if(aE){for(aO=0;aO<aQ;++aO){a2=aV[aT+aO];if(a2!=null){aZ=aY[aO];if(aZ.autoscale){if(aZ.x){aF(aK.xaxis,a2,a2)}if(aZ.y){aF(aK.yaxis,a2,a2)}}}aV[aT+aO]=null}}else{if(aG&&aT>0&&aV[aT-aQ]!=null&&aV[aT-aQ]!=aV[aT]&&aV[aT-aQ+1]!=aV[aT+1]){for(aO=0;aO<aQ;++aO){aV[aT+aQ+aO]=aV[aT+aO]}aV[aT+1]=aV[aT-aQ+1];aT+=aQ}}}}for(aW=0;aW<w.length;++aW){aK=w[aW];I(s.processDatapoints,[aK,aK.datapoints])}for(aW=0;aW<w.length;++aW){aK=w[aW];aV=aK.datapoints.points;aQ=aK.datapoints.pointsize;aY=aK.datapoints.format;var aL=aP,aS=aP,aN=aJ,aX=aJ;for(aU=0;aU<aV.length;aU+=aQ){if(aV[aU]==null){continue}for(aO=0;aO<aQ;++aO){a2=aV[aU+aO];aZ=aY[aO];if(!aZ||aZ.autoscale===false||a2==aB||a2==-aB){continue}if(aZ.x){if(a2<aL){aL=a2}if(a2>aN){aN=a2}}if(aZ.y){if(a2<aS){aS=a2}if(a2>aX){aX=a2}}}}if(aK.bars.show){var a0;switch(aK.bars.align){case"left":a0=0;break;case"right":a0=-aK.bars.barWidth;break;case"center":a0=-aK.bars.barWidth/2;break;default:throw new Error("Invalid bar alignment: "+aK.bars.align)}if(aK.bars.horizontal){aS+=a0;aX+=a0+aK.bars.barWidth}else{aL+=a0;aN+=a0+aK.bars.barWidth}}aF(aK.xaxis,aL,aN);aF(aK.yaxis,aS,aX)}f.each(k(),function(a3,a4){if(a4.datamin==aP){a4.datamin=null}if(a4.datamax==aJ){a4.datamax=null}})}function aA(){T.css("padding",0).children(":not(.flot-base,.flot-overlay)").remove();if(T.css("position")=="static"){T.css("position","relative")}af=new b("flot-base",T);ao=new b("flot-overlay",T);G=af.context;az=ao.context;ap=f(ao.element).unbind();var aB=T.data("plot");if(aB){aB.shutdown();ao.clear()}T.data("plot",i)}function av(){if(O.grid.hoverable){ap.mousemove(g);ap.bind("mouseleave",S)}if(O.grid.clickable){ap.click(L)}I(s.bindEvents,[ap])}function r(){if(m){clearTimeout(m)}ap.unbind("mousemove",g);ap.unbind("mouseleave",S);ap.unbind("click",L);I(s.shutdown,[ap])}function o(aG){function aC(aH){return aH}var aF,aB,aD=aG.options.transform||aC,aE=aG.options.inverseTransform;if(aG.direction=="x"){aF=aG.scale=l/Math.abs(aD(aG.max)-aD(aG.min));aB=Math.min(aD(aG.max),aD(aG.min))}else{aF=aG.scale=ag/Math.abs(aD(aG.max)-aD(aG.min));aF=-aF;aB=Math.max(aD(aG.max),aD(aG.min))}if(aD==aC){aG.p2c=function(aH){return(aH-aB)*aF}}else{aG.p2c=function(aH){return(aD(aH)-aB)*aF}}if(!aE){aG.c2p=function(aH){return aB+aH/aF}}else{aG.c2p=function(aH){return aE(aB+aH/aF)}}}function ac(aD){var aB=aD.options,aH=aD.ticks||[],aG=aB.labelWidth||0,aE=aB.labelHeight||0,aI=aG||aD.direction=="x"?Math.floor(af.width/(aH.length||1)):null;legacyStyles=aD.direction+"Axis "+aD.direction+aD.n+"Axis",layer="flot-"+aD.direction+"-axis flot-"+aD.direction+aD.n+"-axis "+legacyStyles,font=aB.font||"flot-tick-label tickLabel";for(var aF=0;aF<aH.length;++aF){var aJ=aH[aF];if(!aJ.label){continue}var aC=af.getTextInfo(layer,aJ.label,font,null,aI);aG=Math.max(aG,aC.width);aE=Math.max(aE,aC.height)}aD.labelWidth=aB.labelWidth||aG;aD.labelHeight=aB.labelHeight||aE}function H(aD){var aC=aD.labelWidth,aL=aD.labelHeight,aH=aD.options.position,aF=aD.options.tickLength,aG=O.grid.axisMargin,aJ=O.grid.labelMargin,aK=aD.direction=="x"?ar:Z,aE,aM;var aB=f.grep(aK,function(aN){return aN&&aN.options.position==aH&&aN.reserveSpace});if(f.inArray(aD,aB)==aB.length-1){aG=0}if(aF==null){var aI=f.grep(aK,function(aN){return aN&&aN.reserveSpace});aM=f.inArray(aD,aI)==0;if(aM){aF="full"}else{aF=5}}if(!isNaN(+aF)){aJ+=+aF}if(aD.direction=="x"){aL+=aJ;if(aH=="bottom"){M.bottom+=aL+aG;aD.box={top:af.height-M.bottom,height:aL}}else{aD.box={top:M.top+aG,height:aL};M.top+=aL+aG}}else{aC+=aJ;if(aH=="left"){aD.box={left:M.left+aG,width:aC};M.left+=aC+aG}else{M.right+=aC+aG;aD.box={left:af.width-M.right,width:aC}}}aD.position=aH;aD.tickLength=aF;aD.box.padding=aJ;aD.innermost=aM}function ae(aB){if(aB.direction=="x"){aB.box.left=M.left-aB.labelWidth/2;aB.box.width=af.width-M.left-M.right+aB.labelWidth}else{aB.box.top=M.top-aB.labelHeight/2;aB.box.height=af.height-M.bottom-M.top+aB.labelHeight}}function E(){var aD=O.grid.minBorderMargin,aE={x:0,y:0},aB,aC;if(aD==null){aD=0;for(aB=0;aB<w.length;++aB){aD=Math.max(aD,2*(w[aB].points.radius+w[aB].points.lineWidth/2))}}aE.x=aE.y=Math.ceil(aD);f.each(k(),function(aG,aH){var aF=aH.direction;if(aH.reserveSpace){aE[aF]=Math.ceil(Math.max(aE[aF],(aF=="x"?aH.labelWidth:aH.labelHeight)/2))}});M.left=Math.max(aE.x,M.left);M.right=Math.max(aE.x,M.right);M.top=Math.max(aE.y,M.top);M.bottom=Math.max(aE.y,M.bottom)}function R(){var aD,aF=k(),aG=O.grid.show;for(var aC in M){var aE=O.grid.margin||0;M[aC]=typeof aE=="number"?aE:aE[aC]||0}I(s.processOffset,[M]);for(var aC in M){if(typeof(O.grid.borderWidth)=="object"){M[aC]+=aG?O.grid.borderWidth[aC]:0}else{M[aC]+=aG?O.grid.borderWidth:0}}f.each(aF,function(aH,aI){aI.show=aI.options.show;if(aI.show==null){aI.show=aI.used}aI.reserveSpace=aI.show||aI.options.reserveSpace;n(aI)});if(aG){var aB=f.grep(aF,function(aH){return aH.reserveSpace});f.each(aB,function(aH,aI){au(aI);Y(aI);x(aI,aI.ticks);ac(aI)});for(aD=aB.length-1;aD>=0;--aD){H(aB[aD])}E();f.each(aB,function(aH,aI){ae(aI)})}l=af.width-M.left-M.right;ag=af.height-M.bottom-M.top;f.each(aF,function(aH,aI){o(aI)});if(aG){aw()}ay()}function n(aE){var aF=aE.options,aD=+(aF.min!=null?aF.min:aE.datamin),aB=+(aF.max!=null?aF.max:aE.datamax),aH=aB-aD;if(aH==0){var aC=aB==0?1:0.01;if(aF.min==null){aD-=aC}if(aF.max==null||aF.min!=null){aB+=aC}}else{var aG=aF.autoscaleMargin;if(aG!=null){if(aF.min==null){aD-=aH*aG;if(aD<0&&aE.datamin!=null&&aE.datamin>=0){aD=0}}if(aF.max==null){aB+=aH*aG;if(aB>0&&aE.datamax!=null&&aE.datamax<=0){aB=0}}}}aE.min=aD;aE.max=aB}function au(aG){var aC=aG.options;var aF;if(typeof aC.ticks=="number"&&aC.ticks>0){aF=aC.ticks}else{aF=0.3*Math.sqrt(aG.direction=="x"?af.width:af.height)}var aL=(aG.max-aG.min)/aF,aH=-Math.floor(Math.log(aL)/Math.LN10),aE=aC.tickDecimals;if(aE!=null&&aH>aE){aH=aE}var aB=Math.pow(10,-aH),aD=aL/aB,aN;if(aD<1.5){aN=1}else{if(aD<3){aN=2;if(aD>2.25&&(aE==null||aH+1<=aE)){aN=2.5;++aH}}else{if(aD<7.5){aN=5}else{aN=10}}}aN*=aB;if(aC.minTickSize!=null&&aN<aC.minTickSize){aN=aC.minTickSize}aG.delta=aL;aG.tickDecimals=Math.max(0,aE!=null?aE:aH);aG.tickSize=aC.tickSize||aN;if(aC.mode=="time"&&!aG.tickGenerator){throw new Error("Time mode requires the flot.time plugin.")}if(!aG.tickGenerator){aG.tickGenerator=function(aQ){var aS=[],aT=c(aQ.min,aQ.tickSize),aP=0,aO=Number.NaN,aR;do{aR=aO;aO=aT+aP*aQ.tickSize;aS.push(aO);++aP}while(aO<aQ.max&&aO!=aR);return aS};aG.tickFormatter=function(aT,aR){var aQ=aR.tickDecimals?Math.pow(10,aR.tickDecimals):1;var aS=""+Math.round(aT*aQ)/aQ;if(aR.tickDecimals!=null){var aP=aS.indexOf(".");var aO=aP==-1?0:aS.length-aP-1;if(aO<aR.tickDecimals){return(aO?aS:aS+".")+(""+aQ).substr(1,aR.tickDecimals-aO)}}return aS}}if(f.isFunction(aC.tickFormatter)){aG.tickFormatter=function(aO,aP){return""+aC.tickFormatter(aO,aP)}}if(aC.alignTicksWithAxis!=null){var aI=(aG.direction=="x"?ar:Z)[aC.alignTicksWithAxis-1];if(aI&&aI.used&&aI!=aG){var aM=aG.tickGenerator(aG);if(aM.length>0){if(aC.min==null){aG.min=Math.min(aG.min,aM[0])}if(aC.max==null&&aM.length>1){aG.max=Math.max(aG.max,aM[aM.length-1])}}aG.tickGenerator=function(aQ){var aR=[],aO,aP;for(aP=0;aP<aI.ticks.length;++aP){aO=(aI.ticks[aP].v-aI.min)/(aI.max-aI.min);aO=aQ.min+aO*(aQ.max-aQ.min);aR.push(aO)}return aR};if(!aG.mode&&aC.tickDecimals==null){var aK=Math.max(0,-Math.floor(Math.log(aG.delta)/Math.LN10)+1),aJ=aG.tickGenerator(aG);if(!(aJ.length>1&&/\..*0$/.test((aJ[1]-aJ[0]).toFixed(aK)))){aG.tickDecimals=aK}}}}}function Y(aF){var aH=aF.options.ticks,aG=[];if(aH==null||(typeof aH=="number"&&aH>0)){aG=aF.tickGenerator(aF)}else{if(aH){if(f.isFunction(aH)){aG=aH(aF)}else{aG=aH}}}var aE,aB;aF.ticks=[];for(aE=0;aE<aG.length;++aE){var aC=null;var aD=aG[aE];if(typeof aD=="object"){aB=+aD[0];if(aD.length>1){aC=aD[1]}}else{aB=+aD}if(aC==null){aC=aF.tickFormatter(aB,aF)}if(!isNaN(aB)){aF.ticks.push({v:aB,label:aC})}}}function x(aB,aC){if(aB.options.autoscaleMargin&&aC.length>0){if(aB.options.min==null){aB.min=Math.min(aB.min,aC[0].v)}if(aB.options.max==null&&aC.length>1){aB.max=Math.max(aB.max,aC[aC.length-1].v)}}}function ax(){af.clear();I(s.drawBackground,[G]);var aC=O.grid;if(aC.show&&aC.backgroundColor){u()}if(aC.show&&!aC.aboveData){z()}for(var aB=0;aB<w.length;++aB){I(s.drawSeries,[G,w[aB]]);am(w[aB])}I(s.draw,[G]);if(aC.show&&aC.aboveData){z()}af.render();aa()}function v(aB,aF){var aC,aH,aI,aJ,aG=k();for(var aE=0;aE<aG.length;++aE){aC=aG[aE];if(aC.direction==aF){aJ=aF+aC.n+"axis";if(!aB[aJ]&&aC.n==1){aJ=aF+"axis"}if(aB[aJ]){aH=aB[aJ].from;aI=aB[aJ].to;break}}}if(!aB[aJ]){aC=aF=="x"?ar[0]:Z[0];aH=aB[aF+"1"];aI=aB[aF+"2"]}if(aH!=null&&aI!=null&&aH>aI){var aD=aH;aH=aI;aI=aD}return{from:aH,to:aI,axis:aC}}function u(){G.save();G.translate(M.left,M.top);G.fillStyle=y(O.grid.backgroundColor,ag,0,"rgba(255, 255, 255, 0)");G.fillRect(0,0,l,ag);G.restore()}function z(){var aF,aL,aN,aJ;G.save();G.translate(M.left,M.top);var aH=O.grid.markings;if(aH){if(f.isFunction(aH)){aL=i.getAxes();aL.xmin=aL.xaxis.min;aL.xmax=aL.xaxis.max;aL.ymin=aL.yaxis.min;aL.ymax=aL.yaxis.max;aH=aH(aL)}for(aF=0;aF<aH.length;++aF){var aD=aH[aF],aC=v(aD,"x"),aI=v(aD,"y");if(aC.from==null){aC.from=aC.axis.min}if(aC.to==null){aC.to=aC.axis.max}if(aI.from==null){aI.from=aI.axis.min}if(aI.to==null){aI.to=aI.axis.max}if(aC.to<aC.axis.min||aC.from>aC.axis.max||aI.to<aI.axis.min||aI.from>aI.axis.max){continue}aC.from=Math.max(aC.from,aC.axis.min);aC.to=Math.min(aC.to,aC.axis.max);aI.from=Math.max(aI.from,aI.axis.min);aI.to=Math.min(aI.to,aI.axis.max);if(aC.from==aC.to&&aI.from==aI.to){continue}aC.from=aC.axis.p2c(aC.from);aC.to=aC.axis.p2c(aC.to);aI.from=aI.axis.p2c(aI.from);aI.to=aI.axis.p2c(aI.to);if(aC.from==aC.to||aI.from==aI.to){G.beginPath();G.strokeStyle=aD.color||O.grid.markingsColor;G.lineWidth=aD.lineWidth||O.grid.markingsLineWidth;G.moveTo(aC.from,aI.from);G.lineTo(aC.to,aI.to);G.stroke()}else{G.fillStyle=aD.color||O.grid.markingsColor;G.fillRect(aC.from,aI.to,aC.to-aC.from,aI.from-aI.to)}}}aL=k();aN=O.grid.borderWidth;for(var aE=0;aE<aL.length;++aE){var aB=aL[aE],aG=aB.box,aR=aB.tickLength,aO,aM,aQ,aK;if(!aB.show||aB.ticks.length==0){continue}G.lineWidth=1;if(aB.direction=="x"){aO=0;if(aR=="full"){aM=(aB.position=="top"?0:ag)}else{aM=aG.top-M.top+(aB.position=="top"?aG.height:0)}}else{aM=0;if(aR=="full"){aO=(aB.position=="left"?0:l)}else{aO=aG.left-M.left+(aB.position=="left"?aG.width:0)}}if(!aB.innermost){G.strokeStyle=aB.options.color;G.beginPath();aQ=aK=0;if(aB.direction=="x"){aQ=l+1}else{aK=ag+1}if(G.lineWidth==1){if(aB.direction=="x"){aM=Math.floor(aM)+0.5}else{aO=Math.floor(aO)+0.5}}G.moveTo(aO,aM);G.lineTo(aO+aQ,aM+aK);G.stroke()}G.strokeStyle=aB.options.tickColor;G.beginPath();for(aF=0;aF<aB.ticks.length;++aF){var aP=aB.ticks[aF].v;aQ=aK=0;if(isNaN(aP)||aP<aB.min||aP>aB.max||(aR=="full"&&((typeof aN=="object"&&aN[aB.position]>0)||aN>0)&&(aP==aB.min||aP==aB.max))){continue}if(aB.direction=="x"){aO=aB.p2c(aP);aK=aR=="full"?-ag:aR;if(aB.position=="top"){aK=-aK}}else{aM=aB.p2c(aP);aQ=aR=="full"?-l:aR;if(aB.position=="left"){aQ=-aQ}}if(G.lineWidth==1){if(aB.direction=="x"){aO=Math.floor(aO)+0.5}else{aM=Math.floor(aM)+0.5}}G.moveTo(aO,aM);G.lineTo(aO+aQ,aM+aK)}G.stroke()}if(aN){aJ=O.grid.borderColor;if(typeof aN=="object"||typeof aJ=="object"){if(typeof aN!=="object"){aN={top:aN,right:aN,bottom:aN,left:aN}}if(typeof aJ!=="object"){aJ={top:aJ,right:aJ,bottom:aJ,left:aJ}}if(aN.top>0){G.strokeStyle=aJ.top;G.lineWidth=aN.top;G.beginPath();G.moveTo(0-aN.left,0-aN.top/2);G.lineTo(l,0-aN.top/2);G.stroke()}if(aN.right>0){G.strokeStyle=aJ.right;G.lineWidth=aN.right;G.beginPath();G.moveTo(l+aN.right/2,0-aN.top);G.lineTo(l+aN.right/2,ag);G.stroke()}if(aN.bottom>0){G.strokeStyle=aJ.bottom;G.lineWidth=aN.bottom;G.beginPath();G.moveTo(l+aN.right,ag+aN.bottom/2);G.lineTo(0,ag+aN.bottom/2);G.stroke()}if(aN.left>0){G.strokeStyle=aJ.left;G.lineWidth=aN.left;G.beginPath();G.moveTo(0-aN.left/2,ag+aN.bottom);G.lineTo(0-aN.left/2,0);G.stroke()}}else{G.lineWidth=aN;G.strokeStyle=O.grid.borderColor;G.strokeRect(-aN/2,-aN/2,l+aN,ag+aN)}}G.restore()}function aw(){f.each(k(),function(aM,aC){if(!aC.show||aC.ticks.length==0){return}var aF=aC.box,aE=aC.direction+"Axis "+aC.direction+aC.n+"Axis",aI="flot-"+aC.direction+"-axis flot-"+aC.direction+aC.n+"-axis "+aE,aB=aC.options.font||"flot-tick-label tickLabel",aG,aL,aJ,aH,aK;af.removeText(aI);for(var aD=0;aD<aC.ticks.length;++aD){aG=aC.ticks[aD];if(!aG.label||aG.v<aC.min||aG.v>aC.max){continue}if(aC.direction=="x"){aH="center";aL=M.left+aC.p2c(aG.v);if(aC.position=="bottom"){aJ=aF.top+aF.padding}else{aJ=aF.top+aF.height-aF.padding;aK="bottom"}}else{aK="middle";aJ=M.top+aC.p2c(aG.v);if(aC.position=="left"){aL=aF.left+aF.width-aF.padding;aH="right"}else{aL=aF.left+aF.padding}}af.addText(aI,aL,aJ,aG.label,aB,null,null,aH,aK)}})}function am(aB){if(aB.lines.show){J(aB)}if(aB.bars.show){W(aB)}if(aB.points.show){X(aB)}}function J(aE){function aD(aP,aQ,aI,aU,aT){var aV=aP.points,aJ=aP.pointsize,aN=null,aM=null;G.beginPath();for(var aO=aJ;aO<aV.length;aO+=aJ){var aL=aV[aO-aJ],aS=aV[aO-aJ+1],aK=aV[aO],aR=aV[aO+1];if(aL==null||aK==null){continue}if(aS<=aR&&aS<aT.min){if(aR<aT.min){continue}aL=(aT.min-aS)/(aR-aS)*(aK-aL)+aL;aS=aT.min}else{if(aR<=aS&&aR<aT.min){if(aS<aT.min){continue}aK=(aT.min-aS)/(aR-aS)*(aK-aL)+aL;aR=aT.min}}if(aS>=aR&&aS>aT.max){if(aR>aT.max){continue}aL=(aT.max-aS)/(aR-aS)*(aK-aL)+aL;aS=aT.max}else{if(aR>=aS&&aR>aT.max){if(aS>aT.max){continue}aK=(aT.max-aS)/(aR-aS)*(aK-aL)+aL;aR=aT.max}}if(aL<=aK&&aL<aU.min){if(aK<aU.min){continue}aS=(aU.min-aL)/(aK-aL)*(aR-aS)+aS;aL=aU.min}else{if(aK<=aL&&aK<aU.min){if(aL<aU.min){continue}aR=(aU.min-aL)/(aK-aL)*(aR-aS)+aS;aK=aU.min}}if(aL>=aK&&aL>aU.max){if(aK>aU.max){continue}aS=(aU.max-aL)/(aK-aL)*(aR-aS)+aS;aL=aU.max}else{if(aK>=aL&&aK>aU.max){if(aL>aU.max){continue}aR=(aU.max-aL)/(aK-aL)*(aR-aS)+aS;aK=aU.max}}if(aL!=aN||aS!=aM){G.moveTo(aU.p2c(aL)+aQ,aT.p2c(aS)+aI)}aN=aK;aM=aR;G.lineTo(aU.p2c(aK)+aQ,aT.p2c(aR)+aI)}G.stroke()}function aF(aI,aQ,aP){var aW=aI.points,aV=aI.pointsize,aN=Math.min(Math.max(0,aP.min),aP.max),aX=0,aU,aT=false,aM=1,aL=0,aR=0;while(true){if(aV>0&&aX>aW.length+aV){break}aX+=aV;var aZ=aW[aX-aV],aK=aW[aX-aV+aM],aY=aW[aX],aJ=aW[aX+aM];if(aT){if(aV>0&&aZ!=null&&aY==null){aR=aX;aV=-aV;aM=2;continue}if(aV<0&&aX==aL+aV){G.fill();aT=false;aV=-aV;aM=1;aX=aL=aR+aV;continue}}if(aZ==null||aY==null){continue}if(aZ<=aY&&aZ<aQ.min){if(aY<aQ.min){continue}aK=(aQ.min-aZ)/(aY-aZ)*(aJ-aK)+aK;aZ=aQ.min}else{if(aY<=aZ&&aY<aQ.min){if(aZ<aQ.min){continue}aJ=(aQ.min-aZ)/(aY-aZ)*(aJ-aK)+aK;aY=aQ.min}}if(aZ>=aY&&aZ>aQ.max){if(aY>aQ.max){continue}aK=(aQ.max-aZ)/(aY-aZ)*(aJ-aK)+aK;aZ=aQ.max}else{if(aY>=aZ&&aY>aQ.max){if(aZ>aQ.max){continue}aJ=(aQ.max-aZ)/(aY-aZ)*(aJ-aK)+aK;aY=aQ.max}}if(!aT){G.beginPath();G.moveTo(aQ.p2c(aZ),aP.p2c(aN));aT=true}if(aK>=aP.max&&aJ>=aP.max){G.lineTo(aQ.p2c(aZ),aP.p2c(aP.max));G.lineTo(aQ.p2c(aY),aP.p2c(aP.max));continue}else{if(aK<=aP.min&&aJ<=aP.min){G.lineTo(aQ.p2c(aZ),aP.p2c(aP.min));G.lineTo(aQ.p2c(aY),aP.p2c(aP.min));continue}}var aO=aZ,aS=aY;if(aK<=aJ&&aK<aP.min&&aJ>=aP.min){aZ=(aP.min-aK)/(aJ-aK)*(aY-aZ)+aZ;aK=aP.min}else{if(aJ<=aK&&aJ<aP.min&&aK>=aP.min){aY=(aP.min-aK)/(aJ-aK)*(aY-aZ)+aZ;aJ=aP.min}}if(aK>=aJ&&aK>aP.max&&aJ<=aP.max){aZ=(aP.max-aK)/(aJ-aK)*(aY-aZ)+aZ;aK=aP.max}else{if(aJ>=aK&&aJ>aP.max&&aK<=aP.max){aY=(aP.max-aK)/(aJ-aK)*(aY-aZ)+aZ;aJ=aP.max}}if(aZ!=aO){G.lineTo(aQ.p2c(aO),aP.p2c(aK))}G.lineTo(aQ.p2c(aZ),aP.p2c(aK));G.lineTo(aQ.p2c(aY),aP.p2c(aJ));if(aY!=aS){G.lineTo(aQ.p2c(aY),aP.p2c(aJ));G.lineTo(aQ.p2c(aS),aP.p2c(aJ))}}}G.save();G.translate(M.left,M.top);G.lineJoin="round";var aG=aE.lines.lineWidth,aB=aE.shadowSize;if(aG>0&&aB>0){G.lineWidth=aB;G.strokeStyle="rgba(0,0,0,0.1)";var aH=Math.PI/18;aD(aE.datapoints,Math.sin(aH)*(aG/2+aB/2),Math.cos(aH)*(aG/2+aB/2),aE.xaxis,aE.yaxis);G.lineWidth=aB/2;aD(aE.datapoints,Math.sin(aH)*(aG/2+aB/4),Math.cos(aH)*(aG/2+aB/4),aE.xaxis,aE.yaxis)}G.lineWidth=aG;G.strokeStyle=aE.color;var aC=C(aE.lines,aE.color,0,ag);if(aC){G.fillStyle=aC;aF(aE.datapoints,aE.xaxis,aE.yaxis)}if(aG>0){aD(aE.datapoints,0,0,aE.xaxis,aE.yaxis)}G.restore()}function X(aE){function aH(aN,aM,aU,aK,aS,aT,aQ,aJ){var aR=aN.points,aI=aN.pointsize;for(var aL=0;aL<aR.length;aL+=aI){var aP=aR[aL],aO=aR[aL+1];if(aP==null||aP<aT.min||aP>aT.max||aO<aQ.min||aO>aQ.max){continue}G.beginPath();aP=aT.p2c(aP);aO=aQ.p2c(aO)+aK;if(aJ=="circle"){G.arc(aP,aO,aM,0,aS?Math.PI:Math.PI*2,false)}else{aJ(G,aP,aO,aM,aS)}G.closePath();if(aU){G.fillStyle=aU;G.fill()}G.stroke()}}G.save();G.translate(M.left,M.top);var aG=aE.points.lineWidth,aC=aE.shadowSize,aB=aE.points.radius,aF=aE.points.symbol;if(aG==0){aG=0.0001}if(aG>0&&aC>0){var aD=aC/2;G.lineWidth=aD;G.strokeStyle="rgba(0,0,0,0.1)";aH(aE.datapoints,aB,null,aD+aD/2,true,aE.xaxis,aE.yaxis,aF);G.strokeStyle="rgba(0,0,0,0.2)";aH(aE.datapoints,aB,null,aD/2,true,aE.xaxis,aE.yaxis,aF)}G.lineWidth=aG;G.strokeStyle=aE.color;aH(aE.datapoints,aB,C(aE.points,aE.color),0,false,aE.xaxis,aE.yaxis,aF);G.restore()}function an(aN,aM,aV,aI,aQ,aF,aD,aL,aK,aU,aR,aC){var aE,aT,aJ,aP,aG,aB,aO,aH,aS;if(aR){aH=aB=aO=true;aG=false;aE=aV;aT=aN;aP=aM+aI;aJ=aM+aQ;if(aT<aE){aS=aT;aT=aE;aE=aS;aG=true;aB=false}}else{aG=aB=aO=true;aH=false;aE=aN+aI;aT=aN+aQ;aJ=aV;aP=aM;if(aP<aJ){aS=aP;aP=aJ;aJ=aS;aH=true;aO=false}}if(aT<aL.min||aE>aL.max||aP<aK.min||aJ>aK.max){return}if(aE<aL.min){aE=aL.min;aG=false}if(aT>aL.max){aT=aL.max;aB=false}if(aJ<aK.min){aJ=aK.min;aH=false}if(aP>aK.max){aP=aK.max;aO=false}aE=aL.p2c(aE);aJ=aK.p2c(aJ);aT=aL.p2c(aT);aP=aK.p2c(aP);if(aD){aU.beginPath();aU.moveTo(aE,aJ);aU.lineTo(aE,aP);aU.lineTo(aT,aP);aU.lineTo(aT,aJ);aU.fillStyle=aD(aJ,aP);aU.fill()}if(aC>0&&(aG||aB||aO||aH)){aU.beginPath();aU.moveTo(aE,aJ+aF);if(aG){aU.lineTo(aE,aP+aF)}else{aU.moveTo(aE,aP+aF)}if(aO){aU.lineTo(aT,aP+aF)}else{aU.moveTo(aT,aP+aF)}if(aB){aU.lineTo(aT,aJ+aF)}else{aU.moveTo(aT,aJ+aF)}if(aH){aU.lineTo(aE,aJ+aF)}else{aU.moveTo(aE,aJ+aF)}aU.stroke()}}function W(aD){function aC(aJ,aI,aL,aG,aK,aN,aM){var aO=aJ.points,aF=aJ.pointsize;for(var aH=0;aH<aO.length;aH+=aF){if(aO[aH]==null){continue}an(aO[aH],aO[aH+1],aO[aH+2],aI,aL,aG,aK,aN,aM,G,aD.bars.horizontal,aD.bars.lineWidth)}}G.save();G.translate(M.left,M.top);G.lineWidth=aD.bars.lineWidth;G.strokeStyle=aD.color;var aB;switch(aD.bars.align){case"left":aB=0;break;case"right":aB=-aD.bars.barWidth;break;case"center":aB=-aD.bars.barWidth/2;break;default:throw new Error("Invalid bar alignment: "+aD.bars.align)}var aE=aD.bars.fill?function(aF,aG){return C(aD.bars,aD.color,aF,aG)}:null;aC(aD.datapoints,aB,aB+aD.bars.barWidth,0,aE,aD.xaxis,aD.yaxis);G.restore()}function C(aD,aB,aC,aF){var aE=aD.fill;if(!aE){return null}if(aD.fillColor){return y(aD.fillColor,aC,aF,aB)}var aG=f.color.parse(aB);aG.a=typeof aE=="number"?aE:0.4;aG.normalize();return aG.toString()}function ay(){T.find(".legend").remove();if(!O.legend.show){return}var aJ=[],aG=[],aH=false,aQ=O.legend.labelFormatter,aP,aL;for(var aF=0;aF<w.length;++aF){aP=w[aF];if(aP.label){aL=aQ?aQ(aP.label,aP):aP.label;if(aL){aG.push({label:aL,color:aP.color})}}}if(O.legend.sorted){if(f.isFunction(O.legend.sorted)){aG.sort(O.legend.sorted)}else{if(O.legend.sorted=="reverse"){aG.reverse()}else{var aE=O.legend.sorted!="descending";aG.sort(function(aS,aR){return aS.label==aR.label?0:((aS.label<aR.label)!=aE?1:-1)})}}}for(var aF=0;aF<aG.length;++aF){var aN=aG[aF];if(aF%O.legend.noColumns==0){if(aH){aJ.push("</tr>")}aJ.push("<tr>");aH=true}aJ.push('<td class="legendColorBox"><div style="border:1px solid '+O.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+aN.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+aN.label+"</td>")}if(aH){aJ.push("</tr>")}if(aJ.length==0){return}var aO='<table style="font-size:smaller;color:'+O.grid.color+'">'+aJ.join("")+"</table>";if(O.legend.container!=null){f(O.legend.container).html(aO)}else{var aK="",aC=O.legend.position,aD=O.legend.margin;if(aD[0]==null){aD=[aD,aD]}if(aC.charAt(0)=="n"){aK+="top:"+(aD[1]+M.top)+"px;"}else{if(aC.charAt(0)=="s"){aK+="bottom:"+(aD[1]+M.bottom)+"px;"}}if(aC.charAt(1)=="e"){aK+="right:"+(aD[0]+M.right)+"px;"}else{if(aC.charAt(1)=="w"){aK+="left:"+(aD[0]+M.left)+"px;"}}var aM=f('<div class="legend">'+aO.replace('style="','style="position:absolute;'+aK+";")+"</div>").appendTo(T);if(O.legend.backgroundOpacity!=0){var aI=O.legend.backgroundColor;if(aI==null){aI=O.grid.backgroundColor;if(aI&&typeof aI=="string"){aI=f.color.parse(aI)}else{aI=f.color.extract(aM,"background-color")}aI.a=1;aI=aI.toString()}var aB=aM.children();f('<div style="position:absolute;width:'+aB.width()+"px;height:"+aB.height()+"px;"+aK+"background-color:"+aI+';"> </div>').prependTo(aM).css("opacity",O.legend.backgroundOpacity)}}}var aj=[],m=null;function at(aI,aG,aD){var aO=O.grid.mouseActiveRadius,a0=aO*aO+1,aY=null,aR=false,aW,aU,aT;for(aW=w.length-1;aW>=0;--aW){if(!aD(w[aW])){continue}var aP=w[aW],aH=aP.xaxis,aF=aP.yaxis,aV=aP.datapoints.points,aQ=aH.c2p(aI),aN=aF.c2p(aG),aC=aO/aH.scale,aB=aO/aF.scale;aT=aP.datapoints.pointsize;if(aH.options.inverseTransform){aC=Number.MAX_VALUE}if(aF.options.inverseTransform){aB=Number.MAX_VALUE}if(aP.lines.show||aP.points.show){for(aU=0;aU<aV.length;aU+=aT){var aK=aV[aU],aJ=aV[aU+1];if(aK==null){continue}if(aK-aQ>aC||aK-aQ<-aC||aJ-aN>aB||aJ-aN<-aB){continue}var aM=Math.abs(aH.p2c(aK)-aI),aL=Math.abs(aF.p2c(aJ)-aG),aS=aM*aM+aL*aL;if(aS<a0){a0=aS;aY=[aW,aU/aT]}}}if(aP.bars.show&&!aY){var aE=aP.bars.align=="left"?0:-aP.bars.barWidth/2,aX=aE+aP.bars.barWidth;for(aU=0;aU<aV.length;aU+=aT){var aK=aV[aU],aJ=aV[aU+1],aZ=aV[aU+2];if(aK==null){continue}if(w[aW].bars.horizontal?(aQ<=Math.max(aZ,aK)&&aQ>=Math.min(aZ,aK)&&aN>=aJ+aE&&aN<=aJ+aX):(aQ>=aK+aE&&aQ<=aK+aX&&aN>=Math.min(aZ,aJ)&&aN<=Math.max(aZ,aJ))){aY=[aW,aU/aT]}}}}if(aY){aW=aY[0];aU=aY[1];aT=w[aW].datapoints.pointsize;return{datapoint:w[aW].datapoints.points.slice(aU*aT,(aU+1)*aT),dataIndex:aU,series:w[aW],seriesIndex:aW}}return null}function g(aB){if(O.grid.hoverable){j("plothover",aB,function(aC){return aC.hoverable!=false})}}function S(aB){if(O.grid.hoverable){j("plothover",aB,function(aC){return false})}}function L(aB){j("plotclick",aB,function(aC){return aC.clickable!=false})}function j(aC,aB,aD){var aE=ap.offset(),aH=aB.pageX-aE.left-M.left,aF=aB.pageY-aE.top-M.top,aJ=ab({left:aH,top:aF});aJ.pageX=aB.pageX;aJ.pageY=aB.pageY;var aK=at(aH,aF,aD);if(aK){aK.pageX=parseInt(aK.series.xaxis.p2c(aK.datapoint[0])+aE.left+M.left,10);aK.pageY=parseInt(aK.series.yaxis.p2c(aK.datapoint[1])+aE.top+M.top,10)}if(O.grid.autoHighlight){for(var aG=0;aG<aj.length;++aG){var aI=aj[aG];if(aI.auto==aC&&!(aK&&aI.series==aK.series&&aI.point[0]==aK.datapoint[0]&&aI.point[1]==aK.datapoint[1])){ak(aI.series,aI.point)}}if(aK){aq(aK.series,aK.datapoint,aC)}}T.trigger(aC,[aJ,aK])}function aa(){var aB=O.interaction.redrawOverlayInterval;if(aB==-1){ai();return}if(!m){m=setTimeout(ai,aB)}}function ai(){m=null;az.save();ao.clear();az.translate(M.left,M.top);var aC,aB;for(aC=0;aC<aj.length;++aC){aB=aj[aC];if(aB.series.bars.show){al(aB.series,aB.point)}else{ah(aB.series,aB.point)}}az.restore();I(s.drawOverlay,[az])}function aq(aD,aB,aF){if(typeof aD=="number"){aD=w[aD]}if(typeof aB=="number"){var aE=aD.datapoints.pointsize;aB=aD.datapoints.points.slice(aE*aB,aE*(aB+1))}var aC=Q(aD,aB);if(aC==-1){aj.push({series:aD,point:aB,auto:aF});aa()}else{if(!aF){aj[aC].auto=false}}}function ak(aD,aB){if(aD==null&&aB==null){aj=[];aa();return}if(typeof aD=="number"){aD=w[aD]}if(typeof aB=="number"){var aE=aD.datapoints.pointsize;aB=aD.datapoints.points.slice(aE*aB,aE*(aB+1))}var aC=Q(aD,aB);if(aC!=-1){aj.splice(aC,1);aa()}}function Q(aD,aE){for(var aB=0;aB<aj.length;++aB){var aC=aj[aB];if(aC.series==aD&&aC.point[0]==aE[0]&&aC.point[1]==aE[1]){return aB}}return -1}function ah(aB,aH){var aF=aH[0],aD=aH[1],aI=aB.xaxis,aG=aB.yaxis,aJ=(typeof aB.highlightColor==="string")?aB.highlightColor:f.color.parse(aB.color).scale("a",0.5).toString();if(aF<aI.min||aF>aI.max||aD<aG.min||aD>aG.max){return}var aE=aB.points.radius+aB.points.lineWidth/2;az.lineWidth=aE;az.strokeStyle=aJ;var aC=1.5*aE;aF=aI.p2c(aF);aD=aG.p2c(aD);az.beginPath();if(aB.points.symbol=="circle"){az.arc(aF,aD,aC,0,2*Math.PI,false)}else{aB.points.symbol(az,aF,aD,aC,false)}az.closePath();az.stroke()}function al(aE,aB){var aF=(typeof aE.highlightColor==="string")?aE.highlightColor:f.color.parse(aE.color).scale("a",0.5).toString(),aD=aF,aC=aE.bars.align=="left"?0:-aE.bars.barWidth/2;az.lineWidth=aE.bars.lineWidth;az.strokeStyle=aF;an(aB[0],aB[1],aB[2]||0,aC,aC+aE.bars.barWidth,0,function(){return aD},aE.xaxis,aE.yaxis,az,aE.bars.horizontal,aE.bars.lineWidth)}function y(aJ,aB,aH,aC){if(typeof aJ=="string"){return aJ}else{var aI=G.createLinearGradient(0,aH,0,aB);for(var aE=0,aD=aJ.colors.length;aE<aD;++aE){var aF=aJ.colors[aE];if(typeof aF!="string"){var aG=f.color.parse(aC);if(aF.brightness!=null){aG=aG.scale("rgb",aF.brightness)}if(aF.opacity!=null){aG.a*=aF.opacity}aF=aG.toString()}aI.addColorStop(aE/(aD-1),aF)}return aI}}}f.plot=function(j,h,g){var i=new d(f(j),h,g,f.plot.plugins);return i};f.plot.version="0.8.1";f.plot.plugins=[];f.fn.plot=function(h,g){return this.each(function(){f.plot(this,h,g)})};function c(h,g){return g*Math.floor(h/g)}})(jQuery);(function(d){var f=10;var b=0.95;function e(y){var i=null,D=null,n=null,v=null,o=null,g=false,x=null;var j=[];y.hooks.processOptions.push(function(F,E){if(E.series.pie.show){E.grid.show=false;if(E.series.pie.label.show=="auto"){if(E.legend.show){E.series.pie.label.show=false}else{E.series.pie.label.show=true}}if(E.series.pie.radius=="auto"){if(E.series.pie.label.show){E.series.pie.radius=3/4}else{E.series.pie.radius=1}}if(E.series.pie.tilt>1){E.series.pie.tilt=1}else{if(E.series.pie.tilt<0){E.series.pie.tilt=0}}}});y.hooks.bindEvents.push(function(G,E){var F=G.getOptions();if(F.series.pie.show){if(F.grid.hoverable){E.unbind("mousemove").mousemove(u)}if(F.grid.clickable){E.unbind("click").click(l)}}});y.hooks.processDatapoints.push(function(I,F,G,H){var E=I.getOptions();if(E.series.pie.show){z(I,F,G,H)}});y.hooks.drawOverlay.push(function(F,G){var E=F.getOptions();if(E.series.pie.show){A(F,G)}});y.hooks.draw.push(function(G,F){var E=G.getOptions();if(E.series.pie.show){r(G,F)}});function z(G,E,F){if(!g){g=true;i=G.getCanvas();D=d(i).parent();c=G.getOptions();G.setData(C(G.getData()))}}function C(J){var H=0,G=0,L=0,E=c.series.pie.combine.color,K=[];for(var F=0;F<J.length;++F){var I=J[F].data;if(d.isArray(I)&&I.length==1){I=I[0]}if(d.isArray(I)){if(!isNaN(parseFloat(I[1]))&&isFinite(I[1])){I[1]=+I[1]}else{I[1]=0}}else{if(!isNaN(parseFloat(I))&&isFinite(I)){I=[1,+I]}else{I=[1,0]}}J[F].data=[I]}for(var F=0;F<J.length;++F){H+=J[F].data[0][1]}for(var F=0;F<J.length;++F){var I=J[F].data[0][1];if(I/H<=c.series.pie.combine.threshold){G+=I;L++;if(!E){E=J[F].color}}}for(var F=0;F<J.length;++F){var I=J[F].data[0][1];if(L<2||I/H>c.series.pie.combine.threshold){K.push({data:[[1,I]],color:J[F].color,label:J[F].label,angle:I*Math.PI*2/H,percent:I/(H/100)})}}if(L>1){K.push({data:[[1,G]],color:E,label:c.series.pie.combine.label,angle:G*Math.PI*2/H,percent:G/(H/100)})}return K}function r(J,M){if(!D){return}var F=J.getPlaceholder().width(),H=J.getPlaceholder().height(),L=D.children().filter(".legend").children().width()||0;x=M;g=false;n=Math.min(F,H/c.series.pie.tilt)/2;o=H/2+c.series.pie.offset.top;v=F/2;if(c.series.pie.offset.left=="auto"){if(c.legend.position.match("w")){v+=L/2}else{v-=L/2}}else{v+=c.series.pie.offset.left}if(v<n){v=n}else{if(v>F-n){v=F-n}}var K=J.getData(),N=0;do{if(N>0){n*=b}N+=1;I();if(c.series.pie.tilt<=0.8){G()}}while(!E()&&N<f);if(N>=f){I();D.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>")}if(J.setSeries&&J.insertLegend){J.setSeries(K);J.insertLegend()}function I(){x.clearRect(0,0,F,H);D.children().filter(".pieLabel, .pieLabelBackground").remove()}function G(){var T=c.series.pie.shadow.left;var S=c.series.pie.shadow.top;var Q=10;var R=c.series.pie.shadow.alpha;var O=c.series.pie.radius>1?c.series.pie.radius:n*c.series.pie.radius;if(O>=F/2-T||O*c.series.pie.tilt>=H/2-S||O<=Q){return}x.save();x.translate(T,S);x.globalAlpha=R;x.fillStyle="#000";x.translate(v,o);x.scale(1,c.series.pie.tilt);for(var P=1;P<=Q;P++){x.beginPath();x.arc(0,0,O,0,Math.PI*2,false);x.fill();O-=P}x.restore()}function E(){var R=Math.PI*c.series.pie.startAngle;var O=c.series.pie.radius>1?c.series.pie.radius:n*c.series.pie.radius;x.save();x.translate(v,o);x.scale(1,c.series.pie.tilt);x.save();var T=R;for(var Q=0;Q<K.length;++Q){K[Q].startAngle=T;S(K[Q].angle,K[Q].color,true)}x.restore();if(c.series.pie.stroke.width>0){x.save();x.lineWidth=c.series.pie.stroke.width;T=R;for(var Q=0;Q<K.length;++Q){S(K[Q].angle,c.series.pie.stroke.color,false)}x.restore()}B(x);x.restore();if(c.series.pie.label.show){return P()}else{return true}function S(W,U,V){if(W<=0||isNaN(W)){return}if(V){x.fillStyle=U}else{x.strokeStyle=U;x.lineJoin="round"}x.beginPath();if(Math.abs(W-Math.PI*2)>1e-9){x.moveTo(0,0)}x.arc(0,0,O,T,T+W/2,false);x.arc(0,0,O,T+W/2,T+W,false);x.closePath();T+=W;if(V){x.fill()}else{x.stroke()}}function P(){var X=R;var U=c.series.pie.label.radius>1?c.series.pie.label.radius:n*c.series.pie.label.radius;for(var W=0;W<K.length;++W){if(K[W].percent>=c.series.pie.label.threshold*100){if(!V(K[W],X,W)){return false}}X+=K[W].angle}return true;function V(ak,ad,ab){if(ak.data[0][1]==0){return true}var am=c.legend.labelFormatter,al,Z=c.series.pie.label.formatter;if(am){al=am(ak.label,ak)}else{al=ak.label}if(Z){al=Z(al,ak)}var ae=((ad+ak.angle)+ad)/2;var aj=v+Math.round(Math.cos(ae)*U);var ah=o+Math.round(Math.sin(ae)*U)*c.series.pie.tilt;var aa="<span class='pieLabel' id='pieLabel"+ab+"' style='position:absolute;top:"+ah+"px;left:"+aj+"px;'>"+al+"</span>";D.append(aa);var ai=D.children("#pieLabel"+ab);var Y=(ah-ai.height()/2);var ac=(aj-ai.width()/2);ai.css("top",Y);ai.css("left",ac);if(0-Y>0||0-ac>0||H-(Y+ai.height())<0||F-(ac+ai.width())<0){return false}if(c.series.pie.label.background.opacity!=0){var af=c.series.pie.label.background.color;if(af==null){af=ak.color}var ag="top:"+Y+"px;left:"+ac+"px;";d("<div class='pieLabelBackground' style='position:absolute;width:"+ai.width()+"px;height:"+ai.height()+"px;"+ag+"background-color:"+af+";'></div>").css("opacity",c.series.pie.label.background.opacity).insertBefore(ai)}return true}}}}function B(E){if(c.series.pie.innerRadius>0){E.save();var F=c.series.pie.innerRadius>1?c.series.pie.innerRadius:n*c.series.pie.innerRadius;E.globalCompositeOperation="destination-out";E.beginPath();E.fillStyle=c.series.pie.stroke.color;E.arc(0,0,F,0,Math.PI*2,false);E.fill();E.closePath();E.restore();E.save();E.beginPath();E.strokeStyle=c.series.pie.stroke.color;E.arc(0,0,F,0,Math.PI*2,false);E.stroke();E.closePath();E.restore()}}function s(H,I){for(var J=false,G=-1,E=H.length,F=E-1;++G<E;F=G){((H[G][1]<=I[1]&&I[1]<H[F][1])||(H[F][1]<=I[1]&&I[1]<H[G][1]))&&(I[0]<(H[F][0]-H[G][0])*(I[1]-H[G][1])/(H[F][1]-H[G][1])+H[G][0])&&(J=!J)}return J}function t(M,L){var G=y.getData(),J=y.getOptions(),K=J.series.pie.radius>1?J.series.pie.radius:n*J.series.pie.radius,P,N;for(var W=0;W<G.length;++W){var S=G[W];if(S.pie.show){x.save();x.beginPath();x.moveTo(0,0);x.arc(0,0,K,S.startAngle,S.startAngle+S.angle/2,false);x.arc(0,0,K,S.startAngle+S.angle/2,S.startAngle+S.angle,false);x.closePath();P=M-v;N=L-o;if(x.isPointInPath){if(x.isPointInPath(M-v,L-o)){x.restore();return{datapoint:[S.percent,S.data],dataIndex:0,series:S,seriesIndex:W}}}else{var V=K*Math.cos(S.startAngle),U=K*Math.sin(S.startAngle),H=K*Math.cos(S.startAngle+S.angle/4),E=K*Math.sin(S.startAngle+S.angle/4),Q=K*Math.cos(S.startAngle+S.angle/2),O=K*Math.sin(S.startAngle+S.angle/2),Y=K*Math.cos(S.startAngle+S.angle/1.5),X=K*Math.sin(S.startAngle+S.angle/1.5),I=K*Math.cos(S.startAngle+S.angle),F=K*Math.sin(S.startAngle+S.angle),T=[[0,0],[V,U],[H,E],[Q,O],[Y,X],[I,F]],R=[P,N];if(s(T,R)){x.restore();return{datapoint:[S.percent,S.data],dataIndex:0,series:S,seriesIndex:W}}}x.restore()}}return null}function u(E){m("plothover",E)}function l(E){m("plotclick",E)}function m(E,K){var F=y.offset();var I=parseInt(K.pageX-F.left);var G=parseInt(K.pageY-F.top);var M=t(I,G);if(c.grid.autoHighlight){for(var H=0;H<j.length;++H){var J=j[H];if(J.auto==E&&!(M&&J.series==M.series)){h(J.series)}}}if(M){k(M.series,E)}var L={pageX:K.pageX,pageY:K.pageY};D.trigger(E,[L,M])}function k(F,G){var E=w(F);if(E==-1){j.push({series:F,auto:G});y.triggerRedrawOverlay()}else{if(!G){j[E].auto=false}}}function h(F){if(F==null){j=[];y.triggerRedrawOverlay()}var E=w(F);if(E!=-1){j.splice(E,1);y.triggerRedrawOverlay()}}function w(G){for(var E=0;E<j.length;++E){var F=j[E];if(F.series==G){return E}}return -1}function A(I,J){var G=I.getOptions();var E=G.series.pie.radius>1?G.series.pie.radius:n*G.series.pie.radius;J.save();J.translate(v,o);J.scale(1,G.series.pie.tilt);for(var H=0;H<j.length;++H){F(j[H].series)}B(J);J.restore();function F(K){if(K.angle<=0||isNaN(K.angle)){return}J.fillStyle="rgba(255, 255, 255, "+G.series.pie.highlight.opacity+")";J.beginPath();if(Math.abs(K.angle-Math.PI*2)>1e-9){J.moveTo(0,0)}J.arc(0,0,E,K.startAngle,K.startAngle+K.angle/2,false);J.arc(0,0,E,K.startAngle+K.angle/2,K.startAngle+K.angle,false);J.closePath();J.fill()}}}var c={series:{pie:{show:false,radius:"auto",innerRadius:0,startAngle:3/2,tilt:1,shadow:{left:5,top:15,alpha:0.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(g,h){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+h.color+";'>"+g+"<br/>"+Math.round(h.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:0.5}}}};d.plot.plugins.push({init:e,options:c,name:"pie",version:"1.1"})})(jQuery);function fuelTextExactCI(b,c){return(b.textContent||b.innerText||$(b).text()||"").toLowerCase()===(c||"").toLowerCase()}$.expr[":"].fuelTextExactCI=$.expr.createPseudo?$.expr.createPseudo(function(b){return function(c){return fuelTextExactCI(c,b)}}):function(d,c,b){return fuelTextExactCI(d,b[3])};var Checkbox=function(c,b){this.$element=$(c);this.options=$.extend({},$.fn.checkbox.defaults,b);this.$label=this.$element.parent();this.$icon=this.$label.find("i");this.$chk=this.$label.find("input[type=checkbox]");this.setState(this.$chk);this.$chk.on("change",$.proxy(this.itemchecked,this))};Checkbox.prototype={constructor:Checkbox,setState:function(b){var d=b.is(":checked");var c=b.is(":disabled");this.$icon.removeClass("checked").removeClass("disabled");if(d===true){this.$icon.addClass("checked")}if(c===true){this.$icon.addClass("disabled")}},enable:function(){this.$chk.attr("disabled",false);this.$icon.removeClass("disabled")},disable:function(){this.$chk.attr("disabled",true);this.$icon.addClass("disabled")},toggle:function(){this.$chk.click()},itemchecked:function(c){var b=$(c.target);this.setState(b)}};$.fn.checkbox=function(c,e){var d;var b=this.each(function(){var h=$(this);var g=h.data("checkbox");var f=typeof c==="object"&&c;if(!g){h.data("checkbox",(g=new Checkbox(this,f)))}if(typeof c==="string"){d=g[c](e)}});return(d===undefined)?b:d};$.fn.checkbox.defaults={};$.fn.checkbox.Constructor=Checkbox;$(function(){$(window).on("load",function(){$(".checkbox-custom > input[type=checkbox]").each(function(){var b=$(this);if(b.data("checkbox")){return}b.checkbox(b.data())})})});var Combobox=function(c,b){this.$element=$(c);this.options=$.extend({},$.fn.combobox.defaults,b);this.$element.on("click","a",$.proxy(this.itemclicked,this));this.$element.on("change","input",$.proxy(this.inputchanged,this));this.$input=this.$element.find("input");this.$button=this.$element.find(".btn");this.setDefaultSelection()};Combobox.prototype={constructor:Combobox,selectedItem:function(){var c=this.$selectedItem;var d={};if(c){var b=this.$selectedItem.text();d=$.extend({text:b},this.$selectedItem.data())}else{d={text:this.$input.val()}}return d},selectByText:function(c){var b="li:fuelTextExactCI("+c+")";this.selectBySelector(b)},selectByValue:function(c){var b='li[data-value="'+c+'"]';this.selectBySelector(b)},selectByIndex:function(c){var b="li:eq("+c+")";this.selectBySelector(b)},selectBySelector:function(b){var c=this.$element.find(b);if(typeof c[0]!=="undefined"){this.$selectedItem=c;this.$input.val(this.$selectedItem.text())}else{this.$selectedItem=null}},setDefaultSelection:function(){var b="li[data-selected=true]:first";var c=this.$element.find(b);if(c.length>0){this.selectBySelector(b);c.removeData("selected");c.removeAttr("data-selected")}},enable:function(){this.$input.removeAttr("disabled");this.$button.removeClass("disabled")},disable:function(){this.$input.attr("disabled",true);this.$button.addClass("disabled")},itemclicked:function(c){this.$selectedItem=$(c.target).parent();this.$input.val(this.$selectedItem.text()).trigger("change",{synthetic:true});var b=this.selectedItem();this.$element.trigger("changed",b);c.preventDefault()},inputchanged:function(d,b){if(b&&b.synthetic){return}var f=$(d.target).val();this.selectByText(f);var c=this.selectedItem();if(c.text.length===0){c={text:f}}this.$element.trigger("changed",c)}};$.fn.combobox=function(c,e){var d;var b=this.each(function(){var h=$(this);var g=h.data("combobox");var f=typeof c==="object"&&c;if(!g){h.data("combobox",(g=new Combobox(this,f)))}if(typeof c==="string"){d=g[c](e)}});return(d===undefined)?b:d};$.fn.combobox.defaults={};$.fn.combobox.Constructor=Combobox;$(function(){$(window).on("load",function(){$(".combobox").each(function(){var b=$(this);if(b.data("combobox")){return}b.combobox(b.data())})});$("body").on("mousedown.combobox.data-api",".combobox",function(c){var b=$(this);if(b.data("combobox")){return}b.combobox(b.data())})});var Radio=function(c,b){this.$element=$(c);this.options=$.extend({},$.fn.radio.defaults,b);this.$label=this.$element.parent();this.$icon=this.$label.find("i");this.$radio=this.$label.find("input[type=radio]");this.groupName=this.$radio.attr("name");this.setState(this.$radio);this.$radio.on("change",$.proxy(this.itemchecked,this))};Radio.prototype={constructor:Radio,setState:function(b,c){var e=b.is(":checked");var d=b.is(":disabled");if(e===true){this.$icon.addClass("checked")}if(d===true){this.$icon.addClass("disabled")}},resetGroup:function(){$("input[name="+this.groupName+"]").next().removeClass("checked")},enable:function(){this.$radio.attr("disabled",false);this.$icon.removeClass("disabled")},disable:function(){this.$radio.attr("disabled",true);this.$icon.addClass("disabled")},itemchecked:function(c){var b=$(c.target);this.resetGroup();this.setState(b)}};$.fn.radio=function(c,e){var d;var b=this.each(function(){var h=$(this);var g=h.data("radio");var f=typeof c==="object"&&c;if(!g){h.data("radio",(g=new Radio(this,f)))}if(typeof c==="string"){d=g[c](e)}});return(d===undefined)?b:d};$.fn.radio.defaults={};$.fn.radio.Constructor=Radio;$(function(){$(window).on("load",function(){$(".radio-custom > input[type=radio]").each(function(){var b=$(this);if(b.data("radio")){return}b.radio(b.data())})})});var Select=function(c,b){this.$element=$(c);this.options=$.extend({},$.fn.select.defaults,b);this.$element.on("click","a",$.proxy(this.itemclicked,this));this.$button=this.$element.find(".btn");this.$label=this.$element.find(".dropdown-label");this.setDefaultSelection();if(b.resize==="auto"){this.resize()}};Select.prototype={constructor:Select,itemclicked:function(c){this.$selectedItem=$(c.target).parent();this.$label.text(this.$selectedItem.text());var b=this.selectedItem();this.$element.trigger("changed",b);c.preventDefault()},resize:function(){var c=$("#selectTextSize")[0];if(!c){$("<div/>").attr({id:"selectTextSize"}).appendTo("body")}var b=0;var d=0;this.$element.find("a").each(function(){var g=$(this);var e=g.text();var f=$("#selectTextSize");f.text(e);d=f.outerWidth();if(d>b){b=d}});this.$label.width(b)},selectedItem:function(){var b=this.$selectedItem.text();return $.extend({text:b},this.$selectedItem.data())},selectByText:function(c){var b="li a:fuelTextExactCI("+c+")";this.selectBySelector(b)},selectByValue:function(c){var b='li[data-value="'+c+'"]';this.selectBySelector(b)},selectByIndex:function(c){var b="li:eq("+c+")";this.selectBySelector(b)},selectBySelector:function(b){var c=this.$element.find(b);this.$selectedItem=c;this.$label.text(this.$selectedItem.text())},setDefaultSelection:function(){var b="li[data-selected=true]:first";var c=this.$element.find(b);if(c.length===0){this.selectByIndex(0)}else{this.selectBySelector(b);c.removeData("selected");c.removeAttr("data-selected")}},enable:function(){this.$button.removeClass("disabled")},disable:function(){this.$button.addClass("disabled")}};$.fn.select=function(c,e){var d;var b=this.each(function(){var h=$(this);var g=h.data("select");var f=typeof c==="object"&&c;if(!g){h.data("select",(g=new Select(this,f)))}if(typeof c==="string"){d=g[c](e)}});return(d===undefined)?b:d};$.fn.select.defaults={};$.fn.select.Constructor=Select;$(function(){$(window).on("load",function(){$(".select").each(function(){var b=$(this);if(b.data("select")){return}b.select(b.data())})});$("body").on("mousedown.select.data-api",".select",function(c){var b=$(this);if(b.data("select")){return}b.select(b.data())})});var Spinner=function(c,b){this.$element=$(c);this.options=$.extend({},$.fn.spinner.defaults,b);this.$input=this.$element.find(".spinner-input");this.$element.on("keyup",this.$input,$.proxy(this.change,this));if(this.options.hold){this.$element.on("mousedown",".spinner-up",$.proxy(function(){this.startSpin(true)},this));this.$element.on("mouseup",".spinner-up, .spinner-down",$.proxy(this.stopSpin,this));this.$element.on("mouseout",".spinner-up, .spinner-down",$.proxy(this.stopSpin,this));this.$element.on("mousedown",".spinner-down",$.proxy(function(){this.startSpin(false)},this))}else{this.$element.on("click",".spinner-up",$.proxy(function(){this.step(true)},this));this.$element.on("click",".spinner-down",$.proxy(function(){this.step(false)},this))}this.switches={count:1,enabled:true};if(this.options.speed==="medium"){this.switches.speed=300}else{if(this.options.speed==="fast"){this.switches.speed=100}else{this.switches.speed=500}}this.lastValue=null;this.render();if(this.options.disabled){this.disable()}};Spinner.prototype={constructor:Spinner,render:function(){this.$input.val(this.options.value);this.$input.attr("maxlength",(this.options.max+"").split("").length)},change:function(){var b=this.$input.val();if(b/1){this.options.value=b/1}else{b=b.replace(/[^0-9]/g,"");this.$input.val(b);this.options.value=b/1}this.triggerChangedEvent()},stopSpin:function(){clearTimeout(this.switches.timeout);this.switches.count=1;this.triggerChangedEvent()},triggerChangedEvent:function(){var b=this.value();if(b===this.lastValue){return}this.lastValue=b;this.$element.trigger("changed",b);this.$element.trigger("change")},startSpin:function(b){if(!this.options.disabled){var c=this.switches.count;if(c===1){this.step(b);c=1}else{if(c<3){c=1.5}else{if(c<8){c=2.5}else{c=4}}}this.switches.timeout=setTimeout($.proxy(function(){this.iterator(b)},this),this.switches.speed/c);this.switches.count++}},iterator:function(b){this.step(b);this.startSpin(b)},step:function(c){var e=this.options.value;var d=c?this.options.max:this.options.min;if((c?e<d:e>d)){var b=e+(c?1:-1)*this.options.step;if(c?b>d:b<d){this.value(d)}else{this.value(b)}}},value:function(b){if(!isNaN(parseFloat(b))&&isFinite(b)){b=parseFloat(b);this.options.value=b;this.$input.val(b);return this}else{return this.options.value}},disable:function(){this.options.disabled=true;this.$input.attr("disabled","");this.$element.find("button").addClass("disabled")},enable:function(){this.options.disabled=false;this.$input.removeAttr("disabled");this.$element.find("button").removeClass("disabled")}};$.fn.spinner=function(c,e){var d;var b=this.each(function(){var h=$(this);var g=h.data("spinner");var f=typeof c==="object"&&c;if(!g){h.data("spinner",(g=new Spinner(this,f)))}if(typeof c==="string"){d=g[c](e)}});return(d===undefined)?b:d};$.fn.spinner.defaults={value:1,min:1,max:999,step:1,hold:true,speed:"medium",disabled:false};$.fn.spinner.Constructor=Spinner;$(function(){$("body").on("mousedown.spinner.data-api",".spinner",function(c){var b=$(this);if(b.data("spinner")){return}b.spinner(b.data())})});var Search=function(c,b){this.$element=$(c);this.options=$.extend({},$.fn.search.defaults,b);this.$button=this.$element.find("button").on("click",$.proxy(this.buttonclicked,this));this.$input=this.$element.find("input").on("keydown",$.proxy(this.keypress,this)).on("keyup",$.proxy(this.keypressed,this));this.$icon=this.$element.find("i");this.activeSearch=""};Search.prototype={constructor:Search,search:function(b){this.$icon.attr("class","icon-remove");this.activeSearch=b;this.$element.trigger("searched",b)},clear:function(){this.$icon.attr("class","icon-search");this.activeSearch="";this.$input.val("");this.$element.trigger("cleared")},action:function(){var c=this.$input.val();var b=c===""||c===this.activeSearch;if(this.activeSearch&&b){this.clear()}else{if(c){this.search(c)}}},buttonclicked:function(b){b.preventDefault();if($(b.currentTarget).is(".disabled, :disabled")){return}this.action()},keypress:function(b){if(b.which===13){b.preventDefault()}},keypressed:function(c){var d,b;if(c.which===13){c.preventDefault();this.action()}else{d=this.$input.val();b=d&&(d===this.activeSearch);this.$icon.attr("class",b?"icon-remove":"icon-search")}},disable:function(){this.$input.attr("disabled","disabled");this.$button.addClass("disabled")},enable:function(){this.$input.removeAttr("disabled");this.$button.removeClass("disabled")}};$.fn.search=function(b){return this.each(function(){var e=$(this);var d=e.data("search");var c=typeof b==="object"&&b;if(!d){e.data("search",(d=new Search(this,c)))}if(typeof b==="string"){d[b]()}})};$.fn.search.defaults={};$.fn.search.Constructor=Search;$(function(){$("body").on("mousedown.search.data-api",".search",function(){var b=$(this);if(b.data("search")){return}b.search(b.data())})});var Datagrid=function(c,b){this.$element=$(c);this.$thead=this.$element.find("thead");this.$tfoot=this.$element.find("tfoot");this.$footer=this.$element.find("tfoot th");this.$footerchildren=this.$footer.children().show().css("visibility","hidden");this.$topheader=this.$element.find("thead th");this.$searchcontrol=this.$element.find(".datagrid-search");this.$filtercontrol=this.$element.find(".filter");this.$pagesize=this.$element.find(".grid-pagesize");this.$pageinput=this.$element.find(".grid-pager input");this.$pagedropdown=this.$element.find(".grid-pager .dropdown-menu");this.$prevpagebtn=this.$element.find(".grid-prevpage");this.$nextpagebtn=this.$element.find(".grid-nextpage");this.$pageslabel=this.$element.find(".grid-pages");this.$countlabel=this.$element.find(".grid-count");this.$startlabel=this.$element.find(".grid-start");this.$endlabel=this.$element.find(".grid-end");this.$tbody=$("<tbody>").insertAfter(this.$thead);this.$colheader=$("<tr>").appendTo(this.$thead);this.options=$.extend(true,{},$.fn.datagrid.defaults,b);if(this.$pagesize.hasClass("select")){this.options.dataOptions.pageSize=parseInt(this.$pagesize.select("selectedItem").value,10)}else{this.options.dataOptions.pageSize=parseInt(this.$pagesize.val(),10)}if(this.$searchcontrol.length<=0){this.$searchcontrol=this.$element.find(".search")}this.columns=this.options.dataSource.columns();this.$nextpagebtn.on("click",$.proxy(this.next,this));this.$prevpagebtn.on("click",$.proxy(this.previous,this));this.$searchcontrol.on("searched cleared",$.proxy(this.searchChanged,this));this.$filtercontrol.on("changed",$.proxy(this.filterChanged,this));this.$colheader.on("click","th",$.proxy(this.headerClicked,this));if(this.$pagesize.hasClass("select")){this.$pagesize.on("changed",$.proxy(this.pagesizeChanged,this))}else{this.$pagesize.on("change",$.proxy(this.pagesizeChanged,this))}this.$pageinput.on("change",$.proxy(this.pageChanged,this));this.renderColumns();if(this.options.stretchHeight){this.initStretchHeight()}this.renderData()};Datagrid.prototype={constructor:Datagrid,renderColumns:function(){var b=this;this.$footer.attr("colspan",this.columns.length);this.$topheader.attr("colspan",this.columns.length);var c="";$.each(this.columns,function(d,e){c+='<th data-property="'+e.property+'"';if(e.sortable){c+=' class="sortable"'}c+=">"+e.label+"</th>"});b.$colheader.append(c)},updateColumns:function(b,d){var c=(d==="asc")?"icon-chevron-up":"icon-chevron-down";this.$colheader.find("i").remove();this.$colheader.find("th").removeClass("sorted");$("<i>").addClass(c).appendTo(b);b.addClass("sorted")},updatePageDropdown:function(c){var d="";for(var b=1;b<=c.pages;b++){d+="<li><a>"+b+"</a></li>"}this.$pagedropdown.html(d)},updatePageButtons:function(b){if(b.page===1){this.$prevpagebtn.attr("disabled","disabled")}else{this.$prevpagebtn.removeAttr("disabled")}if(b.page===b.pages){this.$nextpagebtn.attr("disabled","disabled")}else{this.$nextpagebtn.removeAttr("disabled")}},renderData:function(){var b=this;this.$tbody.html(this.placeholderRowHTML(this.options.loadingHTML));this.options.dataSource.data(this.options.dataOptions,function(e){var d=(e.count===1)?b.options.itemText:b.options.itemsText;var c="";b.$footerchildren.css("visibility",function(){return(e.count>0)?"visible":"hidden"});b.$pageinput.val(e.page);b.$pageslabel.text(e.pages);b.$countlabel.text(e.count+" "+d);b.$startlabel.text(e.start);b.$endlabel.text(e.end);b.updatePageDropdown(e);b.updatePageButtons(e);$.each(e.data,function(f,g){c+="<tr>";$.each(b.columns,function(h,i){c+="<td>"+g[i.property]+"</td>"});c+="</tr>"});if(!c){c=b.placeholderRowHTML("0 "+b.options.itemsText)}b.$tbody.html(c);b.stretchHeight();b.$element.trigger("loaded")})},placeholderRowHTML:function(b){return'<tr><td style="text-align:center;padding:20px;border-bottom:none;" colspan="'+this.columns.length+'">'+b+"</td></tr>"},headerClicked:function(g){var b=$(g.target);if(!b.hasClass("sortable")){return}var f=this.options.dataOptions.sortDirection;var c=this.options.dataOptions.sortProperty;var d=b.data("property");if(c===d){this.options.dataOptions.sortDirection=(f==="asc")?"desc":"asc"}else{this.options.dataOptions.sortDirection="asc";this.options.dataOptions.sortProperty=d}this.options.dataOptions.pageIndex=0;this.updateColumns(b,this.options.dataOptions.sortDirection);this.renderData()},pagesizeChanged:function(c,b){if(b){this.options.dataOptions.pageSize=parseInt(b.value,10)}else{this.options.dataOptions.pageSize=parseInt($(c.target).val(),10)}this.options.dataOptions.pageIndex=0;this.renderData()},pageChanged:function(d){var c=parseInt($(d.target).val(),10);c=(isNaN(c))?1:c;var b=this.$pageslabel.text();this.options.dataOptions.pageIndex=(c>b)?b-1:c-1;this.renderData()},searchChanged:function(c,b){this.options.dataOptions.search=b;this.options.dataOptions.pageIndex=0;this.renderData()},filterChanged:function(c,b){this.options.dataOptions.filter=b;this.renderData()},previous:function(){this.options.dataOptions.pageIndex--;this.renderData()},next:function(){this.options.dataOptions.pageIndex++;this.renderData()},reload:function(){this.options.dataOptions.pageIndex=0;this.renderData()},initStretchHeight:function(){this.$gridContainer=this.$element.parent();this.$element.wrap('<div class="datagrid-stretch-wrapper">');this.$stretchWrapper=this.$element.parent();this.$headerTable=$("<table>").attr("class",this.$element.attr("class"));this.$footerTable=this.$headerTable.clone();this.$headerTable.prependTo(this.$gridContainer).addClass("datagrid-stretch-header");this.$thead.detach().appendTo(this.$headerTable);this.$sizingHeader=this.$thead.clone();this.$sizingHeader.find("tr:first").remove();this.$footerTable.appendTo(this.$gridContainer).addClass("datagrid-stretch-footer");this.$tfoot.detach().appendTo(this.$footerTable)},stretchHeight:function(){if(!this.$gridContainer){return}this.setColumnWidths();var b=this.$gridContainer.height();var d=this.$headerTable.outerHeight();var e=this.$footerTable.outerHeight();var c=d+e;this.$stretchWrapper.height(b-c)},setColumnWidths:function(){if(!this.$sizingHeader){return}this.$element.prepend(this.$sizingHeader);var c=this.$sizingHeader.find("th");var b=c.length;function d(e,f){if(e===b-1){return}$(f).width(c.eq(e).width())}this.$colheader.find("th").each(d);this.$tbody.find("tr:first > td").each(d);this.$sizingHeader.detach()}};$.fn.datagrid=function(b){return this.each(function(){var e=$(this);var d=e.data("datagrid");var c=typeof b==="object"&&b;if(!d){e.data("datagrid",(d=new Datagrid(this,c)))}if(typeof b==="string"){d[b]()}})};$.fn.datagrid.defaults={dataOptions:{pageIndex:0,pageSize:10},loadingHTML:'<div class="progress progress-striped active" style="width:50%;margin:auto;"><div class="bar" style="width:100%;"></div></div>',itemsText:"items",itemText:"item"};$.fn.datagrid.Constructor=Datagrid;var Wizard=function(d,c){var b;this.$element=$(d);this.options=$.extend({},$.fn.wizard.defaults,c);this.currentStep=1;this.numSteps=this.$element.find("li").length;this.$prevBtn=this.$element.find("button.btn-prev");this.$nextBtn=this.$element.find("button.btn-next");b=this.$nextBtn.children().detach();this.nextText=$.trim(this.$nextBtn.text());this.$nextBtn.append(b);this.$prevBtn.on("click",$.proxy(this.previous,this));this.$nextBtn.on("click",$.proxy(this.next,this));this.$element.on("click","li.complete",$.proxy(this.stepclicked,this))};Wizard.prototype={constructor:Wizard,setState:function(){var l=(this.currentStep>1);var m=(this.currentStep===1);var b=(this.currentStep===this.numSteps);this.$prevBtn.attr("disabled",(m===true||l===false));var f=this.$nextBtn.data();if(f&&f.last){this.lastText=f.last;if(typeof this.lastText!=="undefined"){var j=(b!==true)?this.nextText:this.lastText;var d=this.$nextBtn.children().detach();this.$nextBtn.text(j).append(d)}}var h=this.$element.find("li");h.removeClass("active").removeClass("complete");h.find("span.badge").removeClass("badge-info").removeClass("badge-success");var k="li:lt("+(this.currentStep-1)+")";var e=this.$element.find(k);e.addClass("complete");e.find("span.badge").addClass("badge-success");var c="li:eq("+(this.currentStep-1)+")";var i=this.$element.find(c);i.addClass("active");i.find("span.badge").addClass("badge-info");var g=i.data().target;$(".step-pane").removeClass("active");$(g).addClass("active");this.$element.trigger("changed")},stepclicked:function(f){var b=$(f.currentTarget);var d=$(".steps li").index(b);var c=$.Event("stepclick");this.$element.trigger(c,{step:d+1});if(c.isDefaultPrevented()){return}this.currentStep=(d+1);this.setState()},previous:function(){var b=(this.currentStep>1);if(b){var c=$.Event("change");this.$element.trigger(c,{step:this.currentStep,direction:"previous"});if(c.isDefaultPrevented()){return}this.currentStep-=1;this.setState()}},next:function(){var d=(this.currentStep+1<=this.numSteps);var b=(this.currentStep===this.numSteps);if(d){var c=$.Event("change");this.$element.trigger(c,{step:this.currentStep,direction:"next"});if(c.isDefaultPrevented()){return}this.currentStep+=1;this.setState()}else{if(b){this.$element.trigger("finished")}}},selectedItem:function(b){return{step:this.currentStep}}};$.fn.wizard=function(c,e){var d;var b=this.each(function(){var h=$(this);var g=h.data("wizard");var f=typeof c==="object"&&c;if(!g){h.data("wizard",(g=new Wizard(this,f)))}if(typeof c==="string"){d=g[c](e)}});return(d===undefined)?b:d};$.fn.wizard.defaults={};$.fn.wizard.Constructor=Wizard;$(function(){$("body").on("mousedown.wizard.data-api",".wizard",function(){var b=$(this);if(b.data("wizard")){return}b.wizard(b.data())})});$(document).ready(function(){$("#on-top-link").click(function(){$("body,html").animate({scrollTop:0},800);return false});$(".box-header").each(function(){var b=$(this).next();if(b.hasClass("box")&&!b.hasClass("non-collapsible")){$(this).append('<a href="#" class="box-collapse pull-right">hide&nbsp;&nbsp;<i class="icon-caret-up"></i></a>').append('<a href="#" class="box-expand pull-right" style="display: none">show&nbsp;&nbsp;<i class="icon-caret-down"></i></a>')}});$(document).on("click","a.box-collapse",function(){var b=$(this).hide(100,"linear");b.parent(".box-header").next(".box").slideUp(400,function(){$(".box-expand",b.parent(".box-header")).show(100,"linear")});return false}).on("click","a.box-expand",function(){var b=$(this).hide(100,"linear");b.parent(".box-header").next(".box").slideDown(400,function(){$(".box-collapse",b.parent(".box-header")).show(100,"linear")});return false})});function timeAgo(f){switch(typeof f){case"number":break;case"string":f=+new Date(f);break;case"object":if(f.constructor===Date){f=f.getTime()}break;default:f=+new Date()}var e=[[60,"seconds",1],[120,"1 minute ago","1 minute from now"],[3600,"minutes",60],[7200,"1 hour ago","1 hour from now"],[86400,"hours",3600],[172800,"Yesterday","Tomorrow"],[604800,"days",86400],[1209600,"Last week","Next week"],[2419200,"weeks",604800],[4838400,"Last month","Next month"],[29030400,"months",2419200],[58060800,"Last year","Next year"],[2903040000,"years",29030400],[5806080000,"Last century","Next century"],[58060800000,"centuries",2903040000]];var h=(+new Date()-f)/1000,c="ago",g=1;if(Math.floor(h)===0){return"Just now"}if(h<0){h=Math.abs(h);c="from now";g=2}var b=0,d;while(d=e[b++]){if(h<d[0]){if(typeof d[2]=="string"){return d[g]}else{return Math.floor(h/d[2])+" "+d[1]+" "+c}}}return f}$(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){self=$(".nav-button");if(self.hasClass("collapsed")){self.removeClass("active")}else{self.addClass("active")}});(function(){var b={_object:null,_left_panel:null,_scrolling:false,_dropdowns:{},_opened_dropdown:null,destroyScroll:function(){if(b._currScroll==="v"&&b._object!==null){b._object.destroy();b._object=null}else{if(b._currScroll==="h"){$("#left-panel .active").unbind("click");$("#left-panel").removeClass("open")}}},_setup:function(d){b.destroyScroll();var c=$("#left-panel");if(d==="v"){c.css({height:"100%",position:"fixed",top:0,left:0});if(!b._object){$("#left-panel a").click(function(){if(b._scrolling){return false}})}b._setupDropdowns();b._object=new iScroll("left-panel-content",{hScroll:false,vScroll:true,onScrollMove:function(){b._scrolling=true;b._hideOpenedDropdowns()},onScrollEnd:function(){b._scrolling=false}})}else{c.css({height:"36px",position:"relative",top:0,left:0});b._setupHorizontalMenu()}b._currScroll=d},_update:function(){if(String(b._left_panel.css("z-index"))!=="1020"&&b._currScroll!=="v"){b._setup("v")}else{if(String(b._left_panel.css("z-index"))==="1020"&&b._currScroll!=="h"){b._setup("h")}}if(b._currScroll==="v"&&b._opened_dropdown!==null){b._setDropdownTopPosition(b._opened_dropdown)}},_initDropdowns:function(){$(".lp-dropdown-toggle").each(function(){var c=$(this),d=c.attr("id");b._dropdowns[d]={toggler:c,menu:$(".lp-dropdown-menu[data-dropdown-owner="+d+"]")};b._dropdowns[d]["width"]=b._calculateDropdownWidth(d);b._dropdowns[d].wrapper=$('<div class="lp-dropdown-wrapper" data-dropdown-owner="'+d+'" />').appendTo($("body"));b._dropdowns[d].wrapper.append($('<div class="arrow" />'));if(b._dropdowns[d].menu.hasClass("simple")){b._dropdowns[d].wrapper.addClass("simple")}});$("html").on("click.dropdown.data-api",function(){b._hideOpenedDropdowns()});$("html").on("click",".lp-dropdown-wrapper",function(c){c.stopPropagation()});$(".lp-dropdown-toggle").click(function(){b._hideOpenedDropdowns();b._setDropdownTopPosition($(this).attr("id"));b._opened_dropdown=$(this).attr("id");$(this).addClass("open");$(".lp-dropdown-wrapper[data-dropdown-owner="+$(this).attr("id")+"]").addClass("open");return false})},_setupDropdowns:function(){$("#lp-active").unbind("click").remove();var d;for(var c in b._dropdowns){d=b._dropdowns[c];d.wrapper.append(d.menu);d.wrapper.css({left:$("#left-panel li").width()+10});$("a",d.menu).each(function(){$(this).html(jQuery.data(this,"link_html"))});d.menu.css({width:d.width});$(".active",d.menu).css({display:"block"});d.wrapper.css({width:d.width});if(d.menu.hasClass("simple")){$("li, li a",d.menu).css({display:"block",width:"100%"})}}},_setupHorizontalMenu:function(){var d=$("#left-panel");var e;for(var c in b._dropdowns){e=b._dropdowns[c];e.toggler.parent().append(e.menu);e.toggler.removeClass("open");e.wrapper.removeClass("open");e.menu.css({width:"100%"});e.wrapper.css({width:"100%"});$(".active",e.menu).css({display:"none"});$("a",e.menu).each(function(){var f=$(this);jQuery.data(this,"link_html",f.html());f.text(e.toggler.text()+" / "+f.text())})}$('<a href="#" id="lp-active" />').prependTo(d).bind("click",function(){if(d.hasClass("open")){d.css({height:37})}else{d.css({height:$("#left-panel-content ul").innerHeight()+37})}d.toggleClass("open");return false}).text($(($(".active",d).length==1)?".active":".active .active",d).text())},_hideOpenedDropdowns:function(){$(".lp-dropdown-wrapper.open").removeClass("open");$(".lp-dropdown-toggle.open").removeClass("open");b._opened_dropdown=null},_calculateDropdownWidth:function(f){var d=0;if(b._dropdowns[f].menu.hasClass("simple")){var c=b._dropdowns[f].menu.parent(),e=$('<div id="calculateDropdownWidth" />').css({position:"absolute",width:3000,left:-10000}).appendTo("body").append(b._dropdowns[f].menu);$("li a",b._dropdowns[f].menu).each(function(){if(d<$(this).width()){d=$(this).width()}});d+=50;c.append(b._dropdowns[f].menu);e.remove()}else{$("li",b._dropdowns[f].menu).each(function(){d+=$(this).width()})}return d},_setDropdownTopPosition:function(c){var i=b._dropdowns[c];if(i.menu.hasClass("simple")){var l=i.toggler.parents("li"),k=l.offset().top,g=l.height(),h=i.wrapper.height(),m=$(window).height(),j=$(document).scrollTop();var e,f;if(h>g){if(m>k+h-j){e=k;f=g/2-6}else{e=m-h+j;if(e+h<g+k){e=g+k-h}f=k-e+g/2-6}}else{e=k+g/2-h/2;f=h/2-6}i.wrapper.css({top:e-j});$(".arrow",i.wrapper).css({"margin-top":f})}else{i.wrapper.css({top:i.toggler.offset().top-$(document).scrollTop()})}}};$(document).ready(function(){b._initDropdowns();b._left_panel=$("#left-panel");b._update()});$(window).resize(b._update)})();(function($){$.fn.simplePlot=function(graph_data,plot_options,options){var settings=$.extend(true,{},{pointsRadius:4,height:null,heightRatio:0.5,tooltipText:"x - y"},options||{});var plot_settings=$.extend(true,{},{series:{shadowSize:0},grid:{color:"#646464",borderColor:"transparent",borderWidth:20,hoverable:true},xaxis:{tickColor:"transparent"},legend:{show:false}},plot_options||{});var data=[],wrapper=null,graph_container=null,current_width=null,plot_obj=null,timer=null,available_colors=["#71c73e","#77b7c5","#d54848","#6c42e5","#e8e64e","#dd56e6","#ecad3f","#618b9d","#b68b68","#36a766","#3156be","#00b3ff","#646464","#a946e8","#9d9d9d"];for(var i=0;i<graph_data.length;i++){data.push($.extend({},graph_data[i]))}return this.each(function(){$(this).wrap('<div class="graph-wrapper" />').wrap('<div class="graph-container" />');graph_container=$(this).parent(".graph-container");wrapper=graph_container.parent(".graph-wrapper");wrapper.prepend('<div class="graph-info" />');var graph_info=$(".graph-info",wrapper);var updateContainerSize=function(){var width=wrapper.innerWidth();if(width==current_width){return}var height=(settings.height===null)?Math.ceil(width*settings.heightRatio):settings.height;graph_container.css({width:width,height:height});current_width=width;if(plot_obj){plot_obj.getPlaceholder().css({width:width,height:height});plot_obj.resize();plot_obj.setupGrid();plot_obj.draw()}};updateContainerSize();if(!data.length){return}for(var i=0,dataItem=data[0];i<data.length;dataItem=data[++i]){if(dataItem.color===undefined){dataItem.color=available_colors.shift()}if(dataItem.filledPoints===true){$.extend(true,dataItem,{points:{radius:settings.pointsRadius,fillColor:dataItem.color}});delete dataItem.filledPoints}graph_info.append($('<span><i style="background: '+dataItem.color+'"></i>'+dataItem.label+"</span>"))}plot_obj=$.plot($(this),data,plot_settings);if(plot_settings.series.pie===undefined){var previousPoint=null;$(this).bind("plothover",function(event,pos,item){if(item){if(previousPoint!=item.dataIndex){previousPoint=item.dataIndex;$("#tooltip").remove();var x=item.datapoint[0],y=item.datapoint[1];showTooltip(item.pageX,item.pageY,eval(settings.tooltipText))}}else{$("#tooltip").remove();previousPoint=null}})}$(window).resize(function(){if(timer){clearTimeout(timer)}timer=setTimeout(function(){timer=null;updateContainerSize()},300)})});function showTooltip(x,y,contents){var tooltip=$('<div id="tooltip">'+contents+"</div>").appendTo("body");if((x+20+tooltip.width())>(wrapper.offset().left+wrapper.width())){x-=40+tooltip.width()}else{x+=20}tooltip.css({top:y-16,left:x}).fadeIn()}}})(jQuery);(function(b){b.fn.extend({limiter:function(c,d){b(this).on("keyup focus",function(){e(this,d)});function e(h,g){var f=h.value.length;if(f>c){h.value=h.value.substr(0,c);f=c}g.html(c-f)}e(b(this)[0],d)}})})(jQuery);(function(b){b.fn.extend({afTasks:function(c){if(!c||(c&&typeof(c)!=="string")){c=b.extend({},b.afTasks._callbacks,c||{})}this.each(function(){var d=null;if(c&&typeof(c)==="string"){d=b.data(this,"afTasks");if(c==="clearCompletedTasks"){d.clearCompletedTasks(this)}return}b.data(this,"afTasks",new b.afTasks(this,c))});return}});b.afTasks=function(e,c){var d=this;this.callbacks=c;this.clearCompletedTasks=function(f){b(".completed",b(f)).hide(200,function(){b(this).remove()});this.callbacks.clearCallback(f)};b(".widget-tasks").on("click",".task input[type=checkbox]",function(f){b(this).parents(".task").toggleClass("completed");if(b(this).parents(".task").hasClass("completed")){d.callbacks.completeCallback(e,f)}else{d.callbacks.cancelCallback(e,f)}});b(".widget-tasks").on("click",".task a",function(){b("input",b(this).prev("div")).click();return false})};b.afTasks._callbacks={completeCallback:function(d,c){},cancelCallback:function(d,c){},clearCallback:function(c){}}})(jQuery);(function(b){b.fn.extend({afStarsRating:function(d,c){if(!d||(d&&typeof(d)!=="string")){d=b.extend({},b.afStarsRating.options,d||{})}this.each(function(){var e=null;if(d&&typeof(d)==="string"){e=b.data(this,"afStarsRating");if(d==="setCurrentRating"){e.setCurrentRating(c)}return}b.data(this,"afStarsRating",new b.afStarsRating(b(this),d))});return}});b.afStarsRating=function(f,c){this.options=c;var d=this,g=b('<ul class="widget-stars-rating" />');for(var e=0;e<this.options.stars_count;e++){g.append('<li><a href="#" title="" class="icon-star"></a></li>')}f.append(g);b(".widget-stars-rating a",f).on("mouseenter",function(){b(".widget-stars-rating li",f).removeClass(d.options.class_active);b(this).parent().addClass(d.options.class_active).prevAll("li").addClass(d.options.class_active)}).on("mouseleave",function(){d.setCurrentRating(d.options.current_rating)}).on("click",function(){d.options.onSetRating(this,b(this).parent().prevAll("li").length+1);return false});this.setCurrentRating=function(h){d.options.current_rating=h;if((h-Math.floor(h))>d.options.lower_limit){h=Math.ceil(h)}else{h=Math.floor(h)}b(".widget-stars-rating li",f).removeClass(d.options.class_active).slice(0,h).addClass(d.options.class_active)};this.setCurrentRating(this.options.current_rating)};b.afStarsRating.options={stars_count:5,current_rating:0,class_active:"active",lower_limit:0.35,onSetRating:function(c,d){}}})(jQuery);(function(b){b.fn.extend({afStream:function(d,c){if(!d||(d&&typeof(d)!=="string")){d=b.extend({},b.afStream.options,d||{})}this.each(function(){var e=null;if(d&&typeof(d)==="string"){e=b.data(this,"afStream");switch(d){case"addEvent":e.addEvent(c);break;case"updateTime":e.updateTime(true);break;case"showEvents":e.showEvents(c);break;case"hideEvents":e.hideEvents(c);break;case"showAllEvents":e.showAllEvents();break;case"hideAllEvents":e.hideAllEvents();break;case"clearAllEvents":e.clearAllEvents();break;case"setUpdateInterval":e.setUpdateInterval(c);break;case"setShowLimit":e.setShowLimit(c);break}return}b.data(this,"afStream",new b.afStream(b(this),d))});return}});b.afStream=function(f,c){this.options=c;this._update_timer=null;var e=this;this.options._available_events=[];for(var i in this.options.event_types){this.options._available_events.push(i)}if(typeof(this.options.show_only)!=="array"){this.options.show_only=b.merge([],this.options._available_events)}f.append('<div class="stream-empty">No events</div>');if(this.options.height){f.css({height:this.options.height,overflow:"hidden"})}this.addEvent=function(k){if(!k.type||!k.message||e.options._available_events.indexOf(k.type)===-1){return}var j=b((k.icon)?k.icon:((e.options.event_types[k.type].icon)?e.options.event_types[k.type].icon:"<div />")).addClass("stream-icon"),l=b(e.options.template.replace(/\#\{\{type\}\}/ig,k.type).replace(/\#\{\{time\}\}/ig,timeAgo(k.time=(!k.time)?new Date():k.time)).replace(/\#\{\{caption\}\}/ig,(k.caption)?k.caption:e.options.event_types[k.type].caption).replace(/\#\{\{message\}\}/ig,k.message)).prepend(j);b(".stream-empty",f).hide();e.updateTime(true);if(e.options.show_only.indexOf(k.type)===-1){l.css({display:"none"});f.prepend(l)}else{f.prepend(l);l.animate({opacity:1},{duration:1000})}l.each(function(){b.data(this,"stream-time",k.time)});g();if(e._update_timer){clearTimeout(e._update_timer);e._update_timer=null}if(e.options.update_interval){e._update_timer=setTimeout(h,e.options.update_interval*1000)}e.options.onEventAdd(f)};var d=function(j){if(typeof(j)==="string"){j=j.replace(/\s+?/ig,"").split(",")}else{if(typeof(j)!=="array"){j=[]}}for(var k=0;k<j.length;k++){if(e.options._available_events.indexOf(j[k])===-1){j.splice(k,1)}}return j};this.showEvents=function(j){var l=d(j);for(var k=0;k<l.length;k++){if(e.options.show_only.indexOf(l[k])===-1){e.options.show_only.push(l[k]);b(".stream-event-"+l[k],f).css({display:"block"}).animate({opacity:1},{duration:500})}}g()};this.hideEvents=function(j){var l=d(j);for(var k=0;k<l.length;k++){if(e.options.show_only.indexOf(l[k])!==-1){e.options.show_only.splice(e.options.show_only.indexOf(l[k]),1);b(".stream-event-"+l[k],f).animate({opacity:0},{duration:500,complete:function(){b(this).css({display:"none"})}})}}g()};this.showAllEvents=function(){e.showEvents(e.options._available_events)};this.hideAllEvents=function(){e.hideEvents(e.options._available_events)};this.clearAllEvents=function(){b(".stream-event",f).remove();b(".stream-empty",f).show()};this.setUpdateInterval=function(j){e.options.update_interval=parseInt(j,10);if(e._update_timer){clearTimeout(e._update_timer);e._update_timer=null}if(e.options.update_interval){e._update_timer=setTimeout(h,e.options.update_interval*1000)}};this.setShowLimit=function(j){e.options.show_limit=parseInt(j,10);g()};this.updateTime=function(j){j=(typeof j!=="undefined")?j:false;b(".stream-event",f).each(function(){b(".stream-time",b(this)).text(timeAgo(b.data(this,"stream-time")))});e.options.onTimeUpdate(f);if(!j&&e.options.time_update_interval){setTimeout(e.updateTime,e.options.time_update_interval*1000)}};if(this.options.time_update_interval){setTimeout(this.updateTime,this.options.time_update_interval*1000)}var h=function(){e.options.onUpdate(f);if(e._update_timer){clearTimeout(e._update_timer);e._update_timer=null}if(e.options.update_interval){e._update_timer=setTimeout(h,e.options.update_interval*1000)}};if(this.options.update_interval){this._update_timer=setTimeout(h,this.options.update_interval*1000)}var g=function(){var l=b(".stream-event",f).filter(":visible");if(l.length===0){return}if(e.options.show_limit&&l.length>e.options.show_limit){l.slice(e.options.show_limit).remove()}if(e.options.height){var j,k=f.offset().top+e.options.height;while((j=l.last()).offset().top>k){j.remove()}}}};b.afStream.options={update_interval:0,time_update_interval:10,height:0,show_limit:0,template:'<div class="stream-event stream-event-#{{type}}"><div class="stream-time">#{{time}}</div><div class="stream-caption">#{{caption}}</div><div class="stream-message">#{{message}}</div></div>',event_types:{},show_only:"all",_available_events:[],onUpdate:function(c){},onEventAdd:function(c){},onTimeUpdate:function(c){}}})(jQuery);(function(b){b.fn.extend({afMap:function(c){if(!c||(c&&typeof(c)!=="string")){c=b.extend({width:"100%",height:300,fullPage:false,mapOptions:{}},c||{})}this.each(function(){var d=null;if(c&&typeof(c)==="string"){d=b.data(this,"afMap");if(c==="clearCompletedTasks"){d.clearCompletedTasks(this)}return}b.data(this,"afMap",new b.afMap(this,c))});return}});b.afMap=function(e,c){var d=this,f;this.e=b(e);this.options=c;this.resize=function(){var h=b("#left-panel"),l=String(h.css("z-index")),k=b("#main-navbar").height(),j=0,i=0,g=0;if(l!=="1020"){j=b("#left-panel").width();i=b(window).width()-j;g=b(window).height()-k}else{if(l==="1020"){k=k+36;j=0,i=b(window).width(),g=b(window).height()-k}}d.e.css({position:"absolute",top:k,left:j,width:i,height:g})};if(this.options.fullPage){this.resize();b(window).resize(this.resize)}else{if(this.options.width!==null){this.e.css("width",this.options.width)}if(this.options.height!==null){this.e.css("height",this.options.height)}}google.maps.event.addDomListener(window,"load",function(){d.map=new google.maps.Map(d.e.get(0),d.options.mapOptions)})}})(jQuery);