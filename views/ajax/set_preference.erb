<%
return_message = {}
return_message['status'] = 'success'
begin
    name = @body['name']
    value = @body['value']
    default = @body['default']

    raise "name must be a String" unless name.is_a?(String)
    raise "value cannot be nil" if value.nil?
    raise "default cannot be nil" if default.nil?
    raise "value and default must be of the same type" unless value.class == default.class    

    @login.user.preference(name, default, value)
rescue => e
    return_message[:status] = e.to_console
end
return return_message.to_json
%>
