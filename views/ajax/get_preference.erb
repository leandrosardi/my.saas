<%
return_message = {}
return_message['status'] = 'success'
begin
    name = @body['name']
    default = body['default']

    raise "name must be a String" unless name.is_a?(String)
    raise "default cannot be nil" if default.nil?
    raise "value and default must be of the same type" unless value.class == default.class    

    return_message[:value] = @login.user.preference(name, default, nil)
rescue => e
    return_message[:status] = e.to_console
end
return return_message.to_json
%>
